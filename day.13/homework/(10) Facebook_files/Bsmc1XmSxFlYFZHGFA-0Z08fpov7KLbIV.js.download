;/*FB_PKG_DELIM*/

__d("AudioSettingsVolumeSetting",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",QUIET:"quiet"});f["default"]=a}),66);
__d("CometVideoPlayerInstreamAdsFeedContextCardContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext({isWatchTab:!1,onNodeChangeFunc:null});function a(){return i(j)}g.CometVideoPlayerInstreamAdsFeedContextCardContext=j;g.useCometVideoPlayerInstreamAdsFeedContextCardContext=a}),98);
__d("CometVideoPlayerNextgendashAvailability",[],(function(a,b,c,d,e,f){a=Object.freeze({AVAILABLE:"AVAILABLE",UNAVAILABLE_NEXTGENDASH_GK:"UNAVAILABLE_NEXTGENDASH_GK",UNAVAILABLE_OZ_PLAYER_AVAILABILITY:"UNAVAILABLE_OZ_PLAYER_AVAILABILITY",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_1:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_1",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_2:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_2",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_3:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_3",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_4:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_4",UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_5:"UNAVAILABLE_TEMPORARY_FOR_THIS_KIND_OF_VIDEO_5",UNAVAILABLE_FROM_JS_OZ_PLAYER_AVAILABILITY:"UNAVAILABLE_FROM_JS_OZ_PLAYER_AVAILABILITY",UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER:"UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER",UNAVAILABLE_FROM_JS_NEXTGENDASH_GK:"UNAVAILABLE_FROM_JS_NEXTGENDASH_GK",UNAVAILABLE_FROM_JS_NOT_DESIRED:"UNAVAILABLE_FROM_JS_NOT_DESIRED"});f["default"]=a}),66);
__d("GraphQLVideoDRMInfo",["isEmptyObject"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.fairplay_cert,d=a.graph_api_video_license_uri,e=a.video_license_uri_map;a=a.widevine_cert;d={fairplayCert:b,graphApiVideoLicenseUri:(b=d)!=null?b:null,videoLicenseUriMap:e,widevineCert:a};return d.graphApiVideoLicenseUri===null&&c("isEmptyObject")(d.videoLicenseUriMap)?null:d}g.makeGraphQLVideoDRMInfo=a}),98);
__d("GraphQLVideoP2PSettings",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["HiveJava","HiveJS","StatsJS"]);function a(a){return(a=g.cast(a))!=null?a:null}f.HiveTechOrder=g;f.hiveTechOrderOrNull=a}),66);
__d("InstreamVideoAdBreaksPlayer_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InstreamVideoAdBreaksPlayer_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"InstreamExtraConfig",kind:"LinkedField",name:"instream_extra_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"instream_halo_delay_time_seconds",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{args:null,documentName:"InstreamVideoAdBreaksPlayer_video_instream_video_ad_breaks_comet",fragmentName:"InstreamVideoAdBreaksPlayerImpl_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("InstreamVideoAdBreaksPlayer.react",["CometPlaceholder.react","CometRelay","InstreamVideoAdBreaksPlayer_video.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=a.playerFormat,f=a.subOrigin;a=a.video;a=d("CometRelay").useFragment(h!==void 0?h:h=b("InstreamVideoAdBreaksPlayer_video.graphql"),a);var g=a.id,i=a.instream_extra_config;a=a.instream_video_ad_breaks_comet;return j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(d("CometRelay").MatchContainer,{match:a,props:{instreamExtraConfig:{instreamHaloDelayTimeSeconds:i==null?void 0:i.instream_halo_delay_time_seconds},instreamVideoAdBreaksComet:a,playerFormat:e,subOrigin:f,videoFBID:g}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LatencySensitiveType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({NORMAL:0,LOW:1,ULTRA_LOW:2});c=a;f["default"]=c}),66);
__d("OzActiveActiveFailoverNetworkRequestStreamHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.onResponse=function(a,b){var c=a.headers;c&&c.has("x-fb-video-replica")&&this.$1(a,b);return null};b.onError=function(a,b){return null};return a}();f["default"]=a}),66);
__d("OzBufferVTTCaptionsVisibleStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!this.$1()};b.getBufferTarget=function(){return 0};return a}();f["default"]=a}),66);
__d("OzCDNSignedQueryParams",["ConstUriUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.$2=function(a,b,c){this.$1[a]==null&&(this.$1[a]={}),this.$1[a][b]=c};b.get=function(a){a=this.$1[a];return a==null?null:a};b.update=function(a){a=d("ConstUriUtils").getUri(a);if(a!=null){var b=a.getQueryParams();a=a.getDomain()+a.getPath();var c=b.get("oe");c!=null&&this.$2(a,"oe",String(b.get("oe")));b.get("oh")!=null&&this.$2(a,"oh",String(b.get("oh")))}};return a}();g["default"]=a}),98);
__d("OzCustomParsers",[],(function(a,b,c,d,e,f){function a(){return new Map([["fbProjection",function(a){try{return a.Period[0].AdaptationSet[0].$.FBProjection||null}catch(a){return null}}],["hasInbandCaptionsFromAccessibility",function(a){a=a.Period[0];a=a&&a.AdaptationSet[0].Accessibility;return a&&a[0]?a[0].$.schemeIdUri==="urn:scte:dash:cc:cea-608:2015":!1}],["hasInbandCaptionsFromUsingASRCaptions",function(a){a=Number.parseInt(a.$.usingASRCaptions,0);return!isNaN(a)&&a!=0}],["hasInbandCaptionsFromIsUsingAsrCaptionsEmployeeDogfooding",function(a){a=Number.parseInt(a.$.isUsingAsrCaptionsEmployeeDogfooding,0);return!isNaN(a)&&a!=0}],["hasVTTRepresentationCaptions",function(a){return a.Period[0].AdaptationSet.find(function(a){var b;return((b=a.$.mimeType)==null?void 0:b.startsWith("application"))&&a.$.lang!=null})!=null}],["isLiveTemplated",function(a){return a.$.FBIsLiveTemplated==="true"}],["isFBMS",function(a){return a.$.FBMS==="true"}],["isFBWasLive",function(a){return a.$.FBWasLive==="true"}],["loapStreamType",function(a){return a.$.loapStreamType?parseInt(a.$.loapStreamType,10):0}],["fbManifestIdentifier",function(a){return(a=a.$.FBManifestIdentifier)!=null?a:""}],["lastVideoFrameTs",function(a){return a.$.lastVideoFrameTs?Number.parseInt(a.$.lastVideoFrameTs,10):null}],["currentServerTimeMs",function(a){return a.$.currentServerTimeMs?Number.parseInt(a.$.currentServerTimeMs,10):null}],["validationErrors",function(a){return(a=a.$.validationErrors)!=null?a:""}]])}f.createOzCustomParser=a}),66);
__d("oz-player/manifests/OzSegmentOptions",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=!1,this.$2=null}var b=a.prototype;b.setSegmentNumDecisionTime=function(a){this.$2=a};b.getSegmentNumDecisionTime=function(){return this.$2};b.setIsDVLEnabled=function(a){this.$1=a};b.isDVLEnabled=function(){return this.$1};return a}();f["default"]=a}),66);
__d("oz-player/shims/www/OzURIWWWImplConstUri",["ConstUriUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.getQueryParams();var b={};a.forEach(function(a,c){typeof a==="string"||typeof a==="number"?b[c]=a:b[c]=String(a)});return b}a=function(){function a(a){this.$1=d("ConstUriUtils").getUri(a);if(this.$1==null)throw c("err")("Invalid URI passed to OzURI");this.$2=h(this.$1)}var b=a.prototype;b.addQueryData=function(a,b){var c=this.$1;if(typeof a==="string"){var d;c=(d=c)==null?void 0:d.addQueryParam(a,b===void 0?"":b)}else{var e=new Map();Object.keys(a).forEach(function(b){e.set(b,a[b])});c=(d=c)==null?void 0:d.addQueryParams(e)}c!=null&&(this.$1=c,this.$2=h(this.$1))};b.getQueryData=function(){return this.$2};b.getDomain=function(){var a;return(a=(a=this.$1)==null?void 0:a.getDomain())!=null?a:""};b.toString=function(){var a;return(a=(a=this.$1)==null?void 0:a.toString())!=null?a:""};b.getPath=function(){var a;return(a=(a=this.$1)==null?void 0:a.getPath())!=null?a:""};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzURIWWW",["oz-player/shims/www/OzURIWWWImplConstUri"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzURIWWWImplConstUri")}),98);
__d("oz-player/shims/OzURI",["oz-player/shims/www/OzURIWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzURIWWW")}),98);
__d("oz-player/utils/ozConcatUint8Arrays",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0;for(var c=0;c<a.length;++c)b+=a[c].byteLength;var e,f;try{e=new ArrayBuffer(b),f=new Uint8Array(e)}catch(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_ALLOCATION_FAILURE",description:a.name+": "+a.message})}c=0;for(b=0;b<a.length;++b){var g=a[b];f.set(g,c);c+=g.byteLength}return{buffer:e,view:f}}g["default"]=a}),98);
__d("oz-player/utils/OzReadableStreamUtils",["oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof TextDecoder!=="undefined"?function(a){return new TextDecoder("utf-8").decode(new Uint8Array(a))}:function(a){return String.fromCharCode.apply(null,a)};function i(a){var b=[],d=function c(){return a.read().then(function(a){var d=a.value;a=a.done;if(a)return null;if(!d)return null;b.push(d);return c()})};return d().then(function(){var a=c("oz-player/utils/ozConcatUint8Arrays")(b);a=a.view;return a})}function a(a){return i(a).then(function(a){return h(a)})}function b(a){var b=new Uint8Array(a.length);return b.map(function(b,c){return a.charCodeAt(c)})}g.pumpAllData=i;g.pumpString=a;g.stringToUint8Array=b}),98);
__d("OzCustomRepresentationParsers",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=a.ozConfig,e=a.startTimestamp;a={timescale:function(a){a=a.SegmentTemplate;if(a&&a.length>0){a=a[0].$;if(a)return Number.parseInt(a.timescale,0)||null}return null}};b.getBool("parse_initialization_binary",!1)&&(a.initializationBinary=function(a){try{a=window.atob(a.FBInitializationBinary[0]._);return d("oz-player/utils/OzReadableStreamUtils").stringToUint8Array(a)}catch(a){return null}});a.playbackResolutionMos=function(a){try{return a.$.FBPlaybackResolutionMos}catch(a){return null}};a.playbackResolutionCsvqm=function(a){try{return a.$.FBPlaybackResolutionCsvqm}catch(a){return null}};a.qualityLabel=function(a){try{return a.$.FBQualityLabel}catch(a){return null}};b.getBool("parse_first_segment",!1)&&(a.firstSegmentParser=function(a){if(e!=null&&e>0)return null;try{var b=a.SegmentBase[0].$.FBFirstSegmentRange.split("-").map(Number),d={startByte:b[0],endByte:b[1]};b=a.BaseURL[0]._;var f=new(c("oz-player/shims/OzURI"))(b),g=new(c("oz-player/manifests/OzSegmentOptions"))();return{getData:function(){return null},getURI:function(){return f},getByteRange:function(){return d},getTimeRange:function(){return{startTime:0,endTime:2}},getSequenceNumber:function(){return null},getOptions:function(){return g}}}catch(a){return null}});return a}g.createOzCustomRepresentationParsers=a}),98);
__d("OzDOMEventListenerImpl",["CometEventListener"],(function(a,b,c,d,e,f,g){"use strict";a={listenDOMEvent:c("CometEventListener").listen,captureDOMEvent:c("CometEventListener").capture,suppressDOMEvent:c("CometEventListener").suppress};b=a;g["default"]=b}),98);
__d("OzMinimumSmallestDimensionRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a){var b=this;if(a.length===0)return[];var c=a.filter(function(a){var c=a.getWidth();a=a.getHeight();c=c<a?c:a;return c>=b.$1});return c.length>0?c:[a[a.length-1]]};return a}();f["default"]=a}),66);
__d("OzMosThresholdRestriction",["MosUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=new Map(),this.$4=a,this.$1=a.getNumber("mos_upper_threshold",0),this.$2=a.getNumber("mos_lower_threshold",0)}var b=a.prototype;b.$5=function(){return this.$4.getBool("cache_mos_threshold",!1)?{mosUpperThreshold:this.$1,mosLowerThreshold:this.$2}:{mosUpperThreshold:this.$4.getNumber("mos_upper_threshold",0),mosLowerThreshold:this.$4.getNumber("mos_lower_threshold",0)}};b.$6=function(a,b){var c=null;if(this.$3.get(a))c=this.$3.get(a);else{var e=a.getCustomField("playbackResolutionMos");e!=null&&(c=d("MosUtils").parsePlaybackMos(String(e)),c&&this.$3.set(a,c))}return c!=null?d("MosUtils").getMosValue(c,d("MosUtils").getQualityLabel(b.width,b.height)):null};b.$7=function(a,b){var c=this,d=null,e=this.$5(),f=e.mosUpperThreshold;a.forEach(function(a){a=c.$6(a,b);a!=null&&a>f&&(d==null||d>a)&&(d=a)});return d==null?a.slice():a.filter(function(a){a=c.$6(a,b);return a==null?!0:a<=f||a===d})};b.$8=function(a,b){var c=this,d=[],e=this.$5(),f=e.mosLowerThreshold;a.forEach(function(a){var e=c.$6(a,b);e!=null&&e>f&&d.push(a)});d.length===0&&d.push(a[a.length-1]);return d};b.applyRestriction=function(a,b){if(a.length===0)return[];var c=this.$5(),d=c.mosLowerThreshold;c=c.mosUpperThreshold;var e;if(c>0){e=this.$7((c=e)!=null?c:a,b)}if(d>0){e=this.$8((c=e)!=null?c:a,b)}return(d=e)!=null?d:a.slice()};return a}();g["default"]=a}),98);
__d("OzOneSemanticHandlerUtils",["ConstUriUtils","qex","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){b!=null&&(b.indexOf("+RE")>=0&&a.retry()),c!=null&&c()}function a(a,b){var d=b.error;d=d.getExtra();var e=d.code;d=d.headers;var f=null;e==null&&c("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player");d==null&&c("recoverableViolation")("A ONE Semantic error response must contain response Headers.","comet_video_player");if(d!=null){d=d.get("x-fb-one-variant");f=(d=d)!=null?d:null}d=JSON.parse(a.getString("network_retry_intervals_json","{}"));a=d[e];switch(e){case"410":b.endStream();break;case"404":h(b,f,function(){b.retry({behavior:"recover_failed_request"})});break;case"429":b.retry(a);break;case"403":default:}}function i(a){if(a!=null){a=parseInt(a,10);if(3>0)return!isNaN(a)&&a>0&&a<=3}return!1}function j(a,b){if(a!=null&&b!=null){a=parseInt(a,10);b=parseInt(b,10);return!isNaN(a)&&!isNaN(b)&&a>0&&a<=b}return!1}function k(a){if(a!=null){a=d("ConstUriUtils").getUri(a);if(a){a=a.getQueryParam("os_param");return a?String(a).toString():null}}return null}function l(a,b){var d=a!=null;return i(b)||(d||!!c("qex")._("1636"))&&j(b,a)}function b(a){var b=a.getExtra();b=b.headers;b=m(b);a=a.getExtra();var d=a.code;a=a.url;if(b!=null&&d==null){c("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player");return!1}d=k(a);return l(d,b)}function m(a){if(a){a=a.get("x-fb-one");if(a!=null)return parseInt(a,10)>0?a:null}return null}function e(a,b,c){var d=null,e=null;b!=null&&(d=k(b),d!=null&&a.setOneReqWave(parseInt(d,10)));b=c==null?void 0:c.headers;b&&(e=m(b),e!=null&&a.setOneResWave(parseInt(e,10)));a.setOneObserved(l(d,e))}g.maybeRetryForVariant=h;g.evaluateOneSemanticsResponse=a;g.isOneSemanticsForcedForResponseWave=i;g.isOneSemanticsEnabledForWave=j;g.getOneSemanticRequestWave=k;g.shouldRespondWithOneSemantics=b;g.getOneSemanticResponseWave=m;g.setOneSemanticFetchStreamLoggingAttributes=e}),98);
__d("handleOzManifestFetchErrorEvent",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=a.getNumber("initial_manifest_request_retry_count",0),d=JSON.parse(a.getString("network_retry_intervals_json","{}")),e=a.getNumber("live_max_try_attempts_on_404",1),f=["404","503"];a.getBool("live_gracefully_handle_no_network",!1)&&f.push("0");a.getBool("live_gracefully_handle_410",!1)&&f.push("410");a.getBool("live_gracefully_handle_502",!1)&&f.push("502");a.getBool("live_gracefully_handle_429",!1)&&f.push("429");a.getBool("live_gracefully_handle_504",!1)&&f.push("504");a.getBool("normalize_mpd_fetch_errors",!1)&&f.push("20");var g=b.error.getExtra().code;if(a.getBool("no_retry_on_empty_string_error_code",!1)&&g==="")return;a.getBool("handle_mpd_null_error_codes",!1)&&(g=g!=null?g:null);d=d[g];if(b.isInitialRequest)typeof d==="number"&&d>0&&b.retryAttemptCount<c&&b.retry({waitMs:d});else if(g!=null&&f.indexOf(g)>-1)switch(g){case"410":b.endStream();break;case"404":e<b.consecutiveFailuresForErrorCode&&b.retry();break;case"504":case"502":case"503":case"20":case"0":b.retry();break;case"429":typeof d==="number"&&d>0&&b.retry({waitMs:d});break;default:break}else g===null&&a.getBool("handle_mpd_null_error_codes",!1)&&b.retry()}f["default"]=a}),66);
__d("handleOzStreamErrorEvent",[],(function(a,b,c,d,e,f){"use strict";var g=[0,1,1,2,3,5,8,13,21,34];function a(a,b){var c=b.error.getExtra().code;if(a.getBool("no_retry_on_empty_string_error_code",!1)&&c==="")return;if(a.getBool("retry_null_error_code_in_stream",!1)&&c==null){b.retry();return}var d=JSON.parse(a.getString("network_end_broadcasts_json","[]"));if(d.includes(c)){b.endStream();return}d=JSON.parse(a.getString("network_skip_json","[]"));if(d.includes(c)){b.retry();return}d=a.getBool("back_off_pdash_504_retry",!0)?g[b.retryAttemptCount]:0;var e=JSON.parse(a.getString("network_reload_mpd_json","[]")),f=a.getBool("fix_reload_manifest_retry",!1);if(a.getBool("back_off_pdash_504_retry",!0)&&d==null&&(!f||e.includes(c)))return;if(d!=null&&e.includes(c)){a.getBool("network_reload_mpd_json_retry",!1)?b.retry({behavior:"recover_failed_request",waitMs:d*1e3}):b.retry({waitMs:d*1e3});return}f=JSON.parse(a.getString("network_retry_intervals_json",'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}'));e=c!=null?f[c]:null;if(e!=null){a.getBool("network_retry_intervals_json_retry",!1)?b.retry({behavior:"retry_failed_request",waitMs:e}):b.retry({waitMs:e});return}}f["default"]=a}),66);
__d("OzOneSemanticHandler",["OzOneSemanticHandlerUtils","handleOzManifestFetchErrorEvent","handleOzStreamErrorEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=b.error;d("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(e)?d("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(a,b):c("handleOzManifestFetchErrorEvent")(a,b)}function b(a,b){var e=b.error;d("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(e)?d("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(a,b):c("handleOzStreamErrorEvent")(a,b)}g.handleManifestFetchErrorEvent=a;g.handleStreamErrorEvent=b}),98);
__d("oz-player/shims/www/ozvariantWWW",["invariant"],(function(a,b,c,d,e,f,g,h){a=h;g["default"]=a}),98);
__d("oz-player/shims/ozvariant",["oz-player/shims/www/ozvariantWWW"],(function(a,b,c,d,e,f,g){g["default"]=c("oz-player/shims/www/ozvariantWWW")}),98);
__d("oz-player/utils/OzNumericalHelper",[],(function(a,b,c,d,e,f){"use strict";var g=1e-5;function h(a,b,c){c===void 0&&(c=g);return Math.abs(b-a)<=c}function i(a,b,c){c===void 0&&(c=g);return a>b&&!h(a,b,c)}function j(a,b,c){c===void 0&&(c=g);return a<b&&!h(a,b,c)}function a(a,b,c){c===void 0&&(c=g);return j(a,b,c)||h(a,b,c)}function b(a,b,c){c===void 0&&(c=g);return i(a,b,c)||h(a,b,c)}f.equalTo=h;f.greaterThan=i;f.lessThan=j;f.lessThanOrEqual=a;f.greaterThanOrEqual=b}),66);
__d("oz-player/utils/OzNumericalRangeUtil",["oz-player/utils/OzNumericalHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=.01;function i(a,b){b=b.rangeEnd;return b==null?!1:Math.abs(a.rangeStart-b)>h&&a.rangeStart>b}function j(a,b){a=a.rangeEnd;b=b.rangeEnd;if(a==null)return!0;return b==null?!1:Math.abs(a-b)>h&&a>b}function k(a,b,c,d){a=c.rangeEnd;return a==null?!1:b===a||Math.abs(b-a)>((c=d)!=null?c:h)&&b>a}function a(a,b,c){var d=b.rangeEnd;if(d==null)return!1;c=(c=c)!=null?c:h;return a-b.rangeStart>=c&&d-a>=c}function l(a,b){return a>b-h}function b(a){if(!a.length)return[];var b=[],c=a[0];b.push(c);for(var d=1;d<a.length;d++){var e=a[d];if(!j(e,c))continue;else i(e,c)?(c={rangeStart:e.rangeStart,rangeEnd:e.rangeEnd},b.push(c)):c.rangeEnd=e.rangeEnd}return b}function c(a,b,c){return b.reduceRight(function(b,d){k(a,d.rangeStart,c)||k(a,c.rangeStart,d)?b.push(d):(c.rangeEnd!=null&&(d.rangeEnd==null||k(a,d.rangeEnd,c))&&b.push({rangeStart:c.rangeEnd,rangeEnd:d.rangeEnd}),l(c.rangeStart,d.rangeStart)&&b.push({rangeStart:d.rangeStart,rangeEnd:c.rangeStart}));return b},[]).filter(function(a){return a.rangeEnd==null||a.rangeStart<a.rangeEnd}).reverse()}function e(a,b,c,d){d===void 0&&(d=h);for(var e=0;e<c.length;e++){var f=c[e],g=f.rangeStart;if(l(b,g)&&!k(a,b,f,d))return e}return-1}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d=d.rangeStart;if(!l(a,d))return c}return-1}function m(a,b,c){return a>=b?0:c.reduceRight(function(c,d){var e=d.rangeStart;d=d.rangeEnd;if(b<e||d!=null&&a>d)return c;else if(d==null||b<=d)return Math.min(b-e,b-a)+c;else if(a>=e)return Math.min(d-a,b-a)+c;else return d-e+c},0)}function n(a,b){var c;c=a.length==0?(c=b[b.length-1])!=null?c:null:null;for(var e=0;e<a.length;e++){var f=a[e];for(var g=e;g<b.length;g++){var h=b[g];if(d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&f.rangeEnd!=null&&h.rangeEnd!=null&&d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd))break;else if(h.rangeEnd!=null&&f.rangeEnd!=null&&!d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)){c={rangeStart:h.rangeStart,rangeEnd:h.rangeEnd};break}else if(h.rangeEnd!=null&&f.rangeEnd!=null&&d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&!d("oz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd)){c={rangeStart:f.rangeEnd,rangeEnd:h.rangeEnd};break}}if(c!==null)break}return c}function o(a){var b=[];for(var c=0;c<a.length;c++)b.push({rangeStart:a[c].startTime,rangeEnd:a[c].endTime});return b}g.isAfter=k;g.isWithin=a;g.isLargerThan=l;g.mergeSortedRanges=b;g.diffSortedRanges=c;g.findCurrentRangeIndex=e;g.findNextRangeIndex=f;g.findDiffCoveredByRanges=m;g.firstAddedInSortedRanges=n;g.convertFromTimeRanges=o}),98);
__d("oz-player/manifests/SegmentTemplateSegmentsContainer",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzEventEmitter","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1e-4;a=function(){function a(a,b,d,e,f,g){g===void 0&&(g=!1),this.$7=new(c("oz-player/shims/OzEventEmitter"))(),this.$10=null,this.$8=a,this.$2=b,this.$3=d,this.$1=f,this.$4=e,this.$5=this.$11(this.$4),this.$6=g,this.$9=this.$8.getNumber("live_numerical_error_epsilon")}var b=a.prototype;b.getSegmentByTime=function(a){a=this.$12(a);a=a*this.$3;var b=null;for(var c=this.$4.length-1;c>=0;c--){var e=this.$4[c];if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(e.t+e.d*(e.r+1),a,this.$9))break;b=e}if(b===null)return null;if(d("oz-player/utils/OzNumericalHelper").greaterThan(b.t,a,this.$9))return null;e=Math.max(0,Math.floor((a-b.t+this.$9)/b.d));return this.$13(b,e)};b.getSegment=function(a){var b=0;a=a;while(a>=0&&b<this.$4.length){var c=this.$4[b];c=c.r;c=c+1;if(a>=c){a-=c;b++;continue}break}c=this.$4[b];return!c?null:this.$13(c,a)};b.getSegmentAfter=function(a){a=a.getTimeRange().endTime;return this.getSegmentByTime(a)};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){if(!this.$4||!this.$4.length||!this.$6)return!1;var b=this.$4[this.$4.length-1],c=b.r;b=this.$13(b,c);return Math.abs(b.getTimeRange().startTime-a.getTimeRange().startTime)+Math.abs(b.getTimeRange().endTime-a.getTimeRange().endTime)<h};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,646),this.$6=b.$6,this.$14(b.$4),this.$15(b.$4),this.$7.emit("segment_updated")};b.getTimeRanges=function(){return this.$10?this.$16(this.$5,this.$10):this.$5};b.blockTimeRange=function(a){this.$10=a};b.$16=function(a,b){return d("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$8,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),{rangeStart:b.startTime,rangeEnd:b.endTime}).map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd==null?Infinity:a.rangeEnd}})};b.addUpdateListener=function(a){return this.$7.addListener("segment_updated",a)};b.$12=function(a){var b=a,c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$8,a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(c===-1){c=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));c!==-1&&(b=this.getTimeRanges()[c].startTime)}return b};b.$14=function(a){var b;(b=this.$4).splice.apply(b,[0,this.$4.length].concat(a));return};b.$15=function(a){a=this.$11(a);a=d("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$5.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}).concat(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}})));this.$5=a.map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd==null?Infinity:a.rangeEnd}})};b.$11=function(a){var b=this;a=d("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$4.map(function(a){var c=b.$13(a,0).getTimeRange().startTime;a=b.$13(a,a.r).getTimeRange().endTime;return{rangeStart:c,rangeEnd:a}}));return a.map(function(a){var b=a.rangeStart;a=a.rangeEnd;a=a==null?Infinity:a;return{startTime:b,endTime:a}})};b.$13=function(a,b){var d=this;b===void 0&&(b=0);var e=a.t,f=a.d,g=a.r;a=a.id;var h=e+f*b,i=this.$8.getBool("use_scf_timebased_segments"),j=a!=null?a-(g-b):null,k=new(c("oz-player/manifests/OzSegmentOptions"))();return{getData:function(){return null},getURI:function(){var a="";d.$1!=null&&j!=null?a=d.$1.replace("$Number$",j.toString()):j!=null&&d.$2.indexOf("$Number$")!==-1&&d.$8.getBool("parse_number_templated_uri")?a=d.$2.replace("$Number$",j.toString()):a=d.$2.replace("$Time$",h.toString());a=new(c("oz-player/shims/OzURI"))(a);i&&a.addQueryData("_nc_scf",1);return a},getTimeRange:function(){return{startTime:h/d.$3,endTime:(h+f)/d.$3}},getByteRange:function(){return null},getSequenceNumber:function(){return null},getOptions:function(){return k}}};b.getSegmentGroups=function(){return this.$4};b.getEndingSegment=function(){if(this.$4.length==0)return null;var a=this.$4[this.$4.length-1],b=a.r;return this.$13(a,b)};b.forceParseIfNotParsed=function(){};b.getMaxGopSec=function(){return null};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzUrlHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a;var b=a.indexOf("://"),c=a.indexOf("/",b+3);c>b&&(a=a.substring(c));return a}function g(a){a=a;var b=a.lastIndexOf("/"),c=a.lastIndexOf("://");b>c+2&&(a=a.substring(0,b+1));return a}function h(a){a=a;a=g(a);return a.endsWith("/")?g(a.substring(0,a.length-1)):a}function i(a,b){a=g(a);b=b;while(b.length)if(b.startsWith("./"))b=b.substring(2);else if(b.startsWith("../"))b=b.substring(3),a=h(a),a.endsWith("/")&&(a=a.substring(0,a.length-1));else if(b.startsWith(".."))b=b.substring(2),a=h(a);else if(b.startsWith("."))b=b.substring(1);else break;b&&b.length&&(a.endsWith("/")||(a+="/"),a+=b);return a}function j(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(!b||!b.length)return"";if(b.length===1)return b[0];var d=b.shift();while(b.length>0)d=i(d,b.shift());return d}function b(a,b){return k(b)?b:j(a,b)}function k(a){var b=/^https?:\/\//i;return b.test(a)}f.stripToPathAndQueryOnly=a;f.joinRelativeUrlPaths=j;f.joinUrlPaths=b}),66);
__d("PredictedSegmentTemplateSegmentsContainer",["oz-player/manifests/OzSegmentOptions","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k){k===void 0&&(k=!1);c=a.call(this,b,c,e,f,null,k)||this;c.$PredictedSegmentTemplateSegmentsContainer$p_9=0;c.$PredictedSegmentTemplateSegmentsContainer$p_11=null;c.$PredictedSegmentTemplateSegmentsContainer$p_10=d;c.$PredictedSegmentTemplateSegmentsContainer$p_8=k;c.$PredictedSegmentTemplateSegmentsContainer$p_12=f;c.$PredictedSegmentTemplateSegmentsContainer$p_7=b;c.$PredictedSegmentTemplateSegmentsContainer$p_5=e;c.$PredictedSegmentTemplateSegmentsContainer$p_1=g;c.$PredictedSegmentTemplateSegmentsContainer$p_3=i;c.$PredictedSegmentTemplateSegmentsContainer$p_2=h;c.$PredictedSegmentTemplateSegmentsContainer$p_4=j;c.$PredictedSegmentTemplateSegmentsContainer$p_6=b.getNumber("live_numerical_error_epsilon");for(d=0;d<c.$PredictedSegmentTemplateSegmentsContainer$p_12.length;d++)c.$PredictedSegmentTemplateSegmentsContainer$p_9=Math.max(c.$PredictedSegmentTemplateSegmentsContainer$p_12[d].d,c.$PredictedSegmentTemplateSegmentsContainer$p_9);return c}var e=b.prototype;e.$PredictedSegmentTemplateSegmentsContainer$p_13=function(){if(this.$PredictedSegmentTemplateSegmentsContainer$p_2!=null&&this.$PredictedSegmentTemplateSegmentsContainer$p_4!=null)return{predictedAverageDuration:this.$PredictedSegmentTemplateSegmentsContainer$p_4,predictedMediaStartNumber:this.$PredictedSegmentTemplateSegmentsContainer$p_2};else return null};e.$PredictedSegmentTemplateSegmentsContainer$p_14=function(a,b,e){var f=this;Number.isNaN(e)&&c("oz-player/shims/ozvariant")(0,54238);var g=this.$PredictedSegmentTemplateSegmentsContainer$p_1.replace("$Number$",e.toString()),h=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getString("cdn_experiment_id",""),i=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getNumber("use_dvl_with_timeout_ms",0),j=new(c("oz-player/manifests/OzSegmentOptions"))();return{getByteRange:function(){return null},getData:function(){return null},getOptions:function(){return j},getSequenceNumber:function(){return e},getTimeRange:function(){return{endTime:b,startTime:a}},getURI:function(){var a=new(c("oz-player/shims/OzURI"))(g);h.length!==0&&a.addQueryData("_nc_expid",h);var b=j.isDVLEnabled();b&&i>0&&f.$PredictedSegmentTemplateSegmentsContainer$p_10!=null&&(a.addQueryData("_nc_dinfo-manifest-url",d("oz-player/utils/OzUrlHelper").stripToPathAndQueryOnly(f.$PredictedSegmentTemplateSegmentsContainer$p_10)),a.addQueryData("_nc_dinfo-timeout",i));return a}}};e.updateWith=function(d){d instanceof b||c("oz-player/shims/ozvariant")(0,646);this.$PredictedSegmentTemplateSegmentsContainer$p_3=d.$PredictedSegmentTemplateSegmentsContainer$p_3;this.$PredictedSegmentTemplateSegmentsContainer$p_1=d.$PredictedSegmentTemplateSegmentsContainer$p_1;a.prototype.updateWith.call(this,d);this.$PredictedSegmentTemplateSegmentsContainer$p_12=d.$PredictedSegmentTemplateSegmentsContainer$p_12;this.$PredictedSegmentTemplateSegmentsContainer$p_8=d.$PredictedSegmentTemplateSegmentsContainer$p_8;for(d=0;d<this.$PredictedSegmentTemplateSegmentsContainer$p_12.length;d++)this.$PredictedSegmentTemplateSegmentsContainer$p_9=Math.max(this.$PredictedSegmentTemplateSegmentsContainer$p_12[d].d,this.$PredictedSegmentTemplateSegmentsContainer$p_9)};e.getSegmentByTime=function(a){return this.canApproximateId()?this.$PredictedSegmentTemplateSegmentsContainer$p_15(a):this.$PredictedSegmentTemplateSegmentsContainer$p_16(a)};e.getPredictedSegmentAfter=function(a){a=a!=null?a.getSequenceNumber():null;return a!=null&&this.canPredict()?this.$PredictedSegmentTemplateSegmentsContainer$p_14(0,0,a+1):null};e.blockTimeRange=function(b){this.$PredictedSegmentTemplateSegmentsContainer$p_11=b,a.prototype.blockTimeRange.call(this,b)};e.getTimeRanges=function(){var b=this.$PredictedSegmentTemplateSegmentsContainer$p_13();if(b){b=[{endTime:(this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,startTime:(this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t-b.predictedAverageDuration-(this.$PredictedSegmentTemplateSegmentsContainer$p_3-this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-Number(this.$PredictedSegmentTemplateSegmentsContainer$p_2))*Number(b.predictedAverageDuration))/this.$PredictedSegmentTemplateSegmentsContainer$p_5}];var c=this.$PredictedSegmentTemplateSegmentsContainer$p_11;return c==null?b:d("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$PredictedSegmentTemplateSegmentsContainer$p_7,b.map(function(a){return{rangeEnd:a.endTime,rangeStart:a.startTime}}),{rangeEnd:c.endTime,rangeStart:c.startTime}).map(function(a){return{endTime:a.rangeEnd==null?Infinity:a.rangeEnd,startTime:a.rangeStart}})}else return a.prototype.getTimeRanges.call(this)};e.canPredict=function(){return!0};e.canApproximateId=function(){var a=this.$PredictedSegmentTemplateSegmentsContainer$p_13();return a!=null};e.$PredictedSegmentTemplateSegmentsContainer$p_16=function(a){var b=null;a=a*this.$PredictedSegmentTemplateSegmentsContainer$p_5;var e=this.$PredictedSegmentTemplateSegmentsContainer$p_12.length>0?this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d:null,f=this.$PredictedSegmentTemplateSegmentsContainer$p_7.getLegacyConfig().getNumber("pdash_future_edgelatency_gops",0);if(e!=null&&e<=a&&f!==0&&a<e+this.$PredictedSegmentTemplateSegmentsContainer$p_9*f){e=a-(this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1].d);e=this.$PredictedSegmentTemplateSegmentsContainer$p_9?0:Math.floor(e/this.$PredictedSegmentTemplateSegmentsContainer$p_9);return this.$PredictedSegmentTemplateSegmentsContainer$p_14(0,0,this.$PredictedSegmentTemplateSegmentsContainer$p_3+1+e)}e=0;for(var g=0;this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1-g>=0;g++){var h=this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1-g];h.r===0||c("oz-player/shims/ozvariant")(0,18769);if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(h.t+h.d*(h.r+1),a,this.$PredictedSegmentTemplateSegmentsContainer$p_6))break;b=h;e=g}if(b===null||f>0&&a<b.t)return null;else return this.$PredictedSegmentTemplateSegmentsContainer$p_14(b.t/this.$PredictedSegmentTemplateSegmentsContainer$p_5,(b.t+b.d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,this.$PredictedSegmentTemplateSegmentsContainer$p_3-e)};e.$PredictedSegmentTemplateSegmentsContainer$p_15=function(a){var b=a*this.$PredictedSegmentTemplateSegmentsContainer$p_5,c=this.getTimeRanges();if(d("oz-player/utils/OzNumericalHelper").greaterThan(c[0].startTime,a))return null;else if(d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t,b))return this.$PredictedSegmentTemplateSegmentsContainer$p_16(a);else{c=Math.ceil((this.$PredictedSegmentTemplateSegmentsContainer$p_12[0].t-b)/Number(this.$PredictedSegmentTemplateSegmentsContainer$p_4));b=Math.max(Number(this.$PredictedSegmentTemplateSegmentsContainer$p_2),this.$PredictedSegmentTemplateSegmentsContainer$p_3-this.$PredictedSegmentTemplateSegmentsContainer$p_12.length+1-c);return this.$PredictedSegmentTemplateSegmentsContainer$p_14(a,a+Number(this.$PredictedSegmentTemplateSegmentsContainer$p_4)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,b)}};e.isEndingSegment=function(b){if(!this.$PredictedSegmentTemplateSegmentsContainer$p_8)return!1;var c=b.getSequenceNumber();return c!=null?c>=this.$PredictedSegmentTemplateSegmentsContainer$p_3:a.prototype.isEndingSegment.call(this,b)};e.getEndingSegment=function(){if(this.$PredictedSegmentTemplateSegmentsContainer$p_12.length===0)return null;var a=this.$PredictedSegmentTemplateSegmentsContainer$p_12[this.$PredictedSegmentTemplateSegmentsContainer$p_12.length-1];return this.$PredictedSegmentTemplateSegmentsContainer$p_14(a.t/this.$PredictedSegmentTemplateSegmentsContainer$p_5,(a.t+a.d)/this.$PredictedSegmentTemplateSegmentsContainer$p_5,this.$PredictedSegmentTemplateSegmentsContainer$p_3)};e.getMaxGopSec=function(){return this.$PredictedSegmentTemplateSegmentsContainer$p_9/this.$PredictedSegmentTemplateSegmentsContainer$p_5};return b}(c("oz-player/manifests/SegmentTemplateSegmentsContainer"));g["default"]=a}),98);
__d("oz-player/parsers/OzDefaultSegmentTimelineParser",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.parseSegments=function(a,b){a=[];b.SegmentTimeline[0].S&&(a=b.SegmentTimeline[0].S.map(function(a){return{t:Number.parseInt(a.$.t,10),d:Number.parseInt(a.$.d,10),r:Number.parseInt(a.$.r||"0",10),id:a.$.id?Number.parseInt(a.$.id,10):void 0}}));return a};var b=a.prototype;b.parseSegmentsContainer=function(b,e,f){return new(c("oz-player/manifests/SegmentTemplateSegmentsContainer"))(b,d("oz-player/utils/OzUrlHelper").joinUrlPaths(e.baseUrl,f.$.media),Number.parseInt(f.$.timescale,10),a.parseSegments(b,f),null,e.isStaticMpd)};return a}();g["default"]=a}),98);
__d("OzPredictedSegmentTimelineParser",["PredictedSegmentTemplateSegmentsContainer","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.parseSegmentsContainer=function(a,b,e){var f;if(e.SegmentTimeline[0].$.FBPredictedMedia){f=d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.SegmentTimeline[0].$.FBPredictedMedia);var g=new(c("oz-player/shims/OzURI"))(f);g.addQueryData("_nc_sc",1);f=g.toString()}var h;e.SegmentTimeline[0].$.FBPredictedMediaStartNumber&&(h=Number.parseInt(e.SegmentTimeline[0].$.FBPredictedMediaStartNumber,0));var i;e.SegmentTimeline[0].$.FBPredictedMediaEndNumber&&(i=Number.parseInt(e.SegmentTimeline[0].$.FBPredictedMediaEndNumber,0));var j;e.SegmentTimeline[0].$.FBAverageDuration&&(j=Number.parseInt(e.SegmentTimeline[0].$.FBAverageDuration,0));g=c("oz-player/parsers/OzDefaultSegmentTimelineParser").parseSegments(a,e);return(b.isTemplatedMpd&&h!=null&&j!=null||!b.isTemplatedMpd)&&f!=null&&i!=null?new(c("PredictedSegmentTemplateSegmentsContainer"))(a,d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.$.media),b.mpdUrl,Number.parseInt(e.$.timescale,10),g,f,h,i,j,b.isStaticMpd):new(c("oz-player/manifests/SegmentTemplateSegmentsContainer"))(a,d("oz-player/utils/OzUrlHelper").joinUrlPaths(b.baseUrl,e.$.media),Number.parseInt(e.$.timescale,10),g,f,b.isStaticMpd)};return a}();g["default"]=a}),98);
__d("VideoPlayerOzWWWConfig",[],(function(a,b,c,d,e,f){"use strict";var g="oz_www_";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getBool=function(a,b){return this.$1.getBool(g+a,b)};b.getNumber=function(a,b){return this.$1.getNumber(g+a,b)};b.getString=function(a,b){return this.$1.getString(g+a,b)};b.setContext=function(a,b){this.$1.setContext(a,b)};b.getAllContexts=function(){return this.$1.getAllContexts()};return a}();f["default"]=a}),66);
__d("OzSystemicRiskABRManager",["OzSystemicRiskABRUtils","OzSystemicRiskUtils","VideoPlayerOzWWWConfig","oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i){this.$1=a,this.$2=c,this.$3=d,this.$4=e,this.$6=f,this.$7=g,this.$8=h,this.$9={bestRepresentation:b,hasMadeInitialDecision:!1,lastEvaluationReason:void 0},this.$10=i,this.$1.getBool("enable_abr_logging")&&this.$10.getOperationLogger("abr_initialized").setResult("success").setUserInfo({codecs:c.map(function(a){return a.getCodecs()}).join("|"),displayLabels:c.map(function(a){return a.getDisplayLabel()}).join(","),representationIds:c.map(function(a){return a.getID()}).join(",")}).setRepresentationID(b.getID()).setType("video").setInitiator("OzSystemicRiskABRManager").log()}var b=a.prototype;b.setSourceBuffer=function(a){this.$5=a};b.updateRepresentations=function(a){var b=this,c=this.$2;this.$2=a;var d=this.$9.bestRepresentation,e=this.$2.find(function(a){return a.getDisplayLabel()===b.$9.bestRepresentation.getDisplayLabel()});this.$9=babelHelpers["extends"]({},this.$9,{bestRepresentation:(e=e)!=null?e:this.$2[0]});this.$1.getBool("enable_abr_logging")&&this.$10.getOperationLogger("abr_representations_updated").setResult("success").setRepresentationID(this.$9.bestRepresentation.getID()).setPreviousRepresentationID(d.getID()).setUserInfo({newCodecs:a.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:a.map(function(a){return a.getDisplayLabel()}).join(","),previousRepresentationIds:c.map(function(a){return a.getID()}).join(",")}).setType("video").setInitiator("OzSystemicRiskABRManager").log()};b.getBestRepresentation=function(a){var b=this.$1.getLegacyConfig(),e="mos";if(b instanceof c("VideoPlayerOzWWWConfig")){var f=b.getAllContexts();f=String(f.quality_score_type);e=f==="csvqm"?"csvqm":"mos"}f=(f=(f=this.$5)==null?void 0:f.getSourceBufferState().getBufferedRanges())!=null?f:null;var g=this.$4.getCurrentTime(),h=this.$4.getDuration(),i=this.$9.bestRepresentation,j=b.getBool("use_bandwidth_estimate_from_headers_in_abr",!1)?c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnosticsFromHeaders(b):c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(b);this.$9=d("OzSystemicRiskABRUtils").evaluateSystemicRiskABR({abrState:this.$9,bandwidthDiagnostics:j,devicePixelRatio:this.$6,durationMode:this.$8,isDocumentHidden:document.hidden,mediaDurationSec:h,playerDimensions:this.$7(),playheadMediaTimeSec:g,qualityScoreType:e,segments:a,sourceBufferBufferedRangesSec:f,systemicRiskConfig:d("OzSystemicRiskUtils").getSystemicRiskConfigFromOzPlayerConfig(b),videoRepresentationRestrictions:this.$3,videoRepresentations:this.$2});this.$1.getBool("enable_abr_logging")&&this.$9.bestRepresentation!==i&&this.$10.getOperationLogger("abr_best_representation_selected").setResult("success").setReason(this.$9.lastEvaluationReason).setRepresentationID(this.$9.bestRepresentation.getID()).setPreviousRepresentationID(i==null?void 0:i.getID()).setUserInfo({bandwidthEstimate:String(j==null?void 0:j.bandwidthEstimate),qualityScoreType:e}).setType("video").setInitiator("OzSystemicRiskABRManager").log();return this.$9.bestRepresentation};b.getLastEvaluationReason=function(){return this.$9.lastEvaluationReason};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzStreamsWWW",["cr:927622","cr:927623"],(function(a,b,c,d,e,f,g){"use strict";c=Boolean(b("cr:927622"));d=Boolean(b("cr:927623"));e=b("cr:927622")?b("cr:927622").ReadableStream:a.ReadableStream;f=b("cr:927623")?b("cr:927623").WritableStream:a.WritableStream;g.OzReadableStream=e;g.OzReadableStreamIsPolyfilled=c;g.OzWritableStream=f;g.OzWritableStreamIsPolyfilled=d}),98);
__d("oz-player/shims/OzStreams",["oz-player/shims/www/OzStreamsWWW"],(function(a,b,c,d,e,f,g){"use strict";g.OzReadableStream=(a=d("oz-player/shims/www/OzStreamsWWW")).OzReadableStream;g.OzReadableStreamIsPolyfilled=a.OzReadableStreamIsPolyfilled;g.OzWritableStream=a.OzWritableStream;g.OzWritableStreamIsPolyfilled=a.OzWritableStreamIsPolyfilled}),98);
__d("oz-player/networks/OzTransformStream",["oz-player/shims/OzEventEmitter","oz-player/shims/OzStreams","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;var e=(b=b==null?void 0:b.errorTransform)!=null?b:function(a){return a},f,g;c.writable=new(d("oz-player/shims/OzStreams").OzWritableStream)({start:function(a){g=a},write:function(a){c.emit("writableWrite",a);try{c.onDataWritten(a)}catch(a){f.error(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Error from write handler: "+c.constructor.name,extra:{code:"OZ_S-0",originalError:a}}))}f.enqueue(a)},close:function(){c.emit("writableClose");try{c.onClose()}catch(a){f.error(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Error from close handler: "+c.constructor.name,extra:{code:"OZ_S-1",originalError:a}}))}f.close()},abort:function(a){a=e(a);f.error(a)}});c.readable=new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(a){f=a},cancel:function(a){c.emit("readableCancel",a),g.error(a)}});return c}var c=b.prototype;c.onDataWritten=function(a){};c.onClose=function(){};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzPerformanceWWW",["performance","performanceNow"],(function(a,b,c,d,e,f,g){var h,i;a={now:function(){return(h||(h=c("performanceNow")))()},getEntriesByName:function(a,b){return typeof (i||(i=c("performance"))).getEntriesByName==="function"?(i||(i=c("performance"))).getEntriesByName(a,b):[]}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzPerformance",["oz-player/shims/www/OzPerformanceWWW"],(function(a,b,c,d,e,f,g){g["default"]=c("oz-player/shims/www/OzPerformanceWWW")}),98);
__d("oz-player/utils/OzResourceTimingUtils",["oz-player/shims/OzPerformance"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=c("oz-player/shims/OzPerformance").getEntriesByName(a,"resource");return a.reduce(function(a,b){return a==null?b:b.responseEnd<a.responseEnd?a:b},null)};g.getLatestResourceTimingEntry=a}),98);
__d("OzVideoLiveTraceNetworkRequestStreamHandler",["oz-player/networks/OzTransformStream","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=!1),this.$2=!1,this.$1=a,this.$2=b}var b=a.prototype;b.onResponse=function(a,b){var e=this,f=a.headers,g=null;if(!this.$1)return null;a=new(c("oz-player/networks/OzTransformStream"))();a.addListener("writableClose",function(){var a={},c=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);c&&(a.lat=Math.round(c.responseStart-c.requestStart).toString());e.$1&&f&&e.$1(f,g,a)});this.$2&&a.addListener("writableWrite",function(a){g===null?g=[a]:g.push(a)});return a};b.onError=function(a,b){return null};return a}();g["default"]=a}),98);
__d("oz-player/drm/OzDrmUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return Uint8Array.from(window.atob(a),function(a){return a.charCodeAt(0)})};b=function(a){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(a)))};f.base64ToUint8Array=a;f.arrayBufferToBase64=b}),66);
__d("OzWidevineDrmProvider",["ConstUriUtils","FBLogger","oz-player/drm/OzDrmUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f,g){this.$2=[];this.$4=!0;this.$5=!1;g!=null&&g!==""&&(this.$1=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(g));if(b!=null&&f!=null){b=(g=d("ConstUriUtils").getUri(b))==null?void 0:g.addQueryParam("access_token",f);if(b==null)throw c("FBLogger")("comet_video_player").mustfixThrow("Invalid Graph API license uri for video: %s",a);this.$3=b.toString();this.$5=!0;this.$4=!1}else{g=e["0"];if(g==null){g="/video/drm/getlicense";b=(f=d("ConstUriUtils").getUri(g))==null?void 0:f.addQueryParam("video_id",a);if(b==null)throw c("FBLogger")("comet_video_player").mustfixThrow("Invalid server license uri for video: %s",a);this.$3=b.toString()}else this.$3=g}}var b=a.prototype;b.getKeySystem=function(){return"com.widevine.alpha"};b.getSchemeId=function(){return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};b.getInitDatas=function(){return this.$2};b.setInitDatas=function(a){this.$2=a};b.getRequireDistinctiveIdentifier=function(){return"optional"};b.getRequirePersistentState=function(){return"optional"};b.getInitDataTypes=function(){return};b.getDrmSessionTypes=function(){return["temporary"]};b.getAudioRobustness=function(){return""};b.getVideoRobustness=function(){return""};b.getServerCertificate=function(){return this.$1};b.getLicenseRequestInfo=function(a){var b={url:this.$3,method:"POST",body:"",headers:{},credentials:void 0};this.$4&&(b.credentials="include");a=d("oz-player/drm/OzDrmUtils").arrayBufferToBase64(a);if(this.$5){var c={request:a};b.body=JSON.stringify(c);b.headers["Content-Type"]="application/json"}else b.body=a,b.headers["Content-Type"]="application/text";return b};b.parseLicenseResponse=function(a){a=String.fromCharCode.apply(null,a);var b;try{b=JSON.parse(a)}catch(a){b=void 0}var c;if(b!==void 0&&b.data!==void 0&&b.data.length===1){b=b.data[0];b.error!=null||(c=b.license)}else c=a;if(c!=null&&c!=="")try{return d("oz-player/drm/OzDrmUtils").base64ToUint8Array(c)}catch(a){if(a.name==="InvalidCharacterError")throw new Error("Endpoint returned error: "+c);else throw a}return null};return a}();g["default"]=a}),98);
__d("TimeRanges",["invariant"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){this.$1=[],this.$1=a}var b=a.prototype;b.start=function(a){this.$1[a]||h(0,2205);return this.$1[a].startTime};b.end=function(a){this.$1[a]||h(0,2205);return this.$1[a].endTime};b.length=function(){return this.$1.length};return a}();g["default"]=a}),98);
__d("VideoPlayerImplementationLoadSequenceManager",["setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[],this.$2=[]}var b=a.prototype;b.schedule=function(a,b,d){var e=this,f={load:d,maximumBlockTimeMs:a.getNumber("load_sequence_max_delay_ms",0),sequence:b},g=a.getNumber("load_sequence_only_prioritize_first_count",0);g>0?d=!this.$2.find(function(a){return a.sequence<g}):d=!this.$2.find(function(a){return a.sequence<b});d?this.$3(f):(this.$1.push(f),c("setTimeout")(function(){return e.$4(f)},f.maximumBlockTimeMs));return function(){return e.$5(f)}};b.$4=function(a){var b=this.$1.find(function(b){return b===a});b&&(this.$1=this.$1.filter(function(b){return b!==a}),this.$3(b))};b.$3=function(a){var b=this;this.$2.push(a);a.load().then(function(){return b.$6(a)})["catch"](function(c){b.$6(a);throw c});c("setTimeout")(function(){return b.$6(a)},a.maximumBlockTimeMs)};b.$7=function(){var a=this,b=Math.min.apply(Math,this.$1.map(function(a){return a.sequence})),c=this.$1.filter(function(a){return a.sequence===b});c.forEach(function(b){return a.$4(b)})};b.$5=function(a){this.$1=this.$1.filter(function(b){return b!==a})};b.$6=function(a){if(!this.$2.find(function(b){return b===a}))return;this.$2=this.$2.filter(function(b){return b!==a});var b=!!this.$2.find(function(b){return b.sequence===a.sequence});b&&this.$7()};return a}();b=new a();d=b;g["default"]=d}),98);
__d("getAvailableMimeCodecsFromDashManifest",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=/^(audio|video)\/.*$/;return b.test(a)}function a(a){var b=[],c=window.MediaSource;if(a!=null){var d=/mimeType=\"([^\"]*)\"[^\>]*codecs=\"([^\"]*)\"/g,e=/codecs=\"([^\"]*)\"[^\>]*mimeType=\"([^\"]*)\"/g,f,h=[];while(f=d.exec(a))h.push([f[1],f[2]]);while(f=e.exec(a))h.push([f[2],f[1]]);for(d=0;d<h.length;d++){f=h[d];a=f[0];e=f[1];f=a+'; codecs="'+e+'"';var i=a.startsWith("audio")?"audio":a.startsWith("video")?"video":"other",j=!0,k=!1;g(f)&&(k=!0,j=c?c.isTypeSupported(f):!1);b.push({codecs:e,isRequiredForPlayback:k,isTypeSupported:j,mimeCodec:f,mimeType:a,representationType:i})}}return b}f["default"]=a}),66);
__d("VideoPlayerOzImplementationData",["err","getAvailableMimeCodecsFromDashManifest"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.canUseOz,d=a.dashManifestUrl,e=a.dashManifestUrlOverride_DO_NOT_USE,f=a.dashManifestXmlString,g=a.experimentationConfig,h=a.initialAudioUserPreferredLanguage;a=a.minQualityPreference;if(b!==!0){var i=c("err")("canUseOz="+String(b));i.name="GotCanUseOz/"+String(b);return i}b=e!=null?null:f==null||f===""?null:f;i=e!=null?e:d==null||d===""?null:d;if(b==null&&i==null){f=c("err")("Got no manifest XML and no URL to it");f.name="GotNoManifestOrURL";return f}if(!window.MediaSource){e=c("err")("window.MediaSource is missing");e.name="GotMissingMediaSourceAPI";return e}if(b!=null){d=c("getAvailableMimeCodecsFromDashManifest")(b).filter(function(a){return a.isRequiredForPlayback});f=d.filter(function(a){return!a.isTypeSupported});if(f.length>0){e=c("err")("%s out of %s codecs in DASH manifest required for playback are unsupported: %s",String(f.length),String(d.length),d.map(function(a){return a.mimeType+"/"+a.codecs+"="+(a.isTypeSupported?"yes":"no")}).join(", "));e.name="GotManifestWithUnsupportedCodecs";return e}}return{experimentationConfig:g,initialAudioUserPreferredLanguage:(f=h)!=null?f:null,initialVideoVariant:{lang:(d=h)!=null?d:null,role:null},manifest:b,manifestUrl:i,minQualityPreference:(e=a)!=null?e:null}}g.makeOzImplementationData=a}),98);
__d("handleVideoPlayerLatencyLevelChange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){if(a&&b&&c){var e=a.getAllContexts().latency_level;c=[];try{c=JSON.parse(a.getString("seek_on_latency_level_change_allowed","[]"))}catch(a){}c=c.some(function(a){return a.length===2&&a[0]===e&&a[1]===d});a.setContext("latency_level",d);if(!c)return;c=b.getDuration();c=c!=null?c+a.getNumber("live_initial_playback_position",0):null;c!=null&&b.setPlayheadPosition(c)}}f["default"]=a}),66);
__d("VideoPlayerOzImplementationEngineExtrasAPI",["VideoPlayerOzWWWGlobalConfig","emptyFunction","gkx","handleVideoPlayerLatencyLevelChange","oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";b=c("emptyFunction");function h(a){return(a=a.getSelectedVideoQuality())!=null?a:""}function i(a){a=a.getCurrentPlayingAudioTrackID();return a==null?null:a}function j(a){a=a.getCurrentVideoRepresentation();return a==null?"":a.getDisplayLabel()}function k(a){a=a.getIsVideoQualityAdaptationEnabled()?"auto":(a=a.getSelectedVideoQuality())!=null?a:"auto";return a}function l(a){return a.getTargetAudioTrack()}function m(a){return(a=(a=a.getMpd())==null?void 0:a.getCustomField("fbProjection"))!=null?a:null}function n(a,b){var c=k(a);if(b==="notselected"||b===c)return!1;else if(b==="auto"){a.enableVideoQualityAdaptation();return!0}else if(b!==a.getSelectedVideoQuality()){c=b;a.switchToVideoQuality(c);return!0}else return!1}function o(a,b){b=b;a.switchToVideoVariant(b)}function a(a){var b=a.getConfig,d=a.getOzPlayer,e=a.getVideoElementAPI;a={getApproximateFBLSToPlayerDisplayLatency:function(){var a;return(a=(a=d())==null?void 0:a.getApproximateFBLSToPlayerDisplayLatency())!=null?a:null},getAvailableAudioTracks:function(){var a;a=(a=d())==null?void 0:a.getAudioTracks();if(!a)return[];a=a.map(function(a){return{displayLabel:a.displayLabel,id:a.id,lang:a.lang,mimeCodecs:a.mimeCodecs,role:a.role,variantKey:a.variantKey}});return a},getAvailableVideoQualities:function(){var a;return(a=(a=d())==null?void 0:a.getVideoQualities())!=null?a:[]},getAvailableVideoTracks:function(){var a;a=(a=d())==null?void 0:a.getVideoTracks();if(!a)return[];a=a.map(function(a){return{codec:a.codec,codecFamily:a.codecFamily,displayLabel:a.displayLabel,height:a.height,id:a.id,lang:a.lang,mimeCodecs:a.mimeCodecs,qualityLabel:a.qualityLabel,role:a.role,variantKey:a.variantKey,width:a.width}});return a},getCurrentAudioRepresentation:function(){var a;return(a=(a=d())==null?void 0:a.getCurrentAudioRepresentation())!=null?a:null},getCurrentPlayingAudioRepresentationID:function(){var a=d();return a?i(a):null},getCurrentPlayingAudioTrackID:function(){var a=d();return a?i(a):null},getCurrentPlayingVideoQuality:function(){var a=d();return a?j(a):""},getCurrentPlayingVideoRepresentationID:function(){var a;return(a=(a=d())==null?void 0:(a=a.getCurrentVideoRepresentation())==null?void 0:a.getID())!=null?a:null},getCurrentTargetVideoQuality:function(){var a=d();return a?h(a):""},getCurrentVideoRepresentation:function(){var a;return(a=(a=d())==null?void 0:a.getCurrentVideoRepresentation())!=null?a:null},getEstimatedBandwidth:function(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))},getInbandCaptionsAutogeneratedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))},getInbandCaptionsExpectedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))||Boolean(a==null?void 0:a.getCustomField("hasInbandCaptionsFromAccessibility"))},getManifestIdentifier:function(){var a;a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getCustomField("fbManifestIdentifier");return a!=null?String(a):null},getMpdValidationErrors:function(){var a;a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getCustomField("validationErrors");return a!=null?String(a):null},getPerfLoggerProvider:function(){var a=d();return a?a.getPerfLoggerProvider():null},getRepresentationCaptionsExpectedFromManifest:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("hasVTTRepresentationCaptions"))},getStreamType:function(){return"dash"},getTargetAudioTrack:function(){var a=d();return a?l(a):null},getUserSelectedVideoQuality:function(){var a=d();return a?k(a):""},getUserSelectedVideoVariant:function(){var a=d();return(a=a==null?void 0:a.getTargetVideoVariant())!=null?a:null},getVideoProjectionType:function(){var a=d();return a!=null?m(a):null},getVideoRepresentations:function(){var a;return(a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getVideoRepresentations())!=null?a:null},isDrm:function(){var a;return Boolean((a=d())==null?void 0:a.isDrm())},isFBIsLiveTemplated:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isLiveTemplated"))},isFBMS:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isFBMS"))},isFBWasLive:function(){var a;a=(a=d())==null?void 0:a.getMpd();return Boolean(a==null?void 0:a.getCustomField("isFBWasLive"))},isLiveRewindAvailable:function(){var a;a=(a=(a=d())==null?void 0:a.getMpdUrl())!=null?a:"";try{return(a=(a=new URL(a).searchParams.get("ms"))==null?void 0:a.includes("m_CT"))!=null?a:!1}catch(a){}return!1},isMixedCodecManifest:function(){var a,b;a=(a=d())==null?void 0:a.getMpd();if(a==null)return null;a=(a=a.getVideoRepresentations())!=null?a:[];a=new Set(a.map(function(a){return/codecs=\"([^\".]+)/i.exec(a.getMimeCodecs())}));b=(b=(b=d())==null?void 0:(b=b.getMpd())==null?void 0:b.getAudioRepresentations())!=null?b:[];b=new Set(b.map(function(a){return/codecs=\"([^\".]+)/i.exec(a.getMimeCodecs())}));return a.size>1||b.size>1},isPredictiveDash:function(){var a;a=(a=(a=d())==null?void 0:(a=a.getMpd())==null?void 0:a.getVideoRepresentations()[0])!=null?a:null;return a!==null&&a.canPredict()},setDimensions:function(a){},setEnableLiveheadCatchup:function(a){var b=d();b!=null&&b.setEnableLiveheadCatchup(a)},setLatencyLevel:function(a){c("handleVideoPlayerLatencyLevelChange")(b(),e(),d(),a)},setUserSelectedVideoQuality:function(a){var b=d();b!=null&&n(b,a)},setUserSelectedVideoVariant:function(a){var b=d();b!=null&&a!=null&&o(b,a)}};return a}g.createVideoPlayerOzImplementationEngineExtrasAPI=a}),98);
__d("oz-player/shims/www/OzDOMEventListenerWWW",["OzDOMEventListenerImpl"],(function(a,b,c,d,e,f){"use strict";a=b("OzDOMEventListenerImpl");f["default"]=a}),66);
__d("oz-player/shims/OzDOMEventListener",["oz-player/shims/www/OzDOMEventListenerWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDOMEventListenerWWW")}),98);
__d("oz-player/shims/www/OzSubscriptionsHandlerWWW",["SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("SubscriptionsHandler")}),98);
__d("oz-player/shims/OzSubscriptionsHandler",["oz-player/shims/www/OzSubscriptionsHandlerWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzSubscriptionsHandlerWWW")}),98);
__d("oz-player/shims/www/ozThrottleWWW",["throttle"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("throttle")}),98);
__d("oz-player/shims/ozThrottle",["oz-player/shims/www/ozThrottleWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozThrottleWWW")}),98);
__d("oz-player/strategies/OzBufferingDetectorStates",["oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.handleEvent=function(a,b,c){if(a.type==="pause"||b.paused)return new i(this.$1,this.$2);a=this.$3 instanceof j?this.$1.getInPlayBufferOverflowTarget():this.$1.getStartBufferUnderflowTarget();return d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,a,c)?new j(this.$1,this.$2):this};return a}(),i=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.handleEvent=function(a,b,c){return a.type==="play"||a.type==="playing"||!b.paused?d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,this.$1.getStartBufferUnderflowTarget(),c)?new j(this.$1,this.$2):new h(this.$1,this.$2,this):this};return a}(),j=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=b.getString("stream_types_eligible_for_partial_playback","").split(",")}var b=a.prototype;b.handleEvent=function(a,b,c,e){e===void 0&&(e=new Map());if(a.type==="pause"||b.paused)return new i(this.$1,this.$2);return!d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,this.$1.getInPlayBufferUnderflowTarget(),c)&&!this.$4(a,b.currentTime,e)?new h(this.$1,this.$2,this):this};b.$4=function(a,b,c){return a.type==="waiting"?!1:d("oz-player/utils/OzBufferingUtils").hasEnoughPartialBuffer(b,c,this.$3,this.$2.getNumber("partial_playback_buffer_overflow",0))};return a}();g.OzVideoBufferingState=h;g.OzVideoPausedState=i;g.OzVideoPlayingState=j}),98);
__d("oz-player/strategies/OzBufferingStateThresholdManager",["oz-player/shims/OzPerformance","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=!1,this.$3=-Infinity,this.$4=-Infinity,this.$1=a}var b=a.prototype;b.getInPlayBufferUnderflowTarget=function(){return this.$1.getNumber("in_play_buffer_underflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)};b.getInPlayBufferOverflowTarget=function(){if(this.$5())return this.$1.getNumber("stream_interrupt_in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD);return c("oz-player/shims/OzPerformance").now()-this.$4<this.$1.getNumber("recent_buffer_timeout_ms",0)?this.$1.getNumber("recent_buffer_in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD):this.$1.getNumber("in_play_buffer_overflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD)};b.getStartBufferUnderflowTarget=function(){return this.$1.getNumber("start_buffer_underflow_target",d("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)};b.notifyBufferingEnd=function(){this.$4=c("oz-player/shims/OzPerformance").now()};b.notifyStreamInterrupted=function(){this.$2=!0};b.notifyStreamResumed=function(){this.$2=!1,this.$3=c("oz-player/shims/OzPerformance").now()};b.$5=function(){var a=this.$1.getNumber("stream_interrupt_buffer_target_timeout_ms",0);return a===0?!1:this.$2||c("oz-player/shims/OzPerformance").now()-this.$3<a};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferingDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/strategies/OzBufferingDetectorStates","oz-player/strategies/OzBufferingStateThresholdManager","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=150;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f){var g;g=a.call(this)||this;g.$OzBufferingDetector$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();g.$OzBufferingDetector$p_6=new Map();g.$OzBufferingDetector$p_8=null;g.$OzBufferingDetector$p_9=function(a){g.$OzBufferingDetector$p_11(a)};g.$OzBufferingDetector$p_2=b;g.$OzBufferingDetector$p_4=e;g.$OzBufferingDetector$p_5=f;g.$OzBufferingDetector$p_7=new(c("oz-player/strategies/OzBufferingStateThresholdManager"))(e);g.$OzBufferingDetector$p_2.paused?g.$OzBufferingDetector$p_1=new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPausedState)(g.$OzBufferingDetector$p_7,g.$OzBufferingDetector$p_4):g.$OzBufferingDetector$p_1=d("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(g.$OzBufferingDetector$p_2,g.$OzBufferingDetector$p_7.getInPlayBufferUnderflowTarget(),g.$OzBufferingDetector$p_5())?new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState)(g.$OzBufferingDetector$p_7,g.$OzBufferingDetector$p_4):new(d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState)(g.$OzBufferingDetector$p_7,g.$OzBufferingDetector$p_4,null);g.$OzBufferingDetector$p_3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"pause",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"play",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"progress",c("oz-player/shims/ozThrottle")(g.$OzBufferingDetector$p_9,h)),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"timeupdate",c("oz-player/shims/ozThrottle")(g.$OzBufferingDetector$p_9,h)),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"seeked",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"seeking",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"waiting",g.$OzBufferingDetector$p_9));g.$OzBufferingDetector$p_3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"canplay",g.$OzBufferingDetector$p_9),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector$p_2,"canplaythrough",g.$OzBufferingDetector$p_9));return g}var e=b.prototype;e.$OzBufferingDetector$p_10=function(){var a=this,b="unavailable",c=this.$OzBufferingDetector$p_7.getInPlayBufferUnderflowTarget();this.$OzBufferingDetector$p_6.forEach(function(e,f){var g=a.$OzBufferingDetector$p_2.currentTime;d("oz-player/utils/OzBufferingUtils").hasBuffer(g,c,e)||(b=b==="unavailable"?f:"audio/video")});return b};e.setSourceBufferState=function(a,b){this.$OzBufferingDetector$p_6.set(a,b)};e.$OzBufferingDetector$p_11=function(a){var b=this.$OzBufferingDetector$p_1.handleEvent(a,this.$OzBufferingDetector$p_2,this.$OzBufferingDetector$p_5(),this.$OzBufferingDetector$p_6),c=this.$OzBufferingDetector$p_1;this.$OzBufferingDetector$p_1=b;var e=b instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState,f=c instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState;if(b===c){e&&this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("buffering_handle_event").setInitiator(a.type).log();return b}if(e){e=c instanceof d("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState?"in_play":"start/unpause";this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("enter_buffering").setState("buffering").setType(e).setReason(this.$OzBufferingDetector$p_10()).setInitiator(a.type).log();this.emit("enterBuffering",e)}else f&&(this.$OzBufferingDetector$p_8&&this.$OzBufferingDetector$p_8.cloneContext().getOperationLogger("leave_buffering").setInitiator(a.type).log(),this.$OzBufferingDetector$p_7.notifyBufferingEnd(),this.emit("leaveBuffering",{domEventPerfTimestamp:a.timeStamp}));return b};e.notifyStreamInterrupted=function(){this.$OzBufferingDetector$p_7.notifyStreamInterrupted()};e.notifyStreamResumed=function(){this.$OzBufferingDetector$p_7.notifyStreamResumed()};e.attachPerfLoggerProvider=function(a){this.$OzBufferingDetector$p_8=a};e.destroy=function(){this.$OzBufferingDetector$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("VideoPlayerOzImplementationEnginePartsImplUtils",["OzSystemicRiskABRManager","OzWidevineDrmProvider","cr:9984","gkx","justknobx","oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzBufferingDetector"],(function(a,b,c,d,e,f,g){"use strict";var h=/(livestream-)?lookaside\.(facebook|workplace)\.com$/;function a(a){return h.test(a.getDomain())}function d(a,b,d,e,f,g){if(f.current!=null)return;var h=!0,i=function(){if(h)return!1;f.current!==j;return!1},j=new(c("oz-player/strategies/OzBufferingDetector"))(a,d,function(){var a=e.getCurrentState();a=a.controlledState;return a.streamEnded?b.getDuration():Infinity});f.current=j;h=!1;a=function(a){if(i())return;e.dispatch({payload:{bufferingType:a},type:"buffering_begin_requested"});a=d.getNumber("ull_fallback_stall_count",0);if(a>0){var b=g.getLoggerState().stallCountTotal;d.getBool("fix_ull_fallback_stall_count",!1)&&(b=g.getLoggerState().inPlayStallCount200ms);e.getCurrentState().controlledState.latencyLevel==="ultra-low"&&b>a&&e.dispatch({payload:{latencyLevel:"low",ullIneligibilityReason:null},type:"implementation_set_latency_level_requested"})}};var k=function(a){if(i())return;e.dispatch({payload:{domEventPerfTimestamp:a.domEventPerfTimestamp},type:"buffering_end_requested"})};j.addListener("enterBuffering",a);j.addListener("leaveBuffering",k)}function e(a){var b=a.accessToken,d=a.graphQLVideoDRMInfo;a=a.videoFBID;var e=[];if(d&&a!=null){var f=c("justknobx")._("717")?null:d.widevineCert;e.push(new(c("OzWidevineDrmProvider"))(a,d.graphApiVideoLicenseUri,d.videoLicenseUriMap,b,(a=f)!=null?a:null))}return e}function f(a){var b=a.VideoPlayerShakaPerformanceLoggerClass,c=a.accessToken,d=a.disableLogging,e=a.getApproximateFBLSToPlayerDisplayLatency,f=a.getBandwidthEstimate,g=a.getPlayerDimensions,h=a.getPlayerFormat,i=a.playbackIsLiveStreaming,j=a.playerInstanceCount,k=a.playerInstanceKey,l=a.playerSuborigin,m=a.playerVersion,n=a.videoElement,o=a.videoFBID;a=a.videoPlayerShakaPerformanceLoggerBuilder;if(d||!a&&(!b||!b.shouldInitialize()))return[];c={accessToken:c,getApproximateFBLSToPlayerDisplayLatency:e,getBandwidthEstimate:f,getPlayerDimensions:g,getPlayerFormat:h,isLive:i,isServableViaFbms:!1,playerInstanceCount:j,playerOrigin:null,playerSuborigin:l,playerVersion:m,representationId:null,uniqueID:k,video:n,videoID:(d=o)!=null?d:""};return a!=null?[a.build(c)]:b?[new b(c)]:[]}function i(a,b){return b>0?b/1e3*-1:a.getNumber("live_initial_playback_position",0)}function j(a,b,c){return b>0&&c>0?(b+c)/1e3:a.getNumber("livehead_fall_behind_block_threshold",0)}function k(a,b){return b>0?b/2/1e3:a.getNumber("live_time_range_block_margin",0)}function l(a){return function(d,e,f,g,h,i,j,k,l){return!a&&b("cr:9984")!=null?new(b("cr:9984"))(d,e,f,g,h,i,j,k,l):d.getLegacyConfig().getBool("use_systemic_risk_abr",!1)?new(c("OzSystemicRiskABRManager"))(d,e,f,g,h,i,j,k,l):null}}function m(a,b){var d=b.experimentationConfig,e=b.getCurrentVideoRepresentation,f=b.getOzCDNSignedQueryParams,g=b.isClientTriggeredTraceEnabled,h=b.playbackIsLiveStreaming,i=b.playbackSessionId;b=b.shouldRefresh403;var j=a.getQueryData(),k;if(h){k={};if(d.getBool("server_side_abr_send_client_estimates",!1)){var l=c("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(d);l&&(k=babelHelpers["extends"]({},k,{_nc_bwe:String(l.bandwidthEstimate),_nc_bwe_std:String(l.bandwidthStandardDeviation),_nc_ttfb:String(l.timeToFirstByteMsEstimate),_nc_ttfb_std:String(l.timeToFirstByteMsStandardDeviation)}));l=e();l&&(k=babelHelpers["extends"]({},k,{_nc_abr_bitrate:String(l.getBandwidth()),_nc_abr_qlabel:l.getDisplayLabel()}))}}e=d.getNumber("live_video_chunk_duration",0);l=d.getBool("use_bandwidth_estimate_from_headers_in_abr",!1);d=l?c("oz-player/networks/OzBandwidthEstimator").hasRecentBandwidthEstimateFromHeader():!1;h&&e>0&&d&&(k=babelHelpers["extends"]({},k,{chk_dur:e.toString(10)}));c("gkx")("24354")&&(j.uss!=null&&j.odm!=null&&(k=babelHelpers["extends"]({},k,{manual_redirect:"1"})));g&&(k=babelHelpers["extends"]({},k,{_nc_psid:i}));if(b){l=f();if(l!=null){h=a.getDomain()+a.getPath();d=l.get(h);if(d!=null)for(e in d){k=babelHelpers["extends"]({},k,(j={},j[e]=d[e],j))}}}return k}g.checkShouldIncludeCredentials=a;g.createOzBufferingDetector=d;g.createOzDrmProviders=e;g.createOzPerfLoggerProviders=f;g.calculateInitialPlaybackPositionForDynamicMpd=i;g.calculateLiveheadFallBehindBlockThreshold=j;g.calculateLiveheadFallBehindBlockMargin=k;g.getVideoAbrManagerFactory=l;g.getCustomRequestParametersForURI=m}),98);
__d("getOzPlaybackRestrictions",["OzMinimumSmallestDimensionRestriction","OzMosThresholdRestriction","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=[];switch(a){case"HD":d.push(new(c("OzMinimumSmallestDimensionRestriction"))(720));break;case"UHD":c("gkx")("24263")&&d.push(new(c("OzMinimumSmallestDimensionRestriction"))(1080));break;default:break}a=b.getNumber("mos_upper_threshold",0);var e=b.getNumber("mos_lower_threshold",0);(a>0||e>0)&&d.push(new(c("OzMosThresholdRestriction"))(b));return d}g["default"]=a}),98);
__d("oz-player/configs/OzPlayerConfigDefaults",[],(function(a,b,c,d,e,f){a={bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,catchup_use_timeline_range_end_time_as_end:!1,clear_on_seek:!0,debug_live_replay:!1,do_not_end_stream:!1,emit_caption_parse_errors_as_warning:!0,enable_abr_logging:!1,enable_alternative_audio_tracks:!1,enable_lip_sync_abr_select_quality:!1,enable_revoke_object_url_on_destroy:!1,fix_live_rewind_user_selected_playback_speed:!0,ignore_reset_after_seek_if_bufferahead:!1,latencymanager_stalled_edgelatency_sec_on:!1,msm_refactor_wait_for_sourceopen:!1,ms_promise_for_null:!1,normalize_mpd_fetch_errors:!0,parse_number_templated_uri:!0,pdash_use_pdash_segmentlocator:!1,playback_speed_latency_adjustment_disabled:!1,player_emit_mpdparsed_early:!1,playhead_manager_buffered_timerange_update_on_timeupdate:!0,playhead_manager_clamp_initial_playback_position:!1,reset_catchup_timeout_after_play_sec_on_overwrite:!0,retry_video_element_error:!0,sidx_parser_memory_optimization:!0,skip_videobuffer_gaps:!0,skip_videobuffer_gaps_on_buffer_updated:!0,use_live_latency_manager:!1,use_scf_timebased_segments:!1,video_cdn_url_refresh:!1,vtt_caption_representation:!0};b={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:1e5,appends_per_segment:6,auto_seek_playhead_slack:.5,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_header_expire_threshold:0,bandwidth_response_time_handicap:0,bandwidth_ttfb_samples_to_save:5,buffer_ahead_target:22,buffer_target_constraint_append_succeeded_reward:.2,buffer_target_constraint_minimum_sec:2,buffer_target_constraint_quota_exceeded_penalty:.3,byte_count_per_sample:2e5,catchup_timeout_after_buffering_sec:0,catchup_timeout_after_play_sec:0,clear_buffer_around_playhead_boundary_ms:5e3,clear_buffer_on_seek_epsilon_s:0,clear_buffer_on_seek_nudge_s:0,default_bandwidth_estimate:1e6,download_cursor_buffer_ahead_time_max_sec:0,download_cursor_total_buffer_max_sec:0,dvl_initial_segment_ignore_count:1,dvl_update_interval_ms:0,dynamic_mpd_initial_playback_position_offset_modifier:4,initial_manifest_request_retry_count:3,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,latencymanager_stalled_edgelatency_sec:0,live_audio_ibr_bandwidth_percentage:.05,live_numerical_error_epsilon:1e-4,loop_body_handle_error_interval_ms:1,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,manifest_initial_update_delay_ms:0,manifest_update_frequency_ms:0,max_bandwidth_sample_count:30,maximum_bandwidth_sample_bandwidth:1e8,max_start_eme_attempts:3,min_eval_interval:100,minimum_bandwidth_sample_duration:10,minimum_bytes_to_sample_on_close:25e3,min_switch_interval:100,mpd_updater_network_request_timeout_ms:2e4,ms_promise_for_null_ms:0,network_seg_timeout_ms:0,overwrite_livehead_fall_behind_block_threshold:0,overwrite_live_time_range_block_margin:0,partial_playback_buffer_overflow:.75,paused_stream_segments_count:2,pdash_download_cursor_between_catchups_seg:0,pdash_download_cursor_catchup_threshold_gop_multiplier:0,pdash_download_cursor_catchup_threshold_sec:0,pdash_download_cursor_catchup_tolerance_sec:0,per_stream_duration_target:0,pixels_above_viewport_to_observe:0,pixels_below_viewport_to_observe:0,playback_speed_enabled_delay_sec:4,playback_speed_latency_adjustment_rate:0,playback_speed_latency_slowdown_adjustment_rate:0,playback_speed_latency_speedup_adjustment_rate:0,playback_speed_min_buffer_sec:1,playback_speed_min_duration_sec:2,playback_speed_min_sharpness_factor:3,playback_speed_restore_min_duration_sec:1,playhead_manager_buffered_auto_seek_playhead_slack:.5,playhead_manager_buffered_is_near_gap_threshold:1.5,playhead_manager_buffered_numerical_error:.01,playhead_manager_timeupdate_throttle_ms:1e3,pre_start_buffer_ahead_target:16.924449682236,prioritize_by_viewport_static_penalty:0,recent_buffer_in_play_buffer_overflow_target:3,recent_buffer_timeout_ms:1e4,resolution_constraint_factor:2,seconds_to_stream:10,seconds_to_stream_near_bandwidth_boundary:10,seek_ahead_epsilon:.05,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,sidx_segment_retry_attempts:9999,sidx_segment_retry_interval_ms:100,skip_videobuffer_gaps_max_gap_size_sec:0,stale_mpd_buffer_ahead_target:0,start_buffer_underflow_target:.1,steadystate_minbuffer_buckets:0,steadystate_minbuffer_buckets_sec:1,steadystate_minbuffer_sec:0,stream_interrupt_buffer_target_timeout_ms:1e4,stream_interrupt_check_mpd_stale_count_threshold:6,stream_interrupt_in_play_buffer_overflow_target:1,stream_reader_max_buffer_len:0,timeline_offset_threshold:10,time_to_first_byte_estimate_half_life_ms:500,time_to_first_byte_ignore_above_threshold_ms:0};c={bandwidth_estimate_header_key:"",bandwidth_estimate_key:"",block_representation_status_codes_json:"[500, 503]",block_representation_status_codes_temporarily_json:"{}",cdn_experiment_id:"",stream_types_eligible_for_partial_playback:""};e.exports={defaultBools:a,defaultNumbers:b,defaultStrings:c}}),null);
__d("oz-player/configs/OzPlayerConfig",["oz-player/configs/OzPlayerConfigDefaults"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={}),this.$1=a}var b=a.prototype;b.getBool=function(a){return typeof this.$1[a]==="boolean"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultBools[a]};b.getNumber=function(a){return typeof this.$1[a]==="number"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[a]};b.getString=function(a){return typeof this.$1[a]==="string"?this.$1[a]:d("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[a]};b.getLegacyConfig=function(){var a=this;return{getBool:function(b,c){return typeof a.$1[b]==="boolean"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultBools[b])!=null?b:c},getNumber:function(b,c){return typeof a.$1[b]==="number"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[b])!=null?b:c},getString:function(b,c){return typeof a.$1[b]==="string"?a.$1[b]:(b=d("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[b])!=null?b:c}}};return a}();g["default"]=a}),98);
__d("oz-player/configs/OzConfigUtils",["oz-player/configs/OzPlayerConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/configs/OzPlayerConfig"))();a=function(a){return{getBool:function(b){return a.getBool(b,h.getBool(b))},getNumber:function(b){return a.getNumber(b,h.getNumber(b))},getString:function(b){return a.getString(b,h.getString(b))},getLegacyConfig:function(){return a}}};g.provideConfigWithDefaults=a}),98);
__d("oz-player/networks/OzClientClock",["oz-player/shims/OzPerformance","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a!==null){a=parseInt(a,10);if(!isNaN(a))return a}return null}a=function(){function a(){this.$1=null,this.$2=0,this.$2=Date.now()-c("oz-player/shims/OzPerformance").now()}var b=a.prototype;b.updateOffsetFromHeaderResponse=function(a,b){var c=h(b.get("x-fb-dynamic-server-wallclock-ms"));b=h(b.get("x-fb-dynamic-rtt-ms"));a=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(a);if(c!==null&&b!==null&&a!=null&&(a.responseStart>0&&a.duration>10)){a=a.requestStart+this.$2;c=c-a-b/2;this.$1=c}};b.now=function(){var a;return c("oz-player/shims/OzPerformance").now()+this.$2+((a=this.$1)!=null?a:0)};b.getClientClockOffsetMs=function(){return this.$1};return a}();b=new a();g["default"]=b}),98);
__d("oz-player/networks/OzClockSyncNetworkRequestStreamHandler",["oz-player/networks/OzClientClock","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.onResponse=function(a,b){var d=a.headers;if(!d)return null;a=new(c("oz-player/networks/OzTransformStream"))();a.addListener("writableClose",function(){c("oz-player/networks/OzClientClock").updateOffsetFromHeaderResponse(b,d)});return a};b.onError=function(a,b){return null};return a}();g["default"]=a}),98);
__d("VideoPlayerOzImplementationEnginePartsImplFunction",["CometThrottle","ConstUriUtils","Deferred","FBLogger","JSResourceForInteraction","NetworkStatus","OzActiveActiveFailoverNetworkRequestStreamHandler","OzBufferVTTCaptionsVisibleStrategy","OzCDNSignedQueryParams","OzCustomParsers","OzCustomRepresentationParsers","OzOneSemanticHandler","OzOneSemanticHandlerUtils","OzPredictedSegmentTimelineParser","OzVideoLiveTraceNetworkRequestStreamHandler","Promise","QE2Logger","TimeRanges","VideoPlayerConnectionQuality","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerOzImplementationEnginePartsImplUtils","clearTimeout","cr:1836099","cr:1871597","cr:1947728","cr:1993377","getErrorSafe","getOzPlaybackRestrictions","gkx","md5","oz-player/configs/OzConfigUtils","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClockSyncNetworkRequestStreamHandler","setTimeout","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("JSResourceForInteraction")("VideoPlayerEmsg").__setRef("VideoPlayerOzImplementationEnginePartsImplFunction"),j=1e4,k=null,l=null;b("cr:1836099")&&(k=b("cr:1836099").getHiveConfig(),l=b("cr:1836099").HiveOz);function a(a){var e,f=a.OzPlayerClass,g=a.callChain,m=a.destroyOzPlayerPartsRef,n=a.engineDebugAPI,o=a.engineExtrasAPI,p=a.getCaptionsInfo,aa=a.getLatencyLevelManager,q=a.getVideoLiveTrace,r=a.handleCaptionsInfoChange,ba=a.handleFatalImplementationError,s=a.hivePluginRef,t=a.initialProps,u=a.loggerToVPL,v=a.machine,w=a.overrideOzRequestImplementationRef,x=a.ozBufferingDetectorRef,y=a.ozPlayerRef,z=a.p2pSessionLoggerRef,ca=a.playerFormatForDPLRef,A=a.playerVersion,B=a.resolvedVideoInfo,C=a.videoElement,D=a.videoElementAPI,E={current:!1},F={current:null},G={current:null};m.current=function(a){var b=x.current;b&&(x.current=null,b.destroy());b=y.current;if(b){n&&n.handleOzPlayerChanged(null,D);y.current=null;try{b.destroy([].concat(a,["destroyOzPlayerParts"]).join(":"))}catch(a){c("FBLogger")("comet_video_player").catching(a).mustfix("Error in ozPlayer.destroy: %s",String(a))}}b=F.current;b&&(F.current=null,b());G.current&&(G.current=null);Z();s.current&&(s.current=null);z.current&&(z.current=null);w.current&&(w.current=null)};a=B.accessToken;m=B.audioOnly;var H=B.experimentationConfig,I=B.graphQLVideoDRMInfo,J=B.graphQLVideoP2PSettings,K=B.manifestUrl,da=B.manifestXmlStringResolved,ea=B.minQualityPreference,fa=B.ozPrefetchCache,L=B.videoFBID,M=t.loggingConfig.disableLogging===!0?null:B.VideoPlayerShakaPerformanceLoggerClass,N=Boolean(t.loggingMetaData.coreVideoPlayerMetaData.isLiveStreaming),O=Boolean((e=t.isClientTriggeredTraceEnabled)!=null?e:!1),P=function(a){return o.getEstimatedBandwidth()};e=function(){return o.getApproximateFBLSToPlayerDisplayLatency()};var ga=function(){H.setContext("connection_quality",d("VideoPlayerConnectionQuality").evaluate(function(){return P(N)}))},Q=function(){var a=H.getNumber("connection_quality_context_throttle_frequency",0);if(a===0)return null;var b=c("CometThrottle")(ga,a),d=c("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",b);return function(){d.remove(),b.cancel()}};F.current=Q();Q=d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzDrmProviders({accessToken:a,graphQLVideoDRMInfo:I,videoFBID:L});I=function(){return v.getCurrentState().controlledState.captionsVisible};var R=[];H.getBool("use_vtt_captions_visible_buffer_strategy",!0)&&R.push(new(c("OzBufferVTTCaptionsVisibleStrategy"))(I));I=function(){return v.getCurrentState().controlledState.dimensions};var S=function(){var a;return(a=ca.current)!=null?a:"unknown"};a=d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzPerfLoggerProviders({VideoPlayerShakaPerformanceLoggerClass:M,accessToken:a,disableLogging:t.loggingConfig.disableLogging===!0,getApproximateFBLSToPlayerDisplayLatency:e,getBandwidthEstimate:P,getPlayerDimensions:I,getPlayerFormat:S,playbackIsLiveStreaming:N,playerInstanceCount:t.loggingMetaData.playerImplementationInstanceCountRef.current,playerInstanceKey:t.loggingMetaData.instanceKey,playerSuborigin:t.loggingMetaData.coreVideoPlayerMetaData.subOrigin,playerVersion:A,videoElement:C,videoFBID:L,videoPlayerShakaPerformanceLoggerBuilder:B.videoPlayerShakaPerformanceLoggerBuilder});G.current==null&&(G.current=new(c("OzCDNSignedQueryParams"))());if(J&&L!=null){e=J.community_info;S=J.config;A=J.hive_initialization_options;B=z.current=(B=z.current)!=null?B:b("cr:1871597")?new(b("cr:1871597"))(L,e):null;try{if(!s.current){B&&B.logEnableP2P();e=function(a){z.current&&z.current.logHiveError(a)};var T=function(b){var a=y.current;a&&a.injectExternalDebugEvent("P2PTech",b.tech);z.current&&z.current.logSessionActive(b.tech)},U=function(b){var a=y.current;a&&a.injectExternalDebugEvent("P2PStats",b);z.current&&z.current.setCurrentHiveStats(b)},V=function(a){a=a.state;var b=v.getCurrentState();b=b.controlledState;b=b.playbackState;if(s.current&&a==="CLOSED"){Z();a=y.current;a&&b!=="ended"&&(E.current&&K!=null?a.updatePlayerRunTimeConfig({manifestUrl:K}):a.load(K))}};U={HiveJava:{},HiveJS:{maximumTrimming:{dash:void 0,hls:void 0},renderStatsCallback:U},debugLevel:"off",hiveTechOrder:["HiveJS","StatsJS","HiveJava"],onActiveSession:T,onError:e,onSessionStateChange:V,telemetryId:B?B.getSessionID():0};T=H.getNumber("hive_maximum_trimming_seconds",0);T>0&&(U.HiveJS.maximumTrimming={dash:T,hls:T});if(A){e=A.HiveJava;V=A.debugLevel;T=A.hiveTechOrder;U.hiveTechOrder=T.slice();U.HiveJava=e?{minVersion:e.minVersion}:{};U.debugLevel=(A=V)!=null?A:U.debugLevel}if(S.disable_hivejava_for_livevc===!0&&K!=null&&K.startsWith("https://livestream-lookaside")){T=U.hiveTechOrder.indexOf("HiveJava");T>=0&&U.hiveTechOrder.splice(T,1)}if(k)k.SensitiveInfo.restrictedConnectivityInfo=!0;else throw c("unrecoverableViolation")("HiveConfig does not exist","comet_video_player");if(l)s.current=new l(U);else throw c("unrecoverableViolation")("HiveOz does not exist","comet_video_player");if(s.current){if(!b("cr:1947728"))throw c("unrecoverableViolation")("OzConfigurableRequestImplementation does not exist","comet_video_player");w.current=b("cr:1947728")(s.current.getRequestImplementation(),{inferResponseStatusIsOK:!0,inferResponseStatusIsOk2xx:!1})}}}catch(a){B&&B.logError(a),Z()}}e=[new(c("OzVideoLiveTraceNetworkRequestStreamHandler"))(function(a,b,c){var d=q();d!=null&&d.handleHeadersAndBody(a,b,c)},H.getBool("live_trace_parse_emsg",!1)),new(c("oz-player/networks/OzClockSyncNetworkRequestStreamHandler"))()];c("OzActiveActiveFailoverNetworkRequestStreamHandler")&&e.push(new(c("OzActiveActiveFailoverNetworkRequestStreamHandler"))(function(b,c){var a=y.current,e=b.headers;if(a&&e){e=parseInt(e.get("x-fb-video-replica"),10);u.logVPLEvent({eventType:"replica_switch",logDataOverrides:{error_code:b.status.toString(),error_user_info:JSON.stringify({failover_response_code:b.status.toString(),replica:e,url:c})},state:v.getCurrentState()});b=a.getMpdUrl();if(b!=null){c=d("ConstUriUtils").getUri(b);if(c){b=c.addQueryParam("replica",e);b&&(Z(),a.updatePlayerRunTimeConfig({manifestUrl:b.toString(),resetStreamAnchor:!0}))}}}}));var ha=t.expiredVideoUrlRefreshHandler,ia=t.loggingMetaData.instanceKey;V=c("gkx")("24353");A=c("gkx")("24354")||c("gkx")("24355");var ja=N?V:A;S=c("gkx")("4927");H.getBool("log_exposure_on_oz_initialization",!1)&&d("QE2Logger").logExposureForUser("www_videos_html5_mpeg_dash");U={audioOnly:(T=m)!=null?T:!1,bufferEndLimit:t.bufferEndLimit!=null?t.bufferEndLimit:null,bufferingDetector:(U=x.current)!=null?U:void 0,config:d("oz-player/configs/OzConfigUtils").provideConfigWithDefaults(H),configureCustomRequestParametersForSegment:function(a){var b=null;if(N&&O){var d=a.getByteRange();d=d?d.startByte+", "+(d.endByte!=null?d.endByte:"null"):"null";a=c("md5")(a.getURI().toString()+d);b=(d=b)!=null?d:{};a!=null&&(b=babelHelpers["extends"]({},b,{_nc_tsid:a}));b=babelHelpers["extends"]({},b,{_nc_e2e:"live"})}return b},customParsers:d("OzCustomParsers").createOzCustomParser(),customRepresentationParsers:d("OzCustomRepresentationParsers").createOzCustomRepresentationParsers({ozConfig:H}),customSegmentTimelineParser:H.getBool("enable_predictive_dash",!1)?new(c("OzPredictedSegmentTimelineParser"))():void 0,customVTTBufferTargetStrategies:R,debugCreateInitiator:[].concat(g,["proceedWithOzPlayerCreation"]).join(":"),drmProviders:Q,getCustomRequestParametersForURI:function(a){return d("VideoPlayerOzImplementationEnginePartsImplUtils").getCustomRequestParametersForURI(a,{experimentationConfig:H,getCurrentVideoRepresentation:function(){var a=y.current;return a==null?void 0:a.getCurrentVideoRepresentation()},getOzCDNSignedQueryParams:function(){return G.current},isClientTriggeredTraceEnabled:O,playbackIsLiveStreaming:N,playbackSessionId:ia,shouldRefresh403:ja})},getOverrideOzRequestImplementation:function(){return w.current},getShouldIncludeCredentials:H.getBool("use_oz_credentials_provider",!1)?d("VideoPlayerOzImplementationEnginePartsImplUtils").checkShouldIncludeCredentials:null,getUserSelectedPlaybackRate:function(){return v.getCurrentState().controlledState.targetPlaybackRate},getVideoDimensions:I,initialPlaybackPositionForDynamicMpd:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateInitialPlaybackPositionForDynamicMpd(H,(B=t.initialDesiredLatencyMs)!=null?B:0),initialRepresentationIDs:(V=t.initialRepresentationIds)!=null?V:[],isClientTriggeredTraceEnabled:O,liveheadFallBehindBlockMargin:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockMargin(H,(A=t.initialDesiredLatencyMs)!=null?A:0),liveheadFallBehindBlockThreshold:d("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockThreshold(H,(m=t.initialDesiredLatencyMs)!=null?m:0,(T=t.initialLatencyToleranceMs)!=null?T:0),loggerConfig:{isOzDevConsoleEnabled:c("gkx")("24356"),observedOperationLoggers:[],perfLoggerProviders:a},mpdUrl:K,networkRequestStreamHandlers:e,networkRequestStreamRetryHandler:ja?function(a,d,e){var f=a.headers,g=f==null?void 0:f.get("x-fb-url-refresh"),i=G.current;if(a.status===403&&i!=null){u.logVPLEvent({eventType:"video_cdn_url_expired",logDataOverrides:{error_user_info:JSON.stringify({expired_url:e})},state:v.getCurrentState()});var j=g!=null&&b("cr:1993377")!=null?{name:"refreshShortExpiryVideoUrl",promise:b("cr:1993377")(g)}:ha!=null?{name:"expiredVideoUrlRefreshHandler",promise:ha(e)}:null;if(j!=null)return j.promise.then(function(a){var b;b=(b=a.refreshedUrl)!=null?b:null;a=(a=a.reason)!=null?a:null;if(b!=null&&b!==""){u.logVPLEvent({eventType:"video_cdn_url_refreshed",logDataOverrides:{error_user_info:JSON.stringify({refresh_handler:j.name,refreshed_url:b})},state:v.getCurrentState()});i.update(b);return d(b)}else{throw c("unrecoverableViolation")(j.name+" refreshedUrl is "+(b===""?"an empty string":"null")+", reason: "+((b=a)!=null?b:"null"),"comet_video_player")}})["catch"](function(a){a=c("getErrorSafe")(a);u.logVPLEvent({eventType:"video_cdn_url_refresh_error",logDataOverrides:{error_description:a.message,error_user_info:JSON.stringify({expired_url:e,refresh_handler:j.name,refresh_url:g})},state:v.getCurrentState()});throw a})}return(h||(h=b("Promise"))).resolve(a)}:null,networkRequestUrlRefreshHandler:S?t.expiredVideoUrlRefreshHandler:null,prefetchCache:H.getBool("use_prefetch_cache",!1)?fa:null,rawMpdXml:s.current?void 0:da,seekHandler:null,setCustomFetchStreamLoggingAttributes:function(a,b,e){a.setIsOnline(c("NetworkStatus").isOnline());var f=e==null?void 0:e.headers;if(f)try{a.setProxyStatusHeader(f.get("proxy-status")),a.setDynamicStatusHeader(f.get("x-fb-dynamic-status"))}catch(a){}d("OzOneSemanticHandlerUtils").setOneSemanticFetchStreamLoggingAttributes(a,b,e)},startTimeStamp:H.getBool("fix_start_timestamp",!1)?t.startTimestamp:0,userPreferenceLang:t.initialAudioUserPreferredLanguage,videoAbrManagerFactory:d("VideoPlayerOzImplementationEnginePartsImplUtils").getVideoAbrManagerFactory(N),videoNode:C,videoPlaybackRestrictions:c("getOzPlaybackRestrictions")(ea,H)};var W=new f(U);y.current=W;x.current&&x.current.attachPerfLoggerProvider(W.getPerfLoggerProvider());R=t.loggingMetaData.playerImplementationInstanceCountRef;R.current++;W.onError(function(a){M&&M.flushQueuedLogs(),ba(a,"oz_player_error")});c("gkx")("24360")&&W.onWarning(function(a){M&&M.flushQueuedLogs();a=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError(a,"oz_player_warning");v.dispatch({payload:{warningError:a},type:"implementation_warning"})});W.addListener("switchVideoRepresentation",function(){v.dispatch({payload:{},type:"representation_changed"})});var ka=function(a){if(H.getBool("enable_error_recovery_attempt_logging",!1)){a=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError(a,"oz_player_stream_error_retry");v.dispatch({payload:{recoverableError:a},type:"error_recovery_attempt"})}};W.addListener("manifestFetchError",function(a){d("OzOneSemanticHandler").handleManifestFetchErrorEvent(H,a)});W.addListener("manifestFetchErrorRetry",function(a){ka(a)});W.addListener("streamError",function(a){return d("OzOneSemanticHandler").handleStreamErrorEvent(H,a)});W.addListener("streamErrorRetry",function(a){var b;(((b=a.getExtra())==null?void 0:b.mimeType)!=="application"||H.getBool("enable_era_logging_for_application_stream",!0))&&ka(a)});W.addListener("streamInterruptAt",function(){v.dispatch({type:"stream_interrupted"})});W.addListener("streamResumedAt",function(){v.dispatch({type:"stream_resumed"})});W.addListener("streamGoneBeforeStart",function(){Z(),v.dispatch({type:"stream_gone_before_start"})});W.addListener("streamEnd",function(){Z(),v.dispatch({type:"stream_ended"})});W.addListener("videoNodeErrorRetry",function(a){if(H.getBool("enable_error_recovery_attempt_logging",!1)){a=d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationVideoNodeError(a,"oz_player_stream_error_retry");v.dispatch({payload:{recoverableError:a},type:"error_recovery_attempt"})}});W.addListener("enterBuffering",function(a){v.dispatch({payload:{bufferingType:a},type:"buffering_begin_requested"})});W.addListener("leaveBuffering",function(a){v.dispatch({payload:{domEventPerfTimestamp:a.domEventPerfTimestamp},type:"buffering_end_requested"})});n&&n.handleOzPlayerChanged(W,D);var la=function(){var a=p();a={inbandCaptionsAutogeneratedFromManifest:o.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:o.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:a==null?void 0:a.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:o.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:a==null?void 0:a.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:a==null?void 0:a.sideLoadCaptionsUrlFromProps};var b=v.getCurrentState();b=b.controlledState;(a.inbandCaptionsExpectedFromManifest!==b.captionsLoaded||a.inbandCaptionsAutogeneratedFromManifest!==b.inbandCaptionsAutogenerated)&&r(a)},ma=function(a,b){a=a.getCustomField("timescale");a=typeof a==="number"?a:0;v.dispatch({payload:{timescale:a,videoBytes:b},type:"cea608_bytes_received"})},na=function(){var a=o.getVideoRepresentations();if(a!=null&&a.length>0){a=a[0].getTimeRanges();if(a!=null&&a.length>0){var b=a[0].startTime;a=Math.max(a[a.length-1].endTime-H.getNumber("live_rewind_seek_to_live_delta",8),b);v.dispatch({payload:{seekableRanges:new(c("TimeRanges"))([{endTime:a,startTime:b}])},type:"seekable_ranges_changed"})}}},oa=function(){var a=W.getMpd();if(!a)return;a=a.getCustomField("loapStreamType");var b=q();typeof a==="number"&&b!=null&&b.setStreamType(a)},X=function(a){if(a!=null){a=d("ConstUriUtils").getUri(a);if(a){a=a.getQueryParam("lvp");return a==="1"}}return!1},pa=function(a){var b=function(){na(),la(),oa()};a.addListener("updated",b);b();var e=[],f=function(a){u.logVPLEvent({eventType:"imf",logDataOverrides:a,state:v.getCurrentState()})},g=function(a,b,c){a=a.parseEmsgBoxesFromMP4Segment;a=a(c,L,b.getID(),C.currentTime,f);a.length>0&&v.dispatch({payload:{emsgBoxes:a},type:"emsg_boxes_parsed"})},h=function(a){var b=e.shift();while(b)g.apply(void 0,[a].concat(b)),b=e.shift()};W.updatePlayerRunTimeConfig({audioStreamDataHandler:function(){var a=v.getCurrentState();if(a.controlledState.emsgObserverTokens.size>0){var b=i.getModuleIfRequireable();for(var d=arguments.length,f=new Array(d),j=0;j<d;j++)f[j]=arguments[j];b!=null?(h(b),g.apply(void 0,[b].concat(f))):(e.push(f),i.load().then(function(a){h(a)})["catch"](function(a){c("FBLogger")("comet_video_player").catching(c("getErrorSafe")(a)).warn("Failed to load VideoPlayerEmsg"),e.length=0}))}},videoStreamDataHandler:ma});if(o.isPredictiveDash()){H.setContext("streaming_implementation","pdash");a=aa();a&&a.maybeUpdateLatencyLevel()}b="mos";a=H.getBool("is_csvqm_enabled",!1);if(a&&!N){a=o.getVideoRepresentations();a=a==null?void 0:a.every(function(a){return a.getQualityScoreCurveString("csvqm")!=null});a===!0&&(b="csvqm")}H.setContext("quality_score_type",b);d("VideoPlayerODS").bumpEntityKey("comet_video_player",b==="csvqm"?"OzImplementation.quality_score_type_csvqm":"OzImplementation.quality_score_type_mos",14);a=p();r({inbandCaptionsAutogeneratedFromManifest:o.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:o.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:a==null?void 0:a.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:o.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:a==null?void 0:a.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:a==null?void 0:a.sideLoadCaptionsUrlFromProps})};W.addListener("vttCaptionsUpdated",function(a,b){var c="webvtt",d=v.getCurrentState().controlledState.captionFormat;c!==d&&v.dispatch({payload:{captionFormat:c},type:"controller_set_caption_format_requested"});v.dispatch({payload:{activeCaptions:a,captionsLocale:b},type:"controller_set_active_captions_requested"})});W.addListener("mpdParsed",function(a){o.isPredictiveDash()&&H.setContext("streaming_implementation","pdash")});c("gkx")("24359")?(W.addListener("mpdReady",function(a){E.current=!0,pa(a)}),W.addListener("initialized",function(){v.dispatch({payload:{selectedVideoQuality:o.getUserSelectedVideoQuality()},type:"implementation_engine_initialized"})})):W.addListener("mpdReady",function(a){E.current=!0,pa(a),v.dispatch({payload:{selectedVideoQuality:o.getUserSelectedVideoQuality()},type:"implementation_engine_initialized"})});W.addListener("representationBlocked",function(a){v.dispatch({payload:{blockedRepresentationID:a},type:"implementation_engine_representation_blocked"})});var Y=null;function Z(){c("clearTimeout")(Y);var a=s.current,b=z.current;if(a!=null){s.current=null;z.current=null;w.current=null;try{a&&a.closeHiveSession(),b&&b.logEndSession()}catch(a){b&&b.logHiveError(a)}}}g=s.current;Q=J==null?void 0:J.ticket;if(K!=null&&J&&g&&Q!=null){I=W.getPerfLoggerProvider();I&&I.setIsP2pPlayback(!0);B=K.substring(K.indexOf("?"));V=g.initSession(Q+B,W,C);var $=new(c("Deferred"))();j>0&&(Y=c("setTimeout")(function(){$.reject(new Error("Hive initialization timed out after "+j+"ms"))},j));V.then(function(a){$.resolve(a)})["catch"](function(a){$.reject(a)});$.getPromise().then(function(a){c("clearTimeout")(Y);var b=a.manifest;a=a.tech;var d=z.current;b!==K&&d&&d.logManifestMismatch(b,K);d&&d.logSessionInit(a,b);u.setLoggingToVPLAdditionalData("is_p2p_playback",!0);u.setLoggingToVPLAdditionalData("is_live_preview",X(b));W.load(b)})["catch"](function(a){c("clearTimeout")(Y);var b=z.current;b&&b.logError(a);Z();u.setLoggingToVPLAdditionalData("is_live_preview",X(K));W.load(K)})}else u.setLoggingToVPLAdditionalData("is_p2p_playback",!1),u.setLoggingToVPLAdditionalData("is_live_preview",X(K)),W.load(K)}g.proceedWithOzPlayerCreation=a}),98);
__d("VideoPlayerOzImplementationLatencyLevelManager",[],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$2="normal",this.$4=null,this.$1=a,this.$3=b,this.$6=c}var b=a.prototype;b.updatePlayerFormat=function(a){this.$4!==a&&(this.$4=a,this.maybeUpdateLatencyLevel())};b.updateBroadcastLatencySensitivity=function(a){this.$5!==a&&(this.$5=a,this.maybeUpdateLatencyLevel())};b.maybeUpdateLatencyLevel=function(){var a=this.$7(this.$5);a!==this.$2&&(this.$2=a,this.$1.getBool("set_latency_context_immediately",!1)&&this.$1.setContext("latency_level",a),this.$3.dispatch({payload:{latencyLevel:a,ullIneligibilityReason:this.$8()},type:"implementation_set_latency_level_requested"}))};b.$8=function(){var a=this.$1.getNumber("ultra_low_latency_bandwidth_threshold",0),b=this.$6.getEstimatedBandwidth();return b!==null&&a>0&&b<a?"low_bandwidth_estimate":null};b.$7=function(a){if(a==null)return"normal";switch(a){case 1:return"low";case 2:return this.$8()!==null?this.$1.getBool("fall_back_to_low_latency_in_ull",!1)?"low":"normal":"ultra-low";case 0:return"normal"}};return a}();g["default"]=a}),98);
__d("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay",["requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferredForDisplay")("oz-player").__setRef("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay");function a(){return{getModuleIfRequireable:function(){return h.getModuleIfRequireable()||null},load:function(){return h.load()}}}g["default"]=a}),98);
__d("VideoPlayerOzImplementationEngine",["CometDASHPrefetchCacheManager","ErrorMetadata","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerImplementationLoadSequenceManager","VideoPlayerODS","VideoPlayerOzImplementationEngineExtrasAPI","VideoPlayerOzImplementationEnginePartsImplFunction","VideoPlayerOzImplementationEnginePartsImplUtils","VideoPlayerOzImplementationLatencyLevelManager","VideoPlayerOzPlayerModuleLoaderDeferredForDisplay","cr:1473549","emptyFunction","err","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";e=!1;var h=c("emptyFunction");function a(a){var e=a.checkInDOM,f=a.debugLogId,g=a.handleFatalError,i=a.initialProps;a=a.setExposedStateInReact;var j={current:null},k={current:null},l={current:null},m={current:null},n={current:null},o={current:null},p={current:null},q={current:null},r={current:null},s={current:null},t={current:null},u={current:null},v={current:null},w={current:null};function x(){var a;return(a=p.current)!=null?a:null}function y(){var a;return(a=o.current)!=null?a:null}function z(){var a;return(a=(a=k.current)==null?void 0:a.experimentationConfig)!=null?a:null}function A(){var a;return(a=Y.current)!=null?a:null}function B(){var a;return(a=v.current)!=null?a:null}var C;b("cr:1473549")&&(C=new(b("cr:1473549"))());var D="comet_oz",E=function(a,b){return b.manifestXmlStringInitial!==null?a.manifestXmlStringInitial!==b.manifestXmlStringInitial:a.manifestUrl!==b.manifestUrl},F=function(a,b){return a.videoFBID!==b.videoFBID},G=function(a){return a.getBool("use_full_player_if_cached",!1)&&c("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")?c("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")().getModuleIfRequireable():null},H=function(a,b,c){b!=null?k.current=babelHelpers["extends"]({},a,{manifestXmlStringResolved:b}):k.current=a,X.dispatch({type:"implementation_engine_oz_manifest_downloading"}),n.current=G(a.experimentationConfig),L(n.current,[].concat(c,["proceedWithOzManifestDownloading"]))},I=function(a){var b,e,f,g=a.manifestUrl,h=a.manifest,i=null;c("CometDASHPrefetchCacheManager")&&(a.videoFBID!=null&&(i=c("CometDASHPrefetchCacheManager").get(a.videoFBID)));b={VideoPlayerShakaPerformanceLoggerClass:a.VideoPlayerShakaPerformanceLoggerClass,accessToken:a.loggingMetaData.accessToken,audioOnly:a.audioOnly,experimentationConfig:a.experimentationConfig,graphQLVideoDRMInfo:a.graphQLVideoDRMInfo,graphQLVideoP2PSettings:a.graphQLVideoP2PSettings,initialAudioUserPreferredLanguage:a.initialAudioUserPreferredLanguage,manifestUrl:(b=g)!=null?b:null,manifestXmlStringInitial:(b=h)!=null?b:null,minQualityPreference:a.minQualityPreference,ozPrefetchCache:i,videoFBID:a.videoFBID,videoPlayerShakaPerformanceLoggerBuilder:a.videoPlayerShakaPerformanceLoggerBuilder};i=j.current;e=(e=v.current)!=null?e:new(c("VideoPlayerOzImplementationLatencyLevelManager"))(a.experimentationConfig,X,Q);v.current=e;w.current=(f=a.loggingMetaData.coreVideoPlayerMetaData.playerFormat)!=null?f:null;e.updatePlayerFormat((f=a.loggingMetaData.coreVideoPlayerMetaData.playerFormat)!=null?f:null);e.updateBroadcastLatencySensitivity(a.broadcastLatencySensitivity);f=!1;if(i==null)f=!0;else if(i!=null&&!F(b,i)&&E(b,i)){e=14;d("VideoPlayerODS").bumpEntityKey("OzImplementation","manifest_reloaded",e);f=!1}else if(i!=null&&F(b,i)){var k;e=c("err")("videoFBID changed after player initialization: %s",JSON.stringify({subOrigin:a.loggingMetaData.coreVideoPlayerMetaData.subOrigin,toVideoFBID:b.videoFBID}));e.name="VideoPlayerOzImplementationVideoFBIDChanged";k=(k=e.metadata)!=null?k:new(c("ErrorMetadata"))();i.videoFBID!=null&&k.addEntry("COMET_VIDEO","VIDEO_ID",i.videoFBID);e.metadata=k;e.project="comet_video_player";throw e}if(!f)return!1;g=b.manifestUrl;h=b.manifestXmlStringInitial;if(h==null&&g==null){i=c("err")("Empty manifestXmlStringInitial and manifestUrl: %s",JSON.stringify({manifestUrl:g,manifestXmlStringInitial:h,subOrigin:a.loggingMetaData.coreVideoPlayerMetaData.subOrigin}));i.name="VideoPlayerOzImplementationManifestEmpty";e=(k=i.metadata)!=null?k:new(c("ErrorMetadata"))();b.videoFBID!=null&&e.addEntry("COMET_VIDEO","VIDEO_ID",b.videoFBID);i.metadata=e;i.project="comet_video_player";throw i}j.current=b;H(b,h,["handleVideoInfoChangeForOzImplementation","downloadManifestInOz"]);return!0},J=function(a,b){var d=function(c){if(m.current!==a)return;n.current=c;L(c,[].concat(b,["handleOzPlayerModuleLoadSuccess"]))},e=function(b){if(m.current!==a)return;V(b,"oz_player_module_load_failed")};m.current=a;c("promiseDone")(a,d,e)},K=function(a){a=d("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(a);Y.current=a;return a},L=function(a,b){var e=S(),f=k.current;if(e==null||f==null)return;var g=K(e),h=f.experimentationConfig;a?M(a,e,g,f,[].concat(b,["proceedWithResolvedVideoInfo","OzPlayerModuleFromRef"])):c("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")?(h.getBool("instantiate_buffering_detector_before_quick_starter",!1)&&d("VideoPlayerOzImplementationEnginePartsImplUtils").createOzBufferingDetector(e,g,f.experimentationConfig,X,p,W),J(c("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay")().load(),[].concat(b,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderAsync"]))):V(new Error("Neither of OzPlayerModuleLoader is available."),"oz_player_module_loaders_missing")},M=function(a,b,e,f,g){try{var h={OzPlayerClass:a,callChain:[].concat(g,["proceedWithResolvedVideoInfoAndOzPlayerModuleSync"]),destroyOzPlayerPartsRef:u,engineDebugAPI:C,engineExtrasAPI:Q,getCaptionsInfo:R,getLatencyLevelManager:B,getVideoLiveTrace:T,handleCaptionsInfoChange:U,handleFatalImplementationError:V,initialProps:i,loggerToVPL:W,machine:X,ozBufferingDetectorRef:p,playerFormatForDPLRef:w,playerVersion:D,resolvedVideoInfo:f,videoElement:b};a=z();g=i.loadSequence;a&&a.getNumber("load_sequence_max_delay_ms",0)>0&&g!=null?t.current=c("VideoPlayerImplementationLoadSequenceManager").schedule(a,g,function(){d("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},h,{hivePluginRef:q,overrideOzRequestImplementationRef:s,ozPlayerRef:o,p2pSessionLoggerRef:r,videoElementAPI:e}));return e.getCanPlayPromise()}):d("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},h,{hivePluginRef:q,overrideOzRequestImplementationRef:s,ozPlayerRef:o,p2pSessionLoggerRef:r,videoElementAPI:e}));l.current=f}catch(a){V(a,"oz_player_create_exception")}};function N(a){var b=u.current;b!=null&&(u.current=null,b(a));t.current!=null&&(t.current(),t.current=null)}function O(){return}function P(){m.current=null,n.current=null}var Q=d("VideoPlayerOzImplementationEngineExtrasAPI").createVideoPlayerOzImplementationEngineExtrasAPI({getConfig:z,getOzPlayer:y,getVideoElementAPI:A});A=d("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({checkInDOM:e,createDebugAPI:function(b){var a=b.getVideoElementAPI;b=b.loggerToVPL;return C?C.createDebugAPI({engineExtrasAPI:Q,getConfig:function(){var a;return(a=(a=l.current)==null?void 0:a.experimentationConfig)!=null?a:null},getManifest:function(){var a;return(a=(a=l.current)==null?void 0:a.manifestXmlStringResolved)!=null?a:null},getManifestUrl:function(){var a;return(a=(a=l.current)==null?void 0:a.manifestUrl)!=null?a:null},getOzBufferingDetector:x,getOzPlayer:y,getVideoElementAPI:a,loggerToVPL:b}):null},createVideoPlayerError:d("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError,debugLog:h,debugLogId:f,destroyEngineParts:function(a){N([].concat(a,["destroyEngineParts"])),O(),P()},engineExtrasAPI:Q,engineMetadata:{isAbrEnabled:!0,playerVersion:D,streamingFormat:"dash"},handleFatalError:g,handleVideoElementChanged:function(a,b){a!=null&&L(n.current,[].concat(b,["handleVideoElementMounted"]))},handleVideoInfoChange:I,initialProps:i,setExposedStateInReact:a});e=A.engine;var R=A.getCaptionsInfo,S=A.getVideoElement,T=A.getVideoLiveTrace,U=A.handleCaptionsInfoChange,V=A.handleFatalImplementationError,W=A.loggerToVPL,X=A.machine,Y=A.videoElementAPIRef;return e}g.createVideoPlayerOzImplementationEngine=a}),98);
__d("VideoPlayerOzImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerOzImplementationEngine"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(a,d("VideoPlayerOzImplementationEngine").createVideoPlayerOzImplementationEngine);a=a.reactVideoFrameAndComponents;return a}g["default"]=a}),98);
__d("VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9549754371718361"}),null);
__d("VideoPlayerRelayFragmentRefetchQuery.graphql",["VideoPlayerRelay_video$normalization.graphql","VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},c={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},d={defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"},e=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"VideoPlayerRelayFragmentRefetchQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"playerSuborigin",variableName:"playerSuborigin"}],kind:"FragmentSpread",name:"VideoPlayerRelay_video"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"VideoPlayerRelayFragmentRefetchQuery",selections:[{alias:null,args:e,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{args:[{kind:"Variable",name:"VideoPlayerRelay_video$playerOrigin",variableName:"playerOrigin"},{kind:"Variable",name:"VideoPlayerRelay_video$playerSuborigin",variableName:"playerSuborigin"}],fragment:b("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("VideoPlayerRelayFragmentRefetchQuery_facebookRelayOperation"),metadata:{},name:"VideoPlayerRelayFragmentRefetchQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("VideoPlayerRelay_video.graphql",["VideoPlayerRelayFragmentRefetchQuery.graphql"],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},{defaultValue:null,kind:"LocalArgument",name:"playerSuborigin"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["node"],operation:b("VideoPlayerRelayFragmentRefetchQuery.graphql"),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"VideoPlayerRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_podcast_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unsupported_browser_message",storageKey:null},{alias:null,args:null,concreteType:"MusicVideoMetadata",kind:"LinkedField",name:"pmv_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LatencySensitiveConfig",kind:"LinkedField",name:"latency_sensitive_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"broadcast_latency_sensitivity",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LivePlaybackInstrumentationConfigParams",kind:"LinkedField",name:"live_playback_instrumentation_configs",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_client_triggered_trace_enabled",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_ncsr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seo_web_crawler_lookaside_url",storageKey:null},{alias:null,args:[{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSuborigin"}],kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerVideoStatusRelayWithFallbackCover_video"},{args:null,kind:"FragmentSpread",name:"useVideoImplementationsParamsRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaConfig_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerShakaPerformanceLoggerBuilder_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoAutoplayGatingResult_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoDRMInfo_video"},{args:null,kind:"FragmentSpread",name:"useGraphQLVideoP2PSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerCaptionsSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerLiveLatencyKnobSettings_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAudioAvailabilityInfoRelay_video"},{alias:null,args:null,concreteType:"SphericalVideoRenderer",kind:"LinkedField",name:"spherical_video_renderer",plural:!1,selections:[{args:null,documentName:"VideoPlayerRelay_video_spherical_video_renderer",fragmentName:"VideoPlayerSphericalRelay_sphericalVideoRenderer",fragmentPropName:"sphericalVideoRenderer",kind:"ModuleImport"}],storageKey:null},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"InstreamVideoAdBreaksPlayer_video"}]},{args:null,kind:"FragmentSpread",name:"VideoPlayerVideoIsCastingCover_video"},{args:null,kind:"FragmentSpread",name:"useVideoPlayerIMFFromVideoMetadataRelay_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerUnsupportedBrowserMessageFallback.react",["ErrorMetadata","FBLogger","VideoPlayerFallbackCover.react","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useMemo,l=b.useRef;function a(a,b){var d=k(function(){if(a!=null){var d,e=c("err")("Cannot play video: Unsupported browser message from server: %s",a);e.name="VideoPlayerUnsupportedBrowserMessageFromServer";d=(d=e.metadata)!=null?d:new(c("ErrorMetadata"))();e.metadata=d;d.addEntry("COMET_VIDEO","VIDEO_ID",b);return e}return null},[a,b]),e=l(!1);j(function(){if(d!=null&&!e.current){var a;e.current=!0;(a=c("FBLogger")("comet_video_player").catching(d)).warn.apply(a,[(a=d.messageFormat)!=null?a:""].concat((a=d.messageParams)!=null?a:[]))}},[d,b]);return a!=null?i.jsx(c("VideoPlayerFallbackCover.react"),{debugError:d,message:a}):null}a.displayName=a.name+" [from "+f.id+"]";g.useVideoPlayerUnsupportedBrowserMessageFallback=a}),98);
__d("VideoPlayerXImplRelayWrapper.react",["VideoPlayerXImpl.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("VideoPlayerXImpl.react")}),98);
__d("XFBLatencySensitiveTypeUtils.facebook",["$InternalEnumUtils","LatencySensitiveType"],(function(a,b,c,d,e,f,g){a=d("$InternalEnumUtils").createToJSEnum(c("LatencySensitiveType"));b=d("$InternalEnumUtils").createFromJSEnum(c("LatencySensitiveType"));g.toJSEnum=a;g.fromJSEnum=b}),98);
__d("useGraphQLVideoAutoplayGatingResult_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoAutoplayGatingResult_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoAutoplayGatingResult",["CometRelay","GraphQLVideoAutoplayGatingResult","useGraphQLVideoAutoplayGatingResult_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoAutoplayGatingResult_video.graphql"),a);return d("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult(a.autoplay_gating_result,a.viewer_autoplay_setting,a.can_autoplay)}g["default"]=a}),98);
__d("useGraphQLVideoDRMInfo_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoDRMInfo_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoDRMInfo",["CometRelay","GraphQLVideoDRMInfo","react","useGraphQLVideoDRMInfo_video.graphql","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useRef;function l(a){if(a!=null){a=m(a);return d("GraphQLVideoDRMInfo").makeGraphQLVideoDRMInfo(a)}return null}function m(a){a=JSON.parse(a)||{};var b=a.fairplay_cert,c=a.graph_api_video_license_uri,d=a.video_license_uri_map;a=a.widevine_cert;return{fairplay_cert:b,graph_api_video_license_uri:c,video_license_uri_map:d,widevine_cert:a}}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoDRMInfo_video.graphql"),a);var e=k(null),f=l(a.drm_info),g=(i||(i=c("useUnsafeRef_DEPRECATED")))(null);e.current!==a.drm_info&&(e.current=a.drm_info,g.current=f);return g.current}g["default"]=a}),98);
__d("useGraphQLVideoP2PSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGraphQLVideoP2PSettings_video",selections:[{alias:null,args:null,concreteType:"VideoP2PSettings",kind:"LinkedField",name:"p2p_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ticket",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettingsConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delay_p2p_until_play",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"disable_hivejava_for_livevc",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveCommunityInfo",kind:"LinkedField",name:"community_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"community_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"community_name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveInitializationOptions",kind:"LinkedField",name:"hive_initialization_options",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoHiveInitializationOptionHiveJava",kind:"LinkedField",name:"hive_java",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_version",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hive_tech_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug_level",storageKey:null}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useGraphQLVideoP2PSettings",["CometRelay","GraphQLVideoP2PSettings","recoverableViolation","useGraphQLVideoP2PSettings_video.graphql","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=null;if(a){var e,f,g,h,i;e={delay_p2p_until_play:(e=(e=a.config)==null?void 0:e.delay_p2p_until_play)!=null?e:!1,disable_hivejava_for_livevc:(e=(e=a.config)==null?void 0:e.disable_hivejava_for_livevc)!=null?e:!1};var j=a.ticket,k=a.community_info;f=(f=a.hive_initialization_options)==null?void 0:f.debug_level;g=(g=(g=a.hive_initialization_options)==null?void 0:g.hive_tech_order.map(function(a){var b=d("GraphQLVideoP2PSettings").hiveTechOrderOrNull(a);b==null&&a!=null&&c("recoverableViolation")("Invalid hive tech order: '"+a+"'","comet_video_player");return b}).filter(Boolean))!=null?g:[];h=(h=a.hive_initialization_options)==null?void 0:(h=h.hive_java)==null?void 0:h.min_version;i=((i=a.hive_initialization_options)==null?void 0:i.hive_java)?{minVersion:h}:null;h=a.hive_initialization_options?{HiveJava:i,debugLevel:f,hiveTechOrder:g}:null;f={communityId:(a=k==null?void 0:k.community_id)!=null?a:"unknowncustomer",communityName:(i=k==null?void 0:k.community_name)!=null?i:"Unknown Customer"};b={community_info:f,config:e,hive_initialization_options:h,ticket:j}}return b}function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useGraphQLVideoP2PSettings_video.graphql"),a);var e=(i||(i=c("useUnsafeRef_DEPRECATED")))(null),f=i(null);a=j((a=a.p2p_settings)!=null?a:null);var g=JSON.stringify(a);if(e.current!==g){e.current=(e=g)!=null?e:null;f.current=(g=a)!=null?g:null}return f.current}g["default"]=a}),98);
__d("useVideoImplementationsParamsRelayImpl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],b=[{}],c={alias:null,args:null,concreteType:"XFBVideoDeliveryFailureReason",kind:"LinkedField",name:"failure_reason",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_format",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_params",storageKey:null}],storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoImplementationsParamsRelayImpl_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_user_preferred_language",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,concreteType:"SphericalVideoFallbackUrls",kind:"LinkedField",name:"spherical_video_fallback_urls",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sd",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_nextgendash_availability",storageKey:null},{alias:"videoDeliveryLegacyFields",args:[{kind:"Literal",name:"negate",value:!0}],concreteType:"Video",kind:"LinkedField",name:"if_viewer_should_use_video_delivery_response",plural:!1,selections:[{alias:"dash_manifest_xml_string",args:a,kind:"ScalarField",name:"playlist",storageKey:'playlist(scrubbing_preference:"MPEG_DASH")'},{alias:"dash_manifest_url",args:a,kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:"browser_native_sd_url",args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:"browser_native_hd_url",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'}],storageKey:"if_viewer_should_use_video_delivery_response(negate:true)"},{alias:"videoDeliveryResponseFragment",args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_should_use_video_delivery_response",plural:!1,selections:[{kind:"CatchField",field:{alias:"videoDeliveryResponseResult",args:[{kind:"Literal",name:"video_delivery_request",value:{dash_manifest_requests:b,dash_manifest_url_requests:b,hls_playlist_url_requests:b,progressive_url_requests:[{quality:"SD"},{quality:"HD"}]}}],concreteType:"XFBVideoDeliveryResponse",kind:"LinkedField",name:"video_delivery_response",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBDashManifestResponse",kind:"LinkedField",name:"dash_manifests",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"manifest_xml",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"XFBDashManifestUrlResponse",kind:"LinkedField",name:"dash_manifest_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"manifest_url",storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"XFBProgressiveUrlResponse",kind:"LinkedField",name:"progressive_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"progressive_url",storageKey:null},c,{alias:null,args:null,concreteType:"XFBProgressiveUrlMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"quality",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBHlsPlaylistUrlResponse",kind:"LinkedField",name:"hls_playlist_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"hls_playlist_url",storageKey:null},c],storageKey:null}],storageKey:'video_delivery_response(video_delivery_request:{"dash_manifest_requests":[{}],"dash_manifest_url_requests":[{}],"hls_playlist_url_requests":[{}],"progressive_url_requests":[{"quality":"SD"},{"quality":"HD"}]})'},to:"RESULT"}],storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("useVideoImplementationsParamsRelayImpl",["CometRelay","CometVideoPlayerNextgendashAvailability","getJSEnumSafe","react","useVideoImplementationsParamsRelayImpl_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo;function a(a,e){var f=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoImplementationsParamsRelayImpl_video.graphql"),a);return j(function(){var a;return{browserNativeHdUrl:(a=f.videoDeliveryLegacyFields)==null?void 0:a.browser_native_hd_url,browserNativeSdUrl:(a=f.videoDeliveryLegacyFields)==null?void 0:a.browser_native_sd_url,canUseOz:f.can_use_oz,dashManifestUrl:(a=f.videoDeliveryLegacyFields)==null?void 0:a.dash_manifest_url,dashManifestUrlOverride_DO_NOT_USE:e.dashManifestUrlOverride_DO_NOT_USE,dashManifestXmlString:(a=f.videoDeliveryLegacyFields)==null?void 0:a.dash_manifest_xml_string,initialAudioUserPreferredLanguage:f.audio_user_preferred_language,isSpherical:f.is_spherical,minQualityPreference:f.min_quality_preference,minQualityPreferenceOverrideFromProductSurface:e.minQualityPreferenceOverrideFromProductSurface,nextgendashAvailability:(a=c("getJSEnumSafe")(c("CometVideoPlayerNextgendashAvailability"),f.comet_video_player_nextgendash_availability))!=null?a:"UNAVAILABLE_FROM_JS_NO_INFO_FROM_SERVER",preferBrowserNativeImplementation:e.preferBrowserNativeImplementation,sphericalVideoFallbackHdUrl:(a=f.spherical_video_fallback_urls)==null?void 0:a.hd,sphericalVideoFallbackSdUrl:(a=f.spherical_video_fallback_urls)==null?void 0:a.sd,videoDeliveryResponseResult:(a=f.videoDeliveryResponseFragment)==null?void 0:a.videoDeliveryResponseResult,videoFBID:f.id,videoPlayerShakaConfig:e.videoPlayerShakaConfig}},[f.can_use_oz,f.audio_user_preferred_language,f.is_spherical,f.min_quality_preference,f.comet_video_player_nextgendash_availability,(a=f.spherical_video_fallback_urls)==null?void 0:a.hd,(a=f.spherical_video_fallback_urls)==null?void 0:a.sd,f.id,(a=f.videoDeliveryLegacyFields)==null?void 0:a.dash_manifest_xml_string,(a=f.videoDeliveryLegacyFields)==null?void 0:a.dash_manifest_url,(a=f.videoDeliveryLegacyFields)==null?void 0:a.browser_native_hd_url,(a=f.videoDeliveryLegacyFields)==null?void 0:a.browser_native_sd_url,f.videoDeliveryResponseFragment,e.dashManifestUrlOverride_DO_NOT_USE,e.minQualityPreferenceOverrideFromProductSurface,e.preferBrowserNativeImplementation,e.videoPlayerShakaConfig])}g["default"]=a}),98);
__d("VideoPlayerShakaConfigContextProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.setContext=function(a,b){if(this.$1[a]!==b){var c;this.$1=babelHelpers["extends"]({},this.$1,(c={},c[a]=b,c))}};b.setAllContexts=function(a){this.$1=a};b.getAllContexts=function(){return this.$1};return a}();f["default"]=a}),66);
__d("VideoPlayerShakaConfig",["VideoPlayerContextSensitiveConfigResolver","VideoPlayerShakaConfigContextProvider"],(function(a,b,c,d,e,f,g){var h={};a=function(){function a(a,b,d){this.$1=new(c("VideoPlayerShakaConfigContextProvider"))(),this.$2=b||null,this.$3=new(c("VideoPlayerContextSensitiveConfigResolver"))(d),this.$3.setContexts(a||{}),a&&this.$1.setAllContexts(a)}a.setGlobalOverrideConfig=function(a){h=a};var b=a.prototype;b.setContext=function(a,b){var c=this.$1.getAllContexts();this.$1.setContext(a,b);a=this.$1.getAllContexts();c!==a&&this.$3.setContexts(a)};b.setOverrideConfig=function(a){this.$2=a};b.getBool=function(a,b){a=this.$4(a,b);return typeof a==="boolean"?a:b};b.getNumber=function(a,b){a=this.$4(a,b);return typeof a==="number"?a:b};b.getString=function(a,b){a=this.$4(a,b);return typeof a==="string"?a:b};b.getAllContexts=function(){return this.$1.getAllContexts()};b.$4=function(a,b){if(!!h&&typeof h[a]===typeof b)return h[a];if(typeof this.$3.getValue(a)===typeof b)return this.$3.getValue(a);return!!this.$2&&typeof this.$2[a]===typeof b?this.$2[a]:null};return a}();g["default"]=a}),98);
__d("prepareVideoPlayerImplementations",["ErrorMetadata","VideoPlayerOzImplementationData","VideoPlayerOzImplementationV2.react","VideoPlayerOzWWWConfig","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerShakaConfig","cr:8921","cr:8922","emptyFunction","err","getErrorSafe","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=(e=b("cr:8922"))==null?void 0:e.makeNextgendashEngineData;function a(a){var e=a.browserNativeHdUrl,f=a.browserNativeSdUrl,g=a.canUseOz,j=a.dashManifestUrl,k=a.dashManifestUrlOverride_DO_NOT_USE,l=a.dashManifestXmlString,m=a.initialAudioUserPreferredLanguage,n=a.isBroadcast,o=a.isLiveStreaming,p=a.isSpherical,q=a.minQualityPreference,r=a.minQualityPreferenceOverrideFromProductSurface,s=a.nextgendashAvailability,t=a.preferBrowserNativeImplementation,u=a.sphericalVideoFallbackHdUrl,v=a.sphericalVideoFallbackSdUrl,w=a.videoDeliveryResponseResult,x=a.videoFBID;a=a.videoPlayerShakaConfig;var y=[],z=[],A=null,B=null,C=null,D=null,E=[],F=[],G=[],H=[],I=[];if(w!=null)if(w.ok!==!0){var J=c("err")("VideoDeliveryResponse API failed: %s",JSON.stringify(w.errors.map(function(a){try{JSON.stringify(a);return a}catch(b){return String(a)}})));J.name="VideoDeliveryResponseAPIFailed";E.push(J)}else{J=w.value;w=i(F,"dash_manifests","DashManifest",J.dash_manifests,c("emptyFunction").thatReturnsTrue,function(a){return a.manifest_xml!=null&&a.manifest_xml!==""?a:null})[0];var K=i(G,"dash_manifest_urls","DashManifestURL",J.dash_manifest_urls,c("emptyFunction").thatReturnsTrue,function(a){return a.manifest_url!=null&&a.manifest_url!==""?a:null})[0],L=i(H,"progressive_urls","ProgressiveURLHD",J.progressive_urls,function(a){return((a=a.metadata)==null?void 0:a.quality)==="HD"},function(a){return a.progressive_url!=null?a:null})[0],M=i(H,"progressive_urls","ProgressiveURLSD",J.progressive_urls,function(a){return((a=a.metadata)==null?void 0:a.quality)==="SD"},function(a){return a.progressive_url!=null?a:null})[0];A=(w=w==null?void 0:w.manifest_xml)!=null?w:null;B=(w=K==null?void 0:K.manifest_url)!=null?w:null;C=(K=L==null?void 0:L.progressive_url)!=null?K:null;D=(w=M==null?void 0:M.progressive_url)!=null?w:null;if(C==null&&D==null&&c("gkx")("8034")){L=i(I,"hls_playlist_urls","HLSPlaylistURL",J.hls_playlist_urls,c("emptyFunction").thatReturnsTrue,function(a){return a.hls_playlist_url!=null?a:null})[0];C=null;D=(K=L==null?void 0:L.hls_playlist_url)!=null?K:null}}else{A=(M=l)!=null?M:null;B=(w=j)!=null?w:null;C=(J=e)!=null?J:null;D=(L=f)!=null?L:null}if(p===!0){C=(K=u)!=null?K:C;D=(l=v)!=null?l:D}if(t!==!0){if(h&&b("cr:8921")&&(E.length===0&&(F.length===0||G.length===0||B!=null||A!=null))){M=h({canUseOz:g,dashManifestUrl:B,dashManifestUrlOverride_DO_NOT_USE:k,dashManifestXmlString:A,experimentationConfig:new(c("VideoPlayerShakaConfig"))(),initialAudioUserPreferredLanguage:m,minQualityPreference:q,nextgendashAvailability:s});M instanceof Error?z.push(["VideoPlayerNextgendashImplementation",M]):y.push({Component:b("cr:8921"),data:M,typename:"VideoPlayerNextgendashImplementation"})}if(E.length===0&&(F.length===0||G.length===0||B!=null||A!=null)){w=d("VideoPlayerOzImplementationData").makeOzImplementationData({canUseOz:g,dashManifestUrl:B,dashManifestUrlOverride_DO_NOT_USE:k,dashManifestXmlString:A,experimentationConfig:new(c("VideoPlayerOzWWWConfig"))((j=a)!=null?j:new(c("VideoPlayerShakaConfig"))()),initialAudioUserPreferredLanguage:m,minQualityPreference:q});w instanceof Error?z.push(["VideoPlayerOzImplementation",w]):y.push({Component:c("VideoPlayerOzImplementationV2.react"),data:w,typename:"VideoPlayerOzImplementation"})}}else{e=c("err")("preferBrowserNativeImplementation="+String(t));e.name="VideoImplementationsPreferBrowserNative";h&&b("cr:8921")&&z.push(["VideoPlayerNextgendashImplementation",e]);z.push(["VideoPlayerOzImplementation",e])}if(E.length===0&&(H.length===0||C!=null||D!=null)){f=(J=r)!=null?J:q;L=d("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:C,hdSrcPreferred:c("gkx")("24369")||f==="HD"||f==="UHD",sdSrc:D});L instanceof Error?z.push(["VideoPlayerProgressiveImplementation",L]):y.push({Component:c("VideoPlayerProgressiveImplementationV2.react"),data:L,typename:"VideoPlayerProgressiveImplementation"})}u=y.length===0;K=[];K.push.apply(K,E);K.push.apply(K,F);K.push.apply(K,G);K.push.apply(K,H);K.push.apply(K,I);K.push.apply(K,z.map(function(a){var b,d=a[0];a=a[1];a=c("getErrorSafe")(a);d=d.replace(/^VideoPlayer/,"").replace(/(Implementation)|(Engine)$/,"")+"Engine";b=c("err").apply(void 0,["Cannot use "+d+" / "+((b=a.messageFormat)!=null?b:a.message)].concat(a.messageFormat!=null?(b=a.messageParams)!=null?b:[]:[]));b.name="VideoPlayerCannotUse"+d+"/"+a.name;return b}));v=null;if(u||c("gkx")("24370")&&K.length>0){l=new Map();for(s=0;s<K.length;++s){M=K[s];B=M.name+": "+((g=M.messageFormat)!=null?g:M.message);l.has(B)||l.set(B,M)}k=Array.from(l.values());A=[];a=[];j=[];for(m=0;m<k.length;++m){w=k[m];A.push(w.name);a.push((t=w.messageFormat)!=null?t:w.message);w.messageFormat!=null&&w.messageParams!=null&&j.push.apply(j,w.messageParams)}v=c("err").apply(void 0,[(u?p===!0?"Cannot play 360 video: ":"Cannot play video: ":p===!0?"Warning for 360 video: ":"Warning: ")+a.join(" ++ ")].concat(j));v.name=A.join("++");v.type=u?"fatal":"warn";v.project="comet_video_player";r=(e=v.metadata)!=null?e:new(c("ErrorMetadata"))();v.metadata=r;x!=null&&r.addEntry("COMET_VIDEO","VIDEO_ID",String(x));r.addEntry("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({isBroadcast:n,isLiveStreaming:o,isSpherical:p}));if(u)throw v}return{implementations:y,warning:v}}function i(a,b,c,d,e,f){e=d.filter(e);var g=e.map(function(a){return a.failure_reason==null?f(a):null}).filter(Boolean);if(e.length===0)a.push(k(b,c,d));else if(g.length===0){e=e.filter(function(a){return a.failure_reason!=null});e.length===0?a.push(l(b,c,d)):a.push.apply(a,e.map(function(a){return a.failure_reason!=null?j(b,c,a.failure_reason,a.metadata):null}).filter(Boolean))}return g}function j(a,b,d,e){try{var f;f=(f=JSON.stringify(e))!=null?f:String(e)}catch(a){f=String(e)}e=c("err").apply(void 0,["VideoDeliveryResponse "+a+" failure for "+b+": "+d.type+"; metadata=%s"+(d.message_format!=null&&d.message_format!==""?"; "+d.message_format:""),f].concat(d.message_params));e.name="VideoDeliveryResponseFailureReason/"+a+"("+b+")/"+d.type;return e}function k(a,b,d){try{d=(d=JSON.stringify(d))!=null?d:"N/A"}catch(a){d="N/A"}d=c("err")("VideoDeliveryResponse "+a+" failure for "+b+": no matching items; all items: %s",d);d.name="VideoDeliveryResponseContractViolation/"+a+"("+b+")/no_matching";return d}function l(a,b,d){try{d=(d=JSON.stringify(d))!=null?d:"N/A"}catch(a){d="N/A"}d=c("err")("VideoDeliveryResponse "+a+" failure for "+b+": no succeeded or failed items; all items: %s",d);d.name="VideoDeliveryResponseContractViolation/"+a+"("+b+")/no_success_and_failure";return d}g["default"]=a}),98);
__d("useVideoPlayerImplementations",["FBLogger","gkx","prepareVideoPlayerImplementations","react","useEmptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useEffect,j=e.useMemo;function a(a){i(function(){if(a){var b,d,e;b=(b=a.messageFormat)!=null?b:a.message;d=a.messageFormat!=null?(d=a.messageParams)!=null?d:[]:[];(e=c("FBLogger")("comet_video_player").catching(a)).warn.apply(e,[b].concat(d))}},[a])}var k=c("gkx")("24370")?a:c("useEmptyFunction");function b(a){var b=j(function(){return c("prepareVideoPlayerImplementations")(a)},[a]);k(b.warning);return b}g["default"]=b}),98);
__d("useVideoImplementationsRelayImpl",["react","useVideoImplementationsParamsRelayImpl","useVideoPlayerImplementations"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useDebugValue;function a(a,b){a=c("useVideoImplementationsParamsRelayImpl")(a,b);b=c("useVideoPlayerImplementations")(a);var d=b.implementations;b=b.warning;i({implementations:d,params:a,warning:b});return d}g["default"]=a}),98);
__d("useVideoImplementationsRelay",["useVideoImplementationsRelayImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("useVideoImplementationsRelayImpl")}),98);
__d("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioAvailabilityInfoRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_availability",storageKey:null},{alias:null,args:null,concreteType:"VideoMutedSegment",kind:"LinkedField",name:"muted_segments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute_start_time_in_sec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mute_end_time_in_sec",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioAvailabilityInfoRelay",["CometRelay","VideoPlayerAudioAvailabilityInfo","react","useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo;function a(a){var c=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerAudioAvailabilityInfoRelay_video.graphql"),a);return j(function(){return d("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityInfo({audioAvailability:c.audio_availability,mutedSegmentsUnsanitized:c.muted_segments==null?[]:c.muted_segments.map(function(a){return{muteEndTimeInSec:a.mute_end_time_in_sec,muteStartTimeInSec:a.mute_start_time_in_sec}})})},[c.audio_availability,c.muted_segments])}g["default"]=a}),98);
__d("useVideoPlayerAudioSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerAudioSettings_video",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_volume_setting",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_user_preferred_language",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerAudioSettings",["AudioSettingsVolumeSetting","CometRelay","react","useVideoPlayerAudioSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo,k=1;e=.5;var l=null,m=new Map([["default",k],["quiet",e]]);function a(a){var e;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerAudioSettings_video.graphql"),a);e=(e=a.audio_settings)==null?void 0:e.video_volume_setting;var f="DEFAULT";switch(e){case"DEFAULT":case"QUIET":f=e;break;default:break}e=c("AudioSettingsVolumeSetting")[f];var g=(f=m.get(e))!=null?f:k,i=(e=a.audio_user_preferred_language)!=null?e:l;return j(function(){return{audioUserPreferredLanguage:i,preferredVolumeSetting:g}},[g,i])}g["default"]=a}),98);
__d("useVideoPlayerCaptionsSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerCaptionsSettings_video",selections:[{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_background_opacity",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_text_size",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerCaptionsSettings",["CometRelay","useVideoPlayerCaptionsSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i="DEFAULT",j="BLACK",k="WHITE",l="DEFAULT";function a(a){var c;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerCaptionsSettings_video.graphql"),a);return{alwaysShowCaptions:(c=(c=a.captions_settings)==null?void 0:c.always_show_captions)!=null?c:!1,captionDisplayStyle:{captionsBackgroundColor:(c=(c=a.captions_settings)==null?void 0:c.captions_background_color)!=null?c:j,captionsBackgroundOpacity:(c=(c=a.captions_settings)==null?void 0:c.captions_background_opacity)!=null?c:i,captionsTextColor:(c=(c=a.captions_settings)==null?void 0:c.captions_text_color)!=null?c:k,captionsTextSize:(a=(c=a.captions_settings)==null?void 0:c.captions_text_size)!=null?a:l}}}g["default"]=a}),98);
__d("useVideoPlayerIMFFromVideoMetadata",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useDebugValue,j=b.useMemo;function a(a){var b=a.isVideoBroadcast,c=a.specInlineJson;a.videoID;var d=b===!0;a=j(function(){return{imfExpectedFromEmsg:d,specInlineJson:c}},[d,c]);i({useVideoPlayerIMFFromVideoMetadata:a});return a}g["default"]=a}),98);
__d("useVideoPlayerIMFFromVideoMetadataRelay_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerIMFFromVideoMetadataRelay_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,concreteType:"VideoIMFData",kind:"LinkedField",name:"video_imf_data",plural:!1,selections:[{args:null,documentName:"useVideoPlayerIMFFromVideoMetadataRelay_video",fragmentName:"useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data",fragmentPropName:"video_imf_data",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"spec_inline_json",storageKey:null}],type:"VideoIMFData",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerIMFFromVideoMetadataRelay",["CometRelay","useVideoPlayerIMFFromVideoMetadata","useVideoPlayerIMFFromVideoMetadataRelay_video.graphql","useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerIMFFromVideoMetadataRelay_video.graphql"),a);var e=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerIMFFromVideoMetadataRelay_video_imf_data.graphql"),a.video_imf_data);return c("useVideoPlayerIMFFromVideoMetadata")({isVideoBroadcast:a.is_video_broadcast,specInlineJson:e==null?void 0:e.spec_inline_json,videoID:a.id})}g["default"]=a}),98);
__d("useVideoPlayerLiveLatencyKnobSettings_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerLiveLatencyKnobSettings_video",selections:[{alias:null,args:null,concreteType:"VideoBroadcastLowLatencyConfig",kind:"LinkedField",name:"broadcast_low_latency_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ll_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ll_latency_tolerance_ms",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerLiveLatencyKnobSettings",["CometRelay","useVideoPlayerLiveLatencyKnobSettings_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c;a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerLiveLatencyKnobSettings_video.graphql"),a);return{desiredLatencyMs:(c=(c=a.broadcast_low_latency_config)==null?void 0:c.ll_desired_latency_ms)!=null?c:0,latencyToleranceMs:(a=(c=a.broadcast_low_latency_config)==null?void 0:c.ll_latency_tolerance_ms)!=null?a:0}}g["default"]=a}),98);
__d("useVideoPlayerShakaConfig_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaConfig_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_menu_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fbls_tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_sensitive_broadcast",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"selected_latency_setting",storageKey:null}]}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaConfig",["CometRelay","VideoPlayerConnectionQuality","VideoPlayerOzWWWGlobalConfig","VideoPlayerShakaConfig","oz-player/networks/OzBandwidthEstimator","react","useSelectedLatencySetting","useVideoPlayerShakaConfig_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useEffect,k=e.useState;function a(a,e){e=e.adClientToken;var f=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerShakaConfig_video.graphql"),a),g=e!=null,i=f.is_spherical===!0,l=f.is_gaming_video===!0;e=c("useSelectedLatencySetting")((a=f.id)!=null?a:"null",f.selected_latency_setting);var m=e[0];a=k(function(){var a;return new(c("VideoPlayerShakaConfig"))({connection_quality:d("VideoPlayerConnectionQuality").evaluate(function(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))}),content_category:l?"gaming":"general",fbls_tier:((a=f.fbls_tier)==null?void 0:a.startsWith("user"))?"user":"general",is_ad:g,is_latency_sensitive_broadcast:f.is_latency_sensitive_broadcast===!0,is_live:f.is_live_streaming===!0,is_spherical:i,latency_level:f.is_latency_menu_enabled===!0?m:"normal",player_format:"inline",servable_via_fmbs:!1,streaming_implementation:"default"})});var n=a[0];j(function(){n.setContext("is_ad",g)},[n,g]);j(function(){n.setContext("is_spherical",i)},[n,i]);return n}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerBuilder_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerBuilder_video",selections:[{alias:"video_player_shaka_performance_logger_init2",args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerBuilder_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerBuilder_init",fragmentPropName:"init",kind:"ModuleImport"},{alias:null,args:null,kind:"ScalarField",name:"per_session_sampling_rate",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerBuilder",["CometRelay","useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql","useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h!==void 0?h:h=b("useVideoPlayerShakaPerformanceLoggerBuilder_init.graphql");function a(a){a=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerShakaPerformanceLoggerBuilder_video.graphql"),a);var c=a.video_player_shaka_performance_logger_init2?d("CometRelay").ModuleResource.read(a.video_player_shaka_performance_logger_init2):null;a=(a=a.video_player_shaka_performance_logger_init2)==null?void 0:a.per_session_sampling_rate;return c!=null&&a!=null?new c({perSessionSampleRate:a}):null}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"VideoPlayerShakaPerformanceLoggerInit",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",selections:[{alias:null,args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{args:null,documentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",fragmentPropName:"init",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_player_shaka_performance_logger_should_sample",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerShakaPerformanceLoggerRelayImpl",["CometRelay","useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql","useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;h!==void 0?h:h=b("useVideoPlayerShakaPerformanceLoggerRelayImpl_init.graphql");function a(a){a=d("CometRelay").useFragment(i!==void 0?i:i=b("useVideoPlayerShakaPerformanceLoggerRelayImpl_video.graphql"),a);var c=a.video_player_shaka_performance_logger_init?d("CometRelay").ModuleResource.read(a.video_player_shaka_performance_logger_init):null;c!=null&&a.video_player_shaka_performance_logger_should_sample===!0&&c.forceShouldSample();return c}g["default"]=a}),98);
__d("useVideoPlayerShakaPerformanceLoggerRelay",["useVideoPlayerShakaPerformanceLoggerRelayImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("useVideoPlayerShakaPerformanceLoggerRelayImpl")}),98);
__d("evaluateVideoPlayerVideoStatusFallbackCover",["fbt","ErrorMetadata","VideoPlayerFallbackCover.react","VideoStatusType","err","getGraphQLEnumSafe","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.disableVideoStatusFallbackIf,d=a.overrideGkForVideoStatusFallback_EXPERIMENTAL,e=a.videoFBID;a=a.videoStatusTypeFromGraphQL;e=k({videoFBID:e,videoStatusTypeFromGraphQL:a});a=null;var f;if(d==null&&!c("gkx")("24384"))a=null,f="disabled_by_gk";else if(d===!1)a=null,f="disabled_by_gk_override";else if((b==null?void 0:b(e))===!0){a=null;f="disable_if:"+e.videoAvailabilityStatus+":"+((d=e.videoStatusTypeFromGraphQL)!=null?d:"null")}else{switch(e.videoAvailabilityStatus){case"unknown":a=null;break;case"ok":a=null;break;case"undiscoverable":a=null;break;case"unpublished":a=null;break;case"processing":b=c("gkx")("24385");a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:b?e.debugError:null,message:h._(/*BTDS*/"__JHASH__5QY1OpMW_Z9__JHASH__"),showDebugWithoutError:b,showLearnMoreLink:!1});break;case"processing_failed":a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:e.debugError,message:h._(/*BTDS*/"__JHASH__iEIGtJDYBZC__JHASH__")});break;case"deleted":a=j.jsx(c("VideoPlayerFallbackCover.react"),{debugError:e.debugError,message:h._(/*BTDS*/"__JHASH__xFsW4QbgqjN__JHASH__")});break;default:e.videoAvailabilityStatus}f=(a==null?"not_needed_for_status:":"fallback_for_status:")+e.videoAvailabilityStatus+":"+String(e.videoStatusTypeFromGraphQL)}return{fallback:a,fallbackDebug:f,videoStatus:e}}function k(a){var b=a.videoFBID;a=a.videoStatusTypeFromGraphQL;var d=[c("getGraphQLEnumSafe")(c("VideoStatusType"),6)].includes(a)?"ok":[c("getGraphQLEnumSafe")(c("VideoStatusType"),9)].includes(a)?"unpublished":[c("getGraphQLEnumSafe")(c("VideoStatusType"),11)].includes(a)?"undiscoverable":[c("getGraphQLEnumSafe")(c("VideoStatusType"),5),c("getGraphQLEnumSafe")(c("VideoStatusType"),14),c("getGraphQLEnumSafe")(c("VideoStatusType"),1),c("getGraphQLEnumSafe")(c("VideoStatusType"),3)].includes(a)?"processing":[c("getGraphQLEnumSafe")(c("VideoStatusType"),13),c("getGraphQLEnumSafe")(c("VideoStatusType"),8),c("getGraphQLEnumSafe")(c("VideoStatusType"),7)].includes(a)?"processing_failed":[c("getGraphQLEnumSafe")(c("VideoStatusType"),10),c("getGraphQLEnumSafe")(c("VideoStatusType"),2)].includes(a)?"deleted":"unknown",e=d==="ok"||d==="unpublished"||d==="undiscoverable"||d==="processing_failed"||d==="deleted"||d==="unknown",f=null;if(d!=="ok"){var g;f=c("err")("Video is now %s due to video_status_type=%s",d,a);g=(g=f.metadata)!=null?g:new(c("ErrorMetadata"))();g.addEntry("COMET_VIDEO","VIDEO_ID",(b=b)!=null?b:"");f.metadata=g;f.name="VideoPlayerVideoStatusInfo"}b={debugError:f,isTerminalStatus:e,videoAvailabilityStatus:d,videoStatusTypeFromGraphQL:a};return b}g["default"]=a}),226);
__d("useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerVideoStatusRelayWithFallbackCover_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_status_type",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useVideoPlayerVideoStatusRelayWithFallbackCover",["CometRelay","evaluateVideoPlayerVideoStatusFallbackCover","react","useInterval","useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useDebugValue;function a(a,e,f,g){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useVideoPlayerVideoStatusRelayWithFallbackCover_video.graphql"),a);f=c("evaluateVideoPlayerVideoStatusFallbackCover")({disableVideoStatusFallbackIf:f,overrideGkForVideoStatusFallback_EXPERIMENTAL:g,videoFBID:a.id,videoStatusTypeFromGraphQL:a.video_status_type});c("useInterval")(e,f.videoStatus.isTerminalStatus||f.fallback==null?0:1e4);j(f);return f}g["default"]=a}),98);
__d("VideoPlayerRelay.react",["CastingStateHooks","CometPlaceholder.react","CometRelay","CometTrackingNodeProvider.react","ErrorMetadata","FBLogger","InstreamVideoAdBreaksPlayer.react","JSResourceForInteraction","VideoPlayerErrorBoundary.react","VideoPlayerRelay_video.graphql","VideoPlayerUnsupportedBrowserMessageFallback.react","VideoPlayerXImplRelayWrapper.react","XFBLatencySensitiveTypeUtils.facebook","computeAspectRatio","cr:759","defaultErrorBoundaryFallback","deferredLoadComponent","err","getVideoPlayerAutoplayProps","gkx","lazyLoadComponent","normalizeVideoPlayerLoopCount","react","requireDeferredForDisplay","useEmptyFunction","useGraphQLVideoAutoplayGatingResult","useGraphQLVideoDRMInfo","useGraphQLVideoP2PSettings","useVideoImplementationsRelay","useVideoPlayerAudioAvailabilityInfoRelay","useVideoPlayerAudioSettings","useVideoPlayerAvailableCaptionsLocalesFromRelay","useVideoPlayerCaptionsSettings","useVideoPlayerIMFFromVideoMetadataRelay","useVideoPlayerLiveLatencyKnobSettings","useVideoPlayerShakaConfig","useVideoPlayerShakaPerformanceLoggerBuilder","useVideoPlayerShakaPerformanceLoggerRelay","useVideoPlayerVideoStatusRelayWithFallbackCover"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useEffect,m=e.useRef,n=e.useTransition,o=(e=b("cr:759"))!=null?e:c("useEmptyFunction"),p=c("gkx")("24325"),q=c("gkx")("24326"),r=c("deferredLoadComponent")(c("requireDeferredForDisplay")("VideoPlayerSphericalFallbackCover.react").__setRef("VideoPlayerRelay.react")),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("VideoPlayerVideoIsCastingCover.react").__setRef("VideoPlayerRelay.react"));function t(a){var e=a.video;a=babelHelpers.objectWithoutPropertiesLoose(a,["video"]);e=d("CometRelay").useRefetchableFragment(h!==void 0?h:h=b("VideoPlayerRelay_video.graphql"),e);var f=e[0],g=e[1];e=n();e[0];var i=e[1];e=k(function(){i(function(){g({},{fetchPolicy:"network-only"})})},[g]);e=c("useVideoPlayerVideoStatusRelayWithFallbackCover")(f,e,a.disableVideoStatusFallbackIf,a.overrideGkForVideoStatusFallback_EXPERIMENTAL);var o=e.fallback,p=e.fallbackDebug,q=e.videoStatus,r=m(null);l(function(){var a=q,b=r.current;if(o!=null&&(a.videoAvailabilityStatus!==(b==null?void 0:b.videoAvailabilityStatus)||a.videoStatusTypeFromGraphQL!==(b==null?void 0:b.videoStatusTypeFromGraphQL))){r.current=q;c("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",(a=f.id)!=null?a:"").warn("VideoPlayerRelay rendered the video status fallback: %s",p)}});return o!=null?o:j.jsx(u,babelHelpers["extends"]({},a,{video:f}))}t.displayName=t.name+" [from "+f.id+"]";function u(a){var b,e=a.accessToken,f=a.adClientToken,g=a.audioOnly,h=a.autoplayGatingResult;a.autoplaySetting;var i=a.bufferEndLimit,k=a.canAutoplay,l=a.children,m=a.disableLoadingIndicator;m=m===void 0?!1:m;a.disableVideoStatusFallbackIf;var n=a.externalLogID,t=a.externalLogType,u=a.forceProgressive_EXPERIMENTAL;u=u===void 0?!1:u;var v=a.graphQLVideoDRMInfo,w=a.initialForceHD;w=w===void 0?!1:w;a.initialRepresentationIds;var x=a.initialTracePolicy,y=a.loadSequence,z=a.loggingConfig,A=a.loggingToSNAPLAdditionalData,B=a.loggingToVPLAdditionalData,C=a.loopCount,D=a.manifestURL_DO_NOT_USE;a.overrideGkForVideoStatusFallback_EXPERIMENTAL;var E=a.playerFormat;E=E===void 0?"inline":E;var F=a.playerOriginOverride,G=a.portalingEnabled,H=a.portalingFromVideoID,I=a.portalingPlaceMetaData,J=a.portalingRenderPlaceholder,K=a.poster,L=a.productAttribution,M=a.renderVideoPixelsFit,aa=a.seoWebCrawlerLookasideUrl,ba=a.seoWebCrawlerVideoTracks,ca=a.source_VPL_LOGGING_HACK,da=a.startTimestamp,N=a.subOrigin,O=a.video,P=a.volumeSetting;a=a.wrapVideoPixels_EXPERIMENTAL;var Q=O.id;if(Q==null||Q===""){var R=c("err")("Cannot play video: Invalid video ID: %s",Q===""?"an empty string":String(Q));R.name="VideoPlayerInvalidVideoID";R.project="comet_video_player";throw R}R=O.dash_prefetch_experimental;var S=c("useVideoPlayerAvailableCaptionsLocalesFromRelay")(O),ea=(S==null?void 0:S.find(function(a){return a.localizedCreationMethod!=null}))!=null;b=d("XFBLatencySensitiveTypeUtils.facebook").toJSEnum((b=O.latency_sensitive_config)==null?void 0:b.broadcast_latency_sensitivity);var T=c("useVideoPlayerShakaConfig")(O,{adClientToken:f}),fa=o(Q),ga=c("useGraphQLVideoP2PSettings")(O),U=c("useGraphQLVideoDRMInfo")(O);U=(v=v)!=null?v:U;v=!!(U&&U.fairplayCert!==null);u=u===!0||v||p&&!!O.is_live_streaming||q&&typeof MediaSource==="undefined";v=c("useVideoImplementationsRelay")(O,{dashManifestUrlOverride_DO_NOT_USE:D,minQualityPreferenceOverrideFromProductSurface:w?"HD":null,preferBrowserNativeImplementation:u,videoPlayerShakaConfig:T});D=c("useVideoPlayerCaptionsSettings")(O);w=c("useVideoPlayerAudioSettings")(O);u=c("useVideoPlayerLiveLatencyKnobSettings")(O);T=u.desiredLatencyMs;u=u.latencyToleranceMs;var ha=c("useVideoPlayerAudioAvailabilityInfoRelay")(O),V=c("useGraphQLVideoAutoplayGatingResult")(O);V=c("getVideoPlayerAutoplayProps")(V,k,h);k=c("useVideoPlayerShakaPerformanceLoggerRelay")(O);h=c("useVideoPlayerShakaPerformanceLoggerBuilder")(O);var ia=c("useVideoPlayerIMFFromVideoMetadataRelay")(O),ja=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(c("InstreamVideoAdBreaksPlayer.react"),{playerFormat:E,subOrigin:N,video:O})}),W=d("CastingStateHooks").useCastingVideoID(),X=d("VideoPlayerUnsupportedBrowserMessageFallback.react").useVideoPlayerUnsupportedBrowserMessageFallback(O.unsupported_browser_message,Q);if(X!=null)return X;X=O.permalink_url;var Y=O.spherical_video_renderer;Y=Y?j.jsx(d("CometRelay").MatchContainer,{match:Y,props:{playerFormat:E,sphericalVideoRenderer:Y,subOrigin:N,videoTahoeUrl:X}}):null;X=O.is_spherical;var Z=O.is_spherical_enabled,$=O.permalink_url;if(X===!0&&Z!==!0){if($==null||$===""){X=c("err")("Cannot play video: Empty permalink URL for a spherical video");X.name="VideoPlayerSphericalEmptyPermalinkURL";X.project="comet_video_player";Z=(Z=X.metadata)!=null?Z:new(c("ErrorMetadata"))();Z.addEntry("COMET_VIDEO","VIDEO_ID",Q);X.metadata=Z;throw X}return j.jsx(r,{videoTahoeUrl:$})}if(W!=null&&W===Q)return j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(s,{video:O})});$=(X=(Z=O.live_playback_instrumentation_configs)==null?void 0:Z.is_client_triggered_trace_enabled)!=null?X:!1;W=c("normalizeVideoPlayerLoopCount")(C,O.is_looping,O.loop_count);Z=c("computeAspectRatio")(O.width,O.height);return j.jsx(c("VideoPlayerXImplRelayWrapper.react"),{VideoPlayerShakaPerformanceLoggerClass:k,accessToken:e,adClientToken:f,alt:c("gkx")("23009")?O.animated_image_caption:void 0,alwaysShowCaptions:D.alwaysShowCaptions,areCaptionsAutogenerated:ea,audioAvailabilityInfo:ha,audioOnly:O.is_podcast_video===!0||g,autoplayGatingResult:V.autoplayGatingResult,autoplaySetting:V.autoplaySetting,broadcastId:O.broadcast_id,broadcastLatencySensitivity:b,broadcastStatus:O.broadcast_status,broadcasterOrigin:O.broadcaster_origin,bufferEndLimit:i,canAutoplay:V.canAutoplay,captionDisplayStyle:D.captionDisplayStyle,children:l,desiredLatencyMs:T,disableLoadingIndicator:m,expiredVideoUrlRefreshHandler:fa,externalLogID:n,externalLogType:t,graphQLVideoDRMInfo:U,graphQLVideoP2PSettings:ga,implementations:v,initialRepresentationIds:R,initialTracePolicy:x,instreamVideoAdBreaksPlayer:ja,isClientTriggeredTraceEnabled:$,isLiveStreaming:O.is_live_streaming,isLiveTraceEnabled:O.is_live_trace_enabled,isNCSR:O.is_ncsr,isPremiumMusicVideo:O.pmv_metadata!=null,isVideoBroadcast:O.is_video_broadcast,latencyToleranceMs:u,loadSequence:y,loggingConfig:z,loggingToSNAPLAdditionalData:A,loggingToVPLAdditionalData:B,loopCount:W,playerFormat:E,playerOriginOverride:F,portalingEnabled:G,portalingFromVideoID:H,portalingPlaceMetaData:I,portalingRenderPlaceholder:J,poster:K,productAttribution:L,renderVideoPixelsFit:M,seoWebCrawlerLookasideUrl:(X=aa)!=null?X:O.seo_web_crawler_lookaside_url,seoWebCrawlerVideoTracks:ba,sideLoadCaptionsExpected:((C=S==null?void 0:S.length)!=null?C:0)>0,sideLoadCaptionsUrl:O.captions_url,source_VPL_LOGGING_HACK:ca,startTimestamp:da,subOrigin:N,userPreferenceLang:w.audioUserPreferredLanguage,videoFBID:Q,videoPixelsAspectRatio:Z,videoPlayerIMFFromVideoMetadata:ia,videoPlayerShakaPerformanceLoggerBuilder:h,videoPlayerSpherical:Y,volumeSetting:P!==void 0?P:w.preferredVolumeSetting,wrapVideoPixels_EXPERIMENTAL:a},Q)}u.displayName=u.name+" [from "+f.id+"]";function a(a){var b=a.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn;b=b===void 0?!1:b;var d=a.errorBoundaryFallback;a=babelHelpers.objectWithoutPropertiesLoose(a,["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"]);a=j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:13,children:j.jsx(t,babelHelpers["extends"]({},a))});return b?a:j.jsx(c("VideoPlayerErrorBoundary.react"),{description:"VideoPlayerRelayBoundary",fallback:(b=d)!=null?b:c("defaultErrorBoundaryFallback"),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CastingChromecastAPIWrapper",["cr:1885117"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1885117")}),98);
__d("CastingChromecastSession",["Promise","err","recoverableViolation","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,d){var e=this;this.$3=null;this.$4=[];this.$5=[];this.$6=[];this.$7=[];this.$8=[];this.$9=[];this.$10=[];this.$11=[];this.$12=function(a,b){if(a===e.$2){var d=e.$4.slice();d.forEach(function(a){a(b)})}else e.$6.slice().forEach(function(b){b(c("err")("Namespace does not match. Expected "+e.$2+" but received "+a),"CastingChromecastSession._onMessageReceived")})};this.$1=a;this.$2=b;this.$3=d;d.addMessageListener(this.$2,this.$12)}var d=a.prototype;d.destroy=function(){var a=this.$3;a!=null&&(a.status!=null&&a.status!=="disconnected"&&c("recoverableViolation")("Destroying receiver session that is not disconnected. Status, "+a.status,"comet_cast_sender"),a.removeMessageListener(this.$2,this.$12));this.$3=null};d.isCasting=function(){return this.$3!=null};d.isConnected=function(){return this.$3!=null&&this.$3.status==="connected"};d.isDisconnected=function(){return this.$3!=null&&this.$3.status==="disconnected"};d.disconnect=function(){var a=this;this.$5.slice().forEach(function(a){a()});return new(h||(h=b("Promise")))(function(b,c){a.$3!=null?a.$3.stop(b,c):b()})["catch"](function(b){if(a.$3!=null&&a.$3.status!=="stopped"){a.$6.slice().forEach(function(a){a(b,"CastingChromecastSession.disconnect")});throw b}})["finally"](function(){var b=a.$3;a.$3=null;b&&b.removeMessageListener(a.$2,a.$12);a.$7.slice().forEach(function(a){a()})})};d.getVolume=function(){var a=this.$13();return a?a.level:null};d.getFriendlyName=function(){return this.$14()};d.setVolume=function(a){var d=this,e=this.$3;return new(h||(h=b("Promise")))(function(b,d){if(e==null){d(c("err")("Cannot set volume without a session"));return}e.setReceiverVolumeLevel(a,b,d)})["catch"](function(a){d.$6.slice().forEach(function(b){b(a,"CastingChromecastSession.setVolume")});throw a})};d.isMuted=function(){var a=this.$13();return a?a.muted:null};d.mute=function(){return this.$15(!0)};d.unmute=function(){return this.$15(!1)};d.sendMessage=function(a){var d=this;return new(h||(h=b("Promise")))(function(b,e){var f=d.$3;if(f==null){e(c("err")("The message can not be sent without a session"));return}f.sendMessage(d.$2,a,b,e)})["catch"](function(a){d.$6.slice().forEach(function(b){b(a,"CastingChromecastSession.sendMessage")});throw a})};d.$13=function(){var a;a=(a=this.$3)==null?void 0:(a=a.receiver)==null?void 0:a.volume;return a==null?null:a};d.$14=function(){var a;return((a=this.$3)==null?void 0:a.receiver.friendlyName)||null};d.$15=function(a){var d=this;return new(h||(h=b("Promise")))(function(b,e){var f=d.$3;if(f==null){e(c("err")("The muted state can not be set without a session"));return}f.setReceiverMuted(a,b,e)})["catch"](function(a){d.$6.slice().forEach(function(b){b(a,"CastingChromecastSession._setIsMuted")});throw a})};d.onMessage=function(a){var b=this.$4;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onDisconnecting=function(a){var b=this.$5;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onError=function(a){var b=this.$6;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onDisconnected=function(a){var b=this.$7;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onVideoLoading=function(a){var b=this.$8;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onVideoLoaded=function(a){var b=this.$9;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onVideoPlaying=function(a){var b=this.$10;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};d.onVideoPaused=function(a){var b=this.$11;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};return a}();g["default"]=a}),98);
__d("CastingErrorUtils",["ErrorMetadata","err","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a!=null&&typeof a==="object"&&typeof a.code==="string"&&a.code===b}function b(a){return a!=null&&typeof a==="object"&&typeof a.code==="string"?c("err")("Chromecast error: %s, keys: %s","cast.ChromecastError",JSON.stringify({code:a.code})):c("getErrorSafe")(a)}function d(a,b){a.metadata==null&&(a.metadata=new(c("ErrorMetadata"))());var d=a.metadata;b=b==null?void 0:b.videoID;b!=null&&d.addEntries(["COMET_VIDEO","VIDEO_ID",b]);return a}g.isChromecastError=a;g.getCastingErrorSafe=b;g.appendCastingMetadataToExpandedError=d}),98);
__d("ConnectedTvLoggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1843753");b=d("FalcoLoggerInternal").create("connected_tv_logging",a);e=b;g["default"]=e}),98);
__d("CastingChromecastScanner",["CastingChromecastAPIWrapper","CastingChromecastSession","CastingErrorUtils","ConnectedTvLoggingFalcoEvent","Promise","err","performanceAbsoluteNow","promiseDone","removeFromArray"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){function a(a,b){this.$6=null,this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$1=a,this.$2=b,this.$4=!1,this.$3=!1,this.$5=new Set()}var e=a.prototype;e.init=function(){if(this.$6!=null)return(i||(i=b("Promise"))).reject(c("err")("Scanner can only be initialized once."));this.$6=this.$16();return this.$6};e.ready=function(){return this.$6==null?(i||(i=b("Promise"))).reject(c("err")("Scanner should be initialized.")):this.$6};e.hasSupport=function(){return this.$3};e.hasFoundReceiver=function(){return this.$4};e.getSession=function(){var a=this;if(!this.$4)return(i||(i=b("Promise"))).reject(c("err")("No receivers found"));this.$13.slice().forEach(function(a){a()});return this.$17().then(function(b){var c=a.$18(b);a.$5.add(c);a.$14.slice().forEach(function(a){a(c)});return c})["catch"](function(b){a.$10.slice().forEach(function(a){a()});a.$11.slice().forEach(function(a){a()});throw b})};e.$16=function(){var a=this;this.$3=!0;return this.$19().then(function(b){return a.$20()}).then(function(b){a.$9.slice().forEach(function(a){a()})}).then(function(b){return a.$21()})["catch"](function(b){!d("CastingErrorUtils").isChromecastError(b,"not_supported")&&!d("CastingErrorUtils").isChromecastError(b,"extension_not_available")&&!d("CastingErrorUtils").isChromecastError(b,"extension_no_casting_script")&&a.$8.slice().forEach(function(a){a(b,"CastingChromecastScanner._init")});throw b})};e.$21=function(){var a=this,d=this.$1;if(d==null)return(i||(i=b("Promise"))).reject(c("err")("App ID is not defined"));var e=function(b){var c=a.$18(b);a.$14.slice().forEach(function(a){a(c)})},f=function(b){c("promiseDone")(c("CastingChromecastAPIWrapper").getIsAvailable(b).then(function(b){a.$4=b,a.$15.slice().forEach(function(b){b({foundReceiver:a.$4})})}))};return c("CastingChromecastAPIWrapper").initialize({appID:d,receiverListener:f,sessionListener:e}).then(function(){})["catch"](function(b){a.$8.slice().forEach(function(a){a(b,"CastingChromecastScanner._initializeApi")});throw b})};e.$19=function(){var a=this;return this.$1!=null?(i||(i=b("Promise"))).resolve():c("CastingChromecastAPIWrapper").getDefaultAppID().then(function(b){a.$1=b})};e.$17=function(){var a=this.$1;if(a==null)return(i||(i=b("Promise"))).reject(c("err")("App ID is not defined"));var d=(h||(h=c("performanceAbsoluteNow")))();c("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_requested"}});return c("CastingChromecastAPIWrapper").getSession(a).then(function(a){c("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_started",perf_time_ms:Math.floor((h||(h=c("performanceAbsoluteNow")))()-d)}});return a})["catch"](function(a){c("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_failed",perf_time_ms:Math.floor((h||(h=c("performanceAbsoluteNow")))()-d),session_failure_code:typeof a.code==="string"?a.code:null,session_failure_description:a.description}});throw a})};e.$18=function(a){var b=this,d=new(c("CastingChromecastSession"))(this.$1||"",this.$2||"",a),e=d.onDisconnecting(function(){b.$12.slice().forEach(function(a){a()})}),f=d.onError(function(a,c){b.$8.slice().forEach(function(b){b(a,c)})}),g=d.onDisconnected(function(){b.$11.slice().forEach(function(a){a()}),b.$5["delete"](d),e.remove(),f.remove(),g.remove()});return d};e.$20=function(){var a=this;return c("CastingChromecastAPIWrapper").addReceiverListener({onCast:function(b){a.$7.slice().forEach(function(a){a(b)})},onStop:function(){a.$5.forEach(function(a){return a.disconnect()})}})};e.onCast=function(a){var b=this.$7;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onError=function(a){var b=this.$8;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onInit=function(a){var b=this.$9;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionCancelled=function(a){var b=this.$10;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionDisconnected=function(a){var b=this.$11;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionDisconnecting=function(a){var b=this.$12;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionRequested=function(a){var b=this.$13;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionStarted=function(a){var b=this.$14;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onStatusChanged=function(a){var b=this.$15;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};return a}();g["default"]=a}),98);
__d("CastingState",[],(function(a,b,c,d,e,f){"use strict";function a(){return{isCastPending:!1,receiverExperience:null,receiverFriendlyName:null,receiverIsConnected:!1,receiverIsMuted:null,receiverVolume:null}}function b(){return{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null,type:"video_channel"}}function c(){return{type:"photo"}}function d(){return{currentAssetID:null,currentPlaybackState:null,type:"photo_album"}}f.initialCastingState=a;f.initialVideoChannelExperienceState=b;f.initialPhotoExperienceState=c;f.initialPhotoAlbumExperienceState=d}),66);
__d("TV2PhotoAlbumReportedState",[],(function(a,b,c,d,e,f){"use strict";function a(a){return k(JSON.parse(a),m("TV2PhotoAlbumReportedState"))}function b(a){return JSON.stringify(l(a,m("TV2PhotoAlbumReportedState")),null,2)}function g(a,b,c){c===void 0&&(c="");if(c)throw Error('Invalid value for key "'+c+'". Expected type '+JSON.stringify(a)+" but got "+JSON.stringify(b));throw Error("Invalid value "+JSON.stringify(b)+" for type "+JSON.stringify(a))}function h(a){if(a.jsonToJS===void 0){var b={};a.props.forEach(function(a){return b[a.json]={key:a.js,typ:a.typ}});a.jsonToJS=b}return a.jsonToJS}function i(a){if(a.jsToJSON===void 0){var b={};a.props.forEach(function(a){return b[a.js]={key:a.json,typ:a.typ}});a.jsToJSON=b}return a.jsToJSON}function j(a,b,c,d){d===void 0&&(d="");function e(b,a){return typeof b===typeof a?a:g(b,a,d)}function f(b,a){var d=b.length;for(var e=0;e<d;e++){var f=b[e];try{return j(a,f,c)}catch(a){}}return g(b,a)}function h(b,a){return b.indexOf(a)!==-1?a:g(b,a)}function i(b,a){return!Array.isArray(a)?g("array",a):a.map(function(a){return j(a,b,c)})}function k(a){if(a===null)return null;var b=new Date(a);return isNaN(b.valueOf())?g("Date",a):b}function l(b,d,a){if(a===null||typeof a!=="object"||Array.isArray(a))return g("object",a);var e={};Object.getOwnPropertyNames(b).forEach(function(d){var f=b[d];d=Object.prototype.hasOwnProperty.call(a,d)?a[d]:void 0;e[f.key]=j(d,f.typ,c,f.key)});Object.getOwnPropertyNames(a).forEach(function(f){Object.prototype.hasOwnProperty.call(b,f)||(e[f]=j(a[f],d,c,f))});return e}if(b==="any")return a;if(b===null)return a===null?a:g(b,a);if(b===!1)return g(b,a);while(typeof b==="object"&&b.ref!==void 0)b=n[b.ref];if(Array.isArray(b))return h(b,a);if(typeof b==="object")return Object.prototype.hasOwnProperty.call(b,"unionMembers")?f(b.unionMembers,a):Object.prototype.hasOwnProperty.call(b,"arrayItems")?i(b.arrayItems,a):Object.prototype.hasOwnProperty.call(b,"props")?l(c(b),b.additional,a):g(b,a);return b===Date&&typeof a!=="number"?k(a):e(b,a)}function k(a,b){return j(a,b,h)}function l(a,b){return j(a,b,i)}function c(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return{unionMembers:b}}function d(a,b){return{props:a,additional:b}}function m(a){return{ref:a}}var n={TV2PhotoAlbumReportedState:d([{json:"media_parameters",js:"media_parameters",typ:m("MediaParameters")},{json:"media_state",js:"media_state",typ:m("MediaState")}],"any"),MediaParameters:d([{json:"album_id",js:"album_id",typ:""}],"any"),MediaState:d([{json:"photo_state",js:"photo_state",typ:c(void 0,m("PhotoMediaState"))},{json:"video_state",js:"video_state",typ:c(void 0,m("VideoMediaState"))}],"any"),PhotoMediaState:d([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"photo_id",js:"photo_id",typ:""},{json:"photo_playback_state",js:"photo_playback_state",typ:m("PhotoPlaybackState")},{json:"position_ms",js:"position_ms",typ:3.14}],"any"),VideoMediaState:d([{json:"duration_ms",js:"duration_ms",typ:3.14},{json:"position_ms",js:"position_ms",typ:3.14},{json:"video_id",js:"video_id",typ:""},{json:"video_playback_state",js:"video_playback_state",typ:m("VideoPlaybackState")}],"any"),PhotoPlaybackState:["paused","play"],VideoPlaybackState:["ended","paused","play","seeking","unknown"]};e.exports={TV2PhotoAlbumReportedStateToJson:b,toTV2PhotoAlbumReportedState:a}}),null);
__d("TV2UniqueIDs",["guid"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function i(a){var b;b=(b=h.get(a))!=null?b:0;h.set(a,b+1);return""+a+b.toString(36)}function a(){return i("id_tv2_vcr_")}function b(){return i("id_tv2_veqe_")}function d(){return i("id_tv2_toast_")}function e(){return i("id_tv2_rvr_")}function f(){return c("guid")()}g.makeTV2VideoCastRequestID=a;g.makeTV2VideoExperienceQueueEntryID=b;g.makeTV2ToastID=d;g.makeTV2RelatedVideosRequestID=e;g.makeTV2ChainingSessionID=f}),98);
__d("getTV2QueryStringCheatcodeValue",[],(function(a,b,c,d,e,f){"use strict";function b(b){try{b=new RegExp("\\b"+b+"=([^&]*)");b=b.exec(a.location.search);return!b||b[1]==null?null:b[1]}catch(a){return null}}f["default"]=b}),66);
__d("getTV2QueryStringCheatcode",["getTV2QueryStringCheatcodeValue"],(function(a,b,c,d,e,f,g){"use strict";function a(a){try{return c("getTV2QueryStringCheatcodeValue")(a)==="1"}catch(a){return!1}}g["default"]=a}),98);
__d("getTV2DebuggingEnabled",["getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("getTV2QueryStringCheatcode")("debugging")}g["default"]=a}),98);
__d("TV2CommsParseUtils",["TV2PhotoAlbumReportedState","TV2UniqueIDs","err","getTV2DebuggingEnabled"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a===null?"null":a===""?"empty string":Array.isArray(a)?"array":typeof a==="object"?"object with keys: "+JSON.stringify(Object.keys(a).sort()):typeof a}function i(a,b,d){if(typeof a!=="string"||a===""){var e=c("err")("Message parse error: %s expected JSON string, got %s",d,h(a));throw e}try{e=JSON.parse(a);return b(e,d)}catch(b){if("messageFormat"in b&&typeof b.messageFormat==="string"&&"messageParams"in b&&Array.isArray(b.messageParams))throw b;else{a=c("err")("Message parse error: %s expected JSON string, got error: %s",d,b.message);throw a}}}function j(a,b){if(typeof a!=="object"||a==null){b=c("err")("Message parse error: %s expected object, got %s",b,h(a));throw b}return a}function b(a,b){if(a==null)return null;if(typeof a!=="object"||a==null){b=c("err")("Message parse error: %s expected object, got %s",b,h(a));throw b}return a}function k(a,b){if(!Array.isArray(a)){b=c("err")("Message parse error: %s expected array, got %s",b,h(a));throw b}return a}function e(a,b){if(!Array.isArray(a)){var d=c("err")("Message parse error: %s expected array, got %s",b,h(a));throw d}return a.map(function(a){return m(a,b)})}function l(a,b){if(!Array.isArray(a)){var d=c("err")("Message parse error: %s expected array, got %s",b,h(a));throw d}return a.filter(Boolean).map(function(a){return m(a,b)})}function m(a,b){if(typeof a!=="string"||a===""){b=c("err")("Message parse error: %s expected non-empty string, got %s",b,h(a));throw b}return a}function n(a,b){if(a==null)return null;if(typeof a!=="string"||a===""){b=c("err")("Message parse error: %s expected optional non-empty string, got %s",b,h(a));throw b}return a}function o(a,b){if(a==null)return null;if(typeof a!=="string"){b=c("err")("Message parse error: %s expected optional string, got %s",b,h(a));throw b}return a}function p(a,b){if(a==null)return null;if(!(typeof a==="number"&&Number.isFinite(a)||typeof a==="string"&&a!=="")){b=c("err")("Message parse error: %s expected optional non-empty string or number, got %s",b,h(a));throw b}return a}function q(a,b){if(typeof a!=="number"||!Number.isFinite(a)){b=c("err")("Message parse error: %s expected finite number, got %s",b,h(a));throw b}return a}function f(a,b){if(a==null)return null;if(typeof a!=="number"||!Number.isFinite(a)){b=c("err")("Message parse error: %s expected optional finite number, got %s",b,h(a));throw b}return a}function r(a,b){return a==="true"||a===!0}function s(a,b,c){c===void 0&&(c=!1);return a==null?c:a===!0}function t(a,b){if(typeof a!=="boolean"){b=c("err")("Parse error: %s expected boolean, got %s",b,h(a));throw b}return a}function u(a,b){a=a!=null?j(a,b):null;if(a==null)return null;var c=m(a.uri,b+".uri"),d=q(a.width,b+".width");a=q(a.height,b+".height");return{height:a,uri:c,width:d}}function v(a,b){a=a!=null?j(a,b):null;if(a==null)return null;a=j(a.image,b+".image");a=m(a.uri,b+".image.uri");return{uri:a}}function w(a,b){if(a==null)return null;a=k(a,b);return a.map(function(a,b){return m(a,"["+b+"]")})}function x(a,b){return i(a,function(b,a){b=k(b,a);return b.map(function(b,c){c=a+"."+c;return z(j(b,c),c)})},b)}function y(a,b){return i(a,function(b,a){return z(j(b,a),a)},b)}function z(b,e){var f=m(b.access_token,e+".access_token"),g=String(p(b.app_id,e+".app_id")),h=o(b.app_version,e+".app_version"),i=u(b.background_image,e+".background_image"),j=n(b.channel_token,e+".channel_token"),k=n(b.channel_session_id,e+".channel_session_id"),q=o(b.end_cursor,e+".end_cursor")||null,r=s(b.from_next_video_query,e+".from_next_video_query"),t=s(b.is_ad,e+".is_ad"),x=w(b.dash_prefetched_representation_ids,e+".dash_prefetched_representation_ids"),y=n(b.entry_point,e+".entry_point"),z=n(b.player_origin===""?null:b.player_origin,e+".player_origin"),A=n(b.player_suborigin===""?null:b.player_suborigin,e+".player_suborigin"),B=v(b.preferred_thumbnail,e+".preferred_thumbnail"),C=n(b.video_channel_id,e+".video_channel_id"),D=m(b.root_video_id,e+".root_video_id"),E=c("getTV2DebuggingEnabled")()?/\bvideo_id=([0-9]+)\b/.exec(a.location.search):null;E=E&&E[1]?E[1]:m(b.video_id,e+".video_id");b=b.tracking_codes!=null?l(b.tracking_codes,e+".tracking_codes"):null;return{accessToken:f,appID:g,appVersion:h,backgroundImage:i,chainingEnabled:!1,channelSessionID:k,channelToken:j,dashPrefetchedRepresentationIDs:x,endCursor:q,entryPoint:y,fromNextVideoQuery:r,isAd:t,playerOrigin:z,playerSuborigin:A,preferredThumbnail:B,rootVideoID:D,startTimestamp:0,trackingCodes:b,videoCastRequestID:d("TV2UniqueIDs").makeTV2VideoCastRequestID(),videoChannelID:C,videoID:E}}function A(a,b){a=j(a,b);b=m(a.type,b+".type");switch(b){case"version_response":return a;case"version_launch_response":return a;case"experience_state":return a;case"command_result":return a;case"duration_change":return a;case"status_update":return a;case"experience_status_update":return a}b=c("err")("Parse error: %s expected response message type, got %s","parseTV2CommsFBAppOutboundMessageFromObject",h(a));throw b}function B(a){return i(a,A,".")}function C(a){a=B(a);switch(a.type){case"version_response":case"version_launch_response":case"experience_state":case"command_result":return a}a=c("err")("Parse error: %s expected response message type, got %s","parseCastingReceiverResponseMessageFromJSON",h(a));throw a}function D(a){return d("TV2PhotoAlbumReportedState").toTV2PhotoAlbumReportedState(a)}g.parseJSONString=i;g.parseObject=j;g.parseOptionalObject=b;g.parseArray=k;g.parseStringArray=e;g.parseTrackingCodes=l;g.parseNonEmptyString=m;g.parseOptionalNonEmptyString=n;g.parseOptionalString=o;g.parseNumber=q;g.parseOptionalNumber=f;g.parseOptionalStringishBoolean=r;g.parseOptionalBoolean=s;g.parseBoolean=t;g.parseVideoCastingPayloadBackgroundImage=u;g.parseVideoCastingPayloadPreferredThumbnail=v;g.parseVideoCastingPayloadListJSONAsTV2VideoCastRequestArray=x;g.parseVideoCastingPayloadJSONAsTV2VideoCastRequest=y;g.parseVideoCastingPayloadAsTV2VideoCastRequest=z;g.parseTV2CommsFBAppOutboundMessageFromJSON=B;g.parseCastingReceiverResponseMessageFromJSON=C;g.parseCastingReceiverPhotoAlbumReportedState=D}),98);
__d("fetchCtvCastPayloadQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4867407706706103"}),null);
__d("fetchCtvCastPayloadQuery.graphql",["fetchCtvCastPayloadQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},c={defaultValue:null,kind:"LocalArgument",name:"mediaParameters"},d={defaultValue:null,kind:"LocalArgument",name:"requestID"},e=[{alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Literal",name:"caster_id",value:0},{kind:"Variable",name:"media_parameters_json",variableName:"mediaParameters"},{kind:"Literal",name:"receiver_app_id",value:1614120985559993},{kind:"Variable",name:"request_id",variableName:"requestID"},{kind:"Literal",name:"uses_secure_connection",value:!0}],kind:"ScalarField",name:"ctv_cast_payload",storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"fetchCtvCastPayloadQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,d,c],kind:"Operation",name:"fetchCtvCastPayloadQuery",selections:e},params:{id:b("fetchCtvCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchCtvCastPayloadQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("fetchCtvCastPayload",["CometRelay","err","fetchCtvCastPayloadQuery.graphql","getErrorSafe","guid"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("fetchCtvCastPayloadQuery.graphql");function a(a){var b=a.castSessionID;a=a.environment;return d("CometRelay").fetchQuery(a,i,{castSessionID:b,mediaParameters:"{}",requestID:c("guid")()}).toPromise().then(function(a){if(a!=null&&a.ctv_cast_payload!=null&&typeof a.ctv_cast_payload==="string")return{payload:a.ctv_cast_payload,type:"loaded"};else return{error:c("err")("Payload was not string"),type:"error"}})["catch"](function(a){a=c("getErrorSafe")(a);return{error:a,type:"error"}})}function e(a){var b=a.albumID,e=a.castSessionID;a=a.environment;return d("CometRelay").fetchQuery(a,i,{castSessionID:e,mediaParameters:JSON.stringify({album_id:b}),requestID:c("guid")()}).toPromise().then(function(a){if(typeof (a==null?void 0:a.ctv_cast_payload)==="string")return{payload:a.ctv_cast_payload,type:"loaded"};else return{error:c("err")("Payload was not string"),type:"error"}})["catch"](function(a){a=c("getErrorSafe")(a);return{error:a,type:"error"}})}g.fetchPhotoCastPayload=a;g.fetchAlbumCastPayload=e}),98);
__d("fetchVideoCastPayloadQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4715510405214458"}),null);
__d("fetchVideoCastPayloadQuery.graphql",["fetchVideoCastPayloadQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},c={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},d={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},e={defaultValue:null,kind:"LocalArgument",name:"videoID"},f=[{kind:"Variable",name:"id",variableName:"videoID"}],g={alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSubOrigin"}],kind:"ScalarField",name:"video_cast_payload",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d,e],kind:"Fragment",metadata:null,name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:f,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[g],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,c,d,a],kind:"Operation",name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:f,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("fetchVideoCastPayloadQuery_facebookRelayOperation"),metadata:{},name:"fetchVideoCastPayloadQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("fetchVideoCastPayload",["CometRelay","err","fetchVideoCastPayloadQuery.graphql","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("fetchVideoCastPayloadQuery.graphql");function a(a){var b=a.castSessionID,e=a.environment,f=a.playerOrigin,g=a.playerSubOrigin;a=a.videoID;return d("CometRelay").fetchQuery(e,i,{castSessionID:b,playerOrigin:f,playerSubOrigin:g,videoID:a}).toPromise().then(function(a){if(a==null||a.video==null||a.video.video_cast_payload==null)return{type:"video_cannot_be_casted"};else if(typeof a.video.video_cast_payload==="string")return{payload:a.video.video_cast_payload,type:"loaded"};else return{error:c("err")("Payload was not string"),type:"error"}})["catch"](function(a){a=c("getErrorSafe")(a);return{error:a,type:"error"}})}g["default"]=a}),98);
__d("CastingController",["CastingErrorUtils","CastingState","FBLogger","Promise","SubscriptionsHandler","TV2CommsParseUtils","err","fetchCtvCastPayload","fetchVideoCastPayload","getErrorSafe","performanceAbsoluteNow","promiseDone","recoverableViolation","removeFromArray","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("FBLogger")("fbtv"),k="PhotoAlbum",l="ChannelVideo",m="Photo";a=function(){function a(a,b){var e=this;this.$5=[];this.$6=[];this.$7=[];this.$9=function(){var a=d("CastingState").initialCastingState();e.$12(a);e.$13(null)};this.$10=function(a){switch(a.type){case"status_update":e.$16(a);break;case"experience_status_update":e.$17(a);break;default:break}};this.$11=function(a,b){var f;if(d("CastingErrorUtils").isChromecastError(a,"cancel"))j.warn("ChromecastError while casting. Received ChromecastError with cancel code.");else if(((f=e.$2)==null?void 0:f.type)==="video_channel"){f=(f=e.$2)==null?void 0:f.currentVideoID;f=d("CastingErrorUtils").appendCastingMetadataToExpandedError(d("CastingErrorUtils").getCastingErrorSafe(a),babelHelpers["extends"]({},f!=null?{videoID:f}:{}));c("recoverableViolation")("Receiver error at "+b+" while playing video channel","comet_cast_sender",{error:f});c("promiseDone")(e.$4.stopCasting())}else{f=d("CastingErrorUtils").appendCastingMetadataToExpandedError(d("CastingErrorUtils").getCastingErrorSafe(a),{});a=((a=e.$2)==null?void 0:a.type)||"";c("recoverableViolation")("Receiver error at "+b+" while playing in experience "+a,"comet_cast_sender",{error:f});c("promiseDone")(e.$4.stopCasting())}};this.$1=d("CastingState").initialCastingState();this.$2=null;this.$3=b;this.$4=a;this.$8=new(c("SubscriptionsHandler"))();this.$8.addSubscriptions(this.$4.onReceiverDisconnected(this.$9),this.$4.onSessionDisconnected(this.$9),this.$4.onSessionMessage(this.$10),this.$4.onError(this.$11))}var e=a.prototype;e.destroy=function(){this.$8.release()};e.getCastingState=function(){return this.$1};e.getCastingExperienceState=function(){return this.$2};e.setCastingState=function(a){this.$1=a};e.setCastingExperienceState=function(a){this.$2=a};e.subscribeToCastingStateChange=function(a){var b=this;this.$5.push(a);return function(){c("removeFromArray")(b.$5,a)}};e.subscribeToCastingExperienceStateChange=function(a){var b=this;this.$6.push(a);return function(){c("removeFromArray")(b.$6,a)}};e.subscribeToCastingEvent=function(a){var b=this;this.$7.push(a);return function(){c("removeFromArray")(b.$7,a)}};e.startPlayVideoNow=function(a){var e=this,f=a.environment,g=a.origin,j=a.position,k=a.subOrigin,m=a.videoID;if(this.$1.isCastPending)return;this.$12(babelHelpers["extends"]({},this.$1,{isCastPending:!0}));this.$13(null);this.$14({data:{type:"cast_requested",videoID:m},timestamp:(i||(i=c("performanceAbsoluteNow")))()});c("promiseDone")((h||(h=b("Promise"))).all([c("fetchVideoCastPayload")({castSessionID:this.$3,environment:f,playerOrigin:g,playerSubOrigin:k,videoID:m}),this.$4.getSession().then(function(a){e.$12(babelHelpers["extends"]({},e.$1,{receiverIsConnected:!0}));return a})]).then(function(a){var f=a[0];a[1];if(f.type==="video_cannot_be_casted"){c("recoverableViolation")("The video is not eligible to be casted. The cast request is ignored.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("err")("video_cannot_be_casted"),{videoID:m})});return(h||(h=b("Promise"))).resolve()}else if(f.type==="error"){c("recoverableViolation")("There was a failure retrieving video cast payload. Video failed to play.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(f.error,{videoID:m})});return(h||(h=b("Promise"))).resolve()}a=e.$4.isCasting(l);a?a=e.$4.playVideoNow({position:j},f.payload):a=e.$4.startCasting(l,{position:j},f.payload);return a.then(function(){var a=babelHelpers["extends"]({},e.$1,e.$15());e.$12(a);a=d("CastingState").initialVideoChannelExperienceState();e.$13(a)})})["catch"](function(a){e.$14({data:{type:"cast_failed",videoID:m},timestamp:(i||(i=c("performanceAbsoluteNow")))()}),d("CastingErrorUtils").isChromecastError(a,"cancel")||c("recoverableViolation")("Failed to cast video.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("getErrorSafe")(a),{videoID:m})})})["finally"](function(){var a=babelHelpers["extends"]({},e.$1,{isCastPending:!1});e.$12(a)}))};e.startPhotoCasting=function(a){var e=this;a=a.environment;if(this.$1.isCastPending)return;this.$12(babelHelpers["extends"]({},this.$1,{isCastPending:!0}));this.$13(null);this.$14({data:{type:"photo_cast_requested"},timestamp:(i||(i=c("performanceAbsoluteNow")))()});c("promiseDone")((h||(h=b("Promise"))).all([d("fetchCtvCastPayload").fetchPhotoCastPayload({castSessionID:this.$3,environment:a}),this.$4.getSession().then(function(a){e.$12(babelHelpers["extends"]({},e.$1,{receiverIsConnected:!0}));return a})]).then(function(a){var f=a[0];a[1];if(f.type==="error"){c("recoverableViolation")("There was a failure retrieving photo cast payload.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(f.error,{})});return(h||(h=b("Promise"))).resolve()}a=e.$4.startCasting(m,{},f.payload);return a.then(function(){var a=babelHelpers["extends"]({},e.$1,e.$15());e.$12(a);e.$13(d("CastingState").initialPhotoExperienceState())})})["catch"](function(a){d("CastingErrorUtils").isChromecastError(a,"cancel")||c("recoverableViolation")("Failed to start photo casting session.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("getErrorSafe")(a),{})})})["finally"](function(){var a=babelHelpers["extends"]({},e.$1,{isCastPending:!1});e.$12(a)}))};e.startAlbumSlideshow=function(a){var e=this,f=a.albumID;a=a.environment;if(this.$1.isCastPending)return;this.$12(babelHelpers["extends"]({},this.$1,{isCastPending:!0}));this.$13(null);c("promiseDone")((h||(h=b("Promise"))).all([d("fetchCtvCastPayload").fetchAlbumCastPayload({albumID:f,castSessionID:this.$3,environment:a}),this.$4.getSession().then(function(a){e.$12(babelHelpers["extends"]({},e.$1,{receiverIsConnected:!0}));return a})]).then(function(a){var f=a[0];a[1];if(f.type==="album_cannot_be_casted"){c("recoverableViolation")("The album is not eligible to be casted.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("err")("album_cannot_be_casted"),{})});return(h||(h=b("Promise"))).resolve()}else if(f.type==="error"){c("recoverableViolation")("There was a failure retrieving album cast payload.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(f.error,{})});return(h||(h=b("Promise"))).resolve()}a=e.$4.startCasting(k,{},f.payload);return a.then(function(){var a=babelHelpers["extends"]({},e.$1,e.$15());e.$12(a);a=d("CastingState").initialPhotoAlbumExperienceState();e.$13(a)})})["catch"](function(a){d("CastingErrorUtils").isChromecastError(a,"cancel")||c("recoverableViolation")("Failed to cast album.","comet_cast_sender",{error:d("CastingErrorUtils").appendCastingMetadataToExpandedError(c("getErrorSafe")(a),{})})})["finally"](function(){var a=babelHelpers["extends"]({},e.$1,{isCastPending:!1});e.$12(a)}))};e.disconnect=function(){c("promiseDone")(this.$4.stopCasting())};e.play=function(){c("promiseDone")(this.$4.playVideo())};e.pause=function(){c("promiseDone")(this.$4.pauseVideo())};e.setVolume=function(a){c("promiseDone")(this.$4.setVolume(a))};e.mute=function(){c("promiseDone")(this.$4.mute())};e.unmute=function(){c("promiseDone")(this.$4.unmute())};e.seek=function(a){c("promiseDone")(this.$4.seekVideo(a))};e.showSingleMedia=function(a){var b=null;switch(a.type){case"photo":b={photo_id:a.photoID};break;case"video":b={video_id:a.videoID};break;default:a.type;return}c("promiseDone")(this.$4.showPhoto({media_parameters:b,request_id:c("uuidv4")()}))};e.playAlbumSlideshow=function(){c("promiseDone")(this.$4.playAlbumSlideshow())};e.pauseAlbumSlideshow=function(){c("promiseDone")(this.$4.pauseAlbumSlideshow())};e.nextPhotoAlbumSlideshow=function(){c("promiseDone")(this.$4.nextPhotoAlbumSlideshow())};e.previousPhotoAlbumSlideshow=function(){c("promiseDone")(this.$4.previousPhotoAlbumSlideshow())};e.$12=function(a){a!==this.$1&&(this.$1=a,this.$5.slice().forEach(function(b){b(a)}))};e.$13=function(a){a!==this.$2&&(this.$2=a,this.$6.slice().forEach(function(b){b(a)}))};e.$14=function(a){this.$7.slice().forEach(function(b){b(a)})};e.$16=function(a){var b=this.$1,d=this.$2;if(d!=null&&d.type==="video_channel"){var e=a.data.video_id,f=this.$4.getVolume()||0,g=this.$4.isMuted()||!1;e!=null&&this.$14({data:{playbackState:a.data.state,playerInfo:(a==null?void 0:a.player_info)||null,receiverInfo:(a==null?void 0:a.receiver_info)||null,type:"video_status_update",videoID:e},timestamp:(i||(i=c("performanceAbsoluteNow")))()});g={receiverIsConnected:!0,receiverIsMuted:g,receiverVolume:f};if(e==null)this.$12(babelHelpers["extends"]({},b,g)),this.$13(babelHelpers["extends"]({},d,{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null}));else{f=babelHelpers["extends"]({},b,g);this.$12(f);this.$13(babelHelpers["extends"]({},d,{currentDuration:a.data.duration!=null?a.data.duration:d.currentDuration,currentPlaybackState:a.data.state,currentPosition:a.data.position,currentVideoID:e}))}}};e.$17=function(a){var b=this.$2;if(b!=null&&b.type==="photo_album"&&a.data.name==="PhotoAlbum"){var c;a=d("TV2CommsParseUtils").parseCastingReceiverPhotoAlbumReportedState(a.data.payload);a=a.media_state;c=((c=(c=a.photo_state)==null?void 0:c.photo_id)!=null?c:(c=a.video_state)==null?void 0:c.video_id)||null;a=this.$18(a);this.$13(babelHelpers["extends"]({},b,{currentAssetID:c,currentPlaybackState:a}))}};e.$15=function(){return{receiverFriendlyName:this.$4.getFriendlyName()||null,receiverIsMuted:this.$4.isMuted()||null,receiverVolume:this.$4.getVolume()||0}};e.$18=function(a){if(a.photo_state!=null)return a.photo_state.photo_playback_state==="play"?"play":"paused";else if(a.video_state!=null)return["play","seeking"].includes(a.video_state.video_playback_state)?"play":"paused";else return null};return a}();g["default"]=a}),98);
__d("CastingEventReporter",["ConnectedTvLoggingFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=function(a){switch(a.data.type){case"cast_requested":b.logWithAvailableContext({event:"cast_requested",video_id_override:a.data.videoID});b.$5(a);break;case"photo_cast_requested":b.logWithAvailableContext({event:"photo_cast_requested"});b.$5(a);break;case"cast_failed":b.$5(a);break;case"video_status_update":b.$6(a.data.receiverInfo,a.data.playerInfo);b.$5(a);break;default:break}};this.$1=null;this.$2=null;this.$3={cast_session_id:a,is_google_cast_bg:null,third_party_app_id:null,tv_os_version:null,tv_player_instance_key:null,tv_player_version:null,tv_session_id:null,tv_web_client_revision:null}}var b=a.prototype;b.destroy=function(){this.$1!=null&&this.$1(),this.$1=null};b.bindToCastingController=function(a){this.$1=a.subscribeToCastingEvent(this.$4)};b.logWithAvailableContext=function(a){var b=this;c("ConnectedTvLoggingFalcoEvent").log(function(){return babelHelpers["extends"]({},b.$3,a)})};b.$5=function(a){var b=a.data;switch(b.type){case"cast_requested":this.$2={data:b,timestamp:a.timestamp};break;case"cast_failed":var c=this.$2;this.logWithAvailableContext({event:"cast_failed",perf_time_ms:Math.floor(c!=null?a.timestamp-c.timestamp:0),video_id_override:b.videoID});this.$2=null;break;case"video_status_update":c=this.$2;if(c==null)break;var d=c.data.videoID;b.videoID===d&&b.playbackState==="play"?(this.logWithAvailableContext({event:"cast_started",perf_time_ms:Math.floor(a.timestamp-c.timestamp)}),this.$2=null):b.videoID!==d&&(this.$2=null);break}};b.$6=function(a,b){var c=(a==null?void 0:a.third_party_app_id)||null,d=(a==null?void 0:a.cast_receiver_logger_session_id)||null,e=(a==null?void 0:a.is_google_cast_bg)||null,f=(a==null?void 0:a.os_version)||null;a=(a==null?void 0:a.web_client_revision)||null;var g=(b==null?void 0:b.player_instance_key)||null;b=(b==null?void 0:b.player_version)||null;this.$3=babelHelpers["extends"]({},this.$3,{is_google_cast_bg:e,third_party_app_id:c,tv_os_version:f,tv_player_instance_key:g,tv_player_version:b,tv_session_id:d,tv_web_client_revision:a})};return a}();g["default"]=a}),98);
__d("TV2MessageTypes",[],(function(a,b,c,d,e,f){"use strict";a="urn:x-cast:com.facebook.fb";b="urn:x-cast:com.google.cast.media";f.FBAPP_CAST_PROTOCOL_NAMESPACE=a;f.GOOGLE_CAST_MEDIA_PROTOCOL_NAMESPACE=b}),66);
__d("TV2PhotoShowRequest",[],(function(a,b,c,d,e,f){"use strict";function a(a){return k(JSON.parse(a),m("TV2PhotoShowRequest"))}function b(a){return JSON.stringify(l(a,m("TV2PhotoShowRequest")),null,2)}function g(a,b,c){c===void 0&&(c="");if(c)throw Error('Invalid value for key "'+c+'". Expected type '+JSON.stringify(a)+" but got "+JSON.stringify(b));throw Error("Invalid value "+JSON.stringify(b)+" for type "+JSON.stringify(a))}function h(a){if(a.jsonToJS===void 0){var b={};a.props.forEach(function(a){return b[a.json]={key:a.js,typ:a.typ}});a.jsonToJS=b}return a.jsonToJS}function i(a){if(a.jsToJSON===void 0){var b={};a.props.forEach(function(a){return b[a.js]={key:a.json,typ:a.typ}});a.jsToJSON=b}return a.jsToJSON}function j(a,b,c,d){d===void 0&&(d="");function e(b,a){return typeof b===typeof a?a:g(b,a,d)}function f(b,a){var d=b.length;for(var e=0;e<d;e++){var f=b[e];try{return j(a,f,c)}catch(a){}}return g(b,a)}function h(b,a){return b.indexOf(a)!==-1?a:g(b,a)}function i(b,a){return!Array.isArray(a)?g("array",a):a.map(function(a){return j(a,b,c)})}function k(a){if(a===null)return null;var b=new Date(a);return isNaN(b.valueOf())?g("Date",a):b}function l(b,d,a){if(a===null||typeof a!=="object"||Array.isArray(a))return g("object",a);var e={};Object.getOwnPropertyNames(b).forEach(function(d){var f=b[d];d=Object.prototype.hasOwnProperty.call(a,d)?a[d]:void 0;e[f.key]=j(d,f.typ,c,f.key)});Object.getOwnPropertyNames(a).forEach(function(f){Object.prototype.hasOwnProperty.call(b,f)||(e[f]=j(a[f],d,c,f))});return e}if(b==="any")return a;if(b===null)return a===null?a:g(b,a);if(b===!1)return g(b,a);while(typeof b==="object"&&b.ref!==void 0)b=n[b.ref];if(Array.isArray(b))return h(b,a);if(typeof b==="object")return Object.prototype.hasOwnProperty.call(b,"unionMembers")?f(b.unionMembers,a):Object.prototype.hasOwnProperty.call(b,"arrayItems")?i(b.arrayItems,a):Object.prototype.hasOwnProperty.call(b,"props")?l(c(b),b.additional,a):g(b,a);return b===Date&&typeof a!=="number"?k(a):e(b,a)}function k(a,b){return j(a,b,h)}function l(a,b){return j(a,b,i)}function c(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return{unionMembers:b}}function d(a,b){return{props:a,additional:b}}function m(a){return{ref:a}}var n={TV2PhotoShowRequest:d([{json:"media_parameters",js:"media_parameters",typ:m("MediaParameters")},{json:"request_id",js:"request_id",typ:""}],"any"),MediaParameters:d([{json:"photo_id",js:"photo_id",typ:c(void 0,"")},{json:"video_id",js:"video_id",typ:c(void 0,"")}],"any")};e.exports={TV2PhotoShowRequestToJson:b,toTV2PhotoShowRequest:a}}),null);
__d("CastingReceiverManager",["CastingChromecastScanner","Promise","Random","SubscriptionsHandler","TV2CommsParseUtils","TV2MessageTypes","TV2PhotoShowRequest","promiseDone","removeFromArray","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i="1.2.0";a=function(){function a(a){var b=this;this.$5=null;this.$6=null;this.$10=null;this.$11=[];this.$12=[];this.$13=[];this.$14=[];this.$15=[];this.$16=[];this.$17=[];this.$18=[];this.$19=[];this.$4=new(c("CastingChromecastScanner"))(a,d("TV2MessageTypes").FBAPP_CAST_PROTOCOL_NAMESPACE);this.$2=null;this.$1=!1;this.$3=0;this.$6=null;this.$9=new Map();this.$20=new(c("SubscriptionsHandler"))();this.$20.addSubscriptions(this.$4.onStatusChanged(function(a){var c=a.foundReceiver;b.$15.slice().forEach(function(a){a(!!c)})}),this.$4.onSessionDisconnected(function(){b.$21(),b.$14.slice().forEach(function(a){a()})}),this.$4.onSessionStarted(function(a){b.$22(a)}),this.$4.onError(function(a,c){b.$11.slice().forEach(function(b){b(a,c)})}));this.$7=this.$4.init();c("promiseDone")(this.$7.then(function(){b.$2=!0,b.$1=!0,b.$13.slice().forEach(function(a){a()})},function(a){b.$2=!1,b.$12.slice().forEach(function(b){b(a)})}))}var e=a.prototype;e.ready=function(){return this.$7};e.hasSupport=function(){return this.$2};e.hasFoundReceiver=function(){return this.$4.hasFoundReceiver()};e.isCasting=function(a){var b=!!this.$5&&this.$5.isCasting();b&&a!=null&&(b=this.$6!=null&&this.$6.indexOf(a)>=0);return b};e.getSession=function(){var a=this;return this.ready().then(function(){var b=a.$5;b!=null&&!b.isConnected()&&a.$21()}).then(function(){if(a.$5)return a.$5;a.$8||(a.$8=a.$23());return a.$8})["catch"](function(b){a.$11.slice().forEach(function(a){a(b,"CastingReceiverManager.getSession")});throw b})["finally"](function(){a.$8=null})};e.startCasting=function(a,b,c){var d=this;return this.$24(a,b,c).then(function(a){a.success?d.$6=a.target:d.$6=null})};e.stopCasting=function(){var a=this;return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.ready().then(function(){var b=a.$5;b!=null&&b.isDisconnected()&&a.$21();return a.$5}).then(function(a){return a==null?(h||(h=b("Promise"))).resolve(null):a.disconnect()}).then(function(){a.$21()})};e.playVideoNow=function(a,c){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("next_video",babelHelpers["extends"]({},a,{auto_advance:!0}),c).then(function(){})};e.skipToNextVideo=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("skip_video").then(function(){})};e.playVideo=function(a){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("play_video",{position:a||0}).then(function(){})};e.pauseVideo=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("pause_video").then(function(){})};e.seekVideo=function(a){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("seek_video",{position:a}).then(function(){})};e.showPhoto=function(a){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("show_photo",void 0,d("TV2PhotoShowRequest").TV2PhotoShowRequestToJson(a),"Photo").then(function(){})};e.stopVideo=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("stop_video").then(function(){})};e.playAlbumSlideshow=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("play_photo",void 0,void 0,"PhotoAlbum").then(function(){})};e.pauseAlbumSlideshow=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("pause_photo",void 0,void 0,"PhotoAlbum").then(function(){})};e.nextPhotoAlbumSlideshow=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("next_photo",void 0,void 0,"PhotoAlbum").then(function(){})};e.previousPhotoAlbumSlideshow=function(){return!this.isCasting()?(h||(h=b("Promise"))).resolve():this.$25("previous_photo",void 0,void 0,"PhotoAlbum").then(function(){})};e.getFriendlyName=function(){return this.$5==null?null:this.$5.getFriendlyName()};e.getVolume=function(){return this.$5==null?null:this.$5.getVolume()};e.setVolume=function(a){if(!this.isCasting())return(h||(h=b("Promise"))).resolve();return this.$5==null?(h||(h=b("Promise"))).resolve():this.$5.setVolume(a)};e.isMuted=function(){if(!this.isCasting())return null;return this.$5==null?null:this.$5.isMuted()};e.mute=function(){if(!this.isCasting())return(h||(h=b("Promise"))).resolve();return this.$5==null?(h||(h=b("Promise"))).resolve():this.$5.mute()};e.unmute=function(){if(!this.isCasting())return(h||(h=b("Promise"))).resolve();return this.$5==null?(h||(h=b("Promise"))).resolve():this.$5.unmute()};e.$26=function(){var a=this,b=this.$27();return this.$28(function(a){return{data:{client_cast_session:b,version:i},num:a,target:"version",timestamp:Date.now(),type:"version_request"}}).then(function(b){var c=b.messageNum;return a.$29(function(a){return a.response_num===c})}).then(function(a){if(a.type!=="version_response")throw c("unrecoverableViolation")('Response message was not a "version_response"',"comet_cast_sender");if(a.data==null)throw c("unrecoverableViolation")("Version response is missing data","comet_cast_sender");return a.data})};e.$24=function(a,b,d){var e=this,f=this.$27();return this.$28(function(c){return{data:{client_cast_session:f,name:a,params:b,payload:d,version:i},num:c,target:"version_launch",timestamp:Date.now(),type:"version_launch"}}).then(function(a){var b=a.messageNum;return e.$29(function(a){return a.response_num===b})}).then(function(a){if(a.type!=="version_launch_response")throw c("unrecoverableViolation")('Response message was not a "version_launch_response"',"comet_cast_sender");if(a.data==null)throw c("unrecoverableViolation")("Version launch response is missing data","comet_cast_sender");return a.data})};e.$30=function(){var a=this;return this.$6!=null?(h||(h=b("Promise"))).resolve(this.$6):this.getSession().then(function(b){return a.$26()}).then(function(b){var d=null;typeof b.currently_running_experience==="object"&&(d=b.currently_running_experience);if(d==null)throw c("unrecoverableViolation")("Session has no target","comet_cast_sender");a.$6=d;return a.$6})};e.$27=function(){var a=null;localStorage&&(a=localStorage.getItem("CastingSessionKey"));a==null&&(a=c("Random").uint32().toString(16),localStorage&&localStorage.setItem("CastingSessionKey",a));return a};e.$28=function(a){var b=this.$3+=2;return this.getSession().then(function(d){if(d==null)throw c("unrecoverableViolation")("The message can not be sent without a session","comet_cast_sender");var e=a(b);return d.sendMessage(e)}).then(function(){return{messageNum:b}})};e.$29=function(a){return this.getSession().then(function(e){if(e==null)throw c("unrecoverableViolation")("The message cannot be received without a session","comet_cast_sender");return new(h||(h=b("Promise")))(function(b,c){var f=e.onMessage(function(e){try{e=d("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(e);if(e.type==="version_response"||e.type==="version_launch_response"||e.type==="experience_state"||e.type==="command_result"){var g=!a||a(e);g&&(f.remove(),b(e))}}catch(a){f.remove(),c(a)}})})})};e.$25=function(a,b,d,e){var f=this;return this.$30().then(function(c){return f.$28(function(f){return{data:{cmd:a,name:e,params:b,payload:d},num:f,target:c,timestamp:Date.now(),type:"experience_command"}})}).then(function(a){var b=a.messageNum;return f.$29(function(a){return a.response_num===b})}).then(function(a){if(a.type!=="command_result")throw c("unrecoverableViolation")('Response message was not a "command_result"',"comet_cast_sender");return a.data})};e.$23=function(){var a=this;return this.$4.getSession().then(function(b){a.$5==null&&(a.$5=b);return a.$5})};e.$22=function(a){var b=this;this.$5=a;var e="extension";this.$8&&(e="site");c("promiseDone")(this.$26().then(function(c){var f=c.success;if(!f)return;var g=null;typeof c.currently_running_experience==="object"&&(g=c.currently_running_experience);g!=null&&(b.$6=g);b.$18.slice().forEach(function(c){c(a,{session:a,source:e,success:f,target:b.$6})});b.$10=a.onMessage(function(a){try{var c=d("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(a);b.$17.slice().forEach(function(a){a(c)})}catch(a){b.$11.slice().forEach(function(b){b(a,"CastingReceiverManager._onSessionStartedHandler")})}})}))};e.$21=function(){this.$10!=null&&(this.$10.remove(),this.$10=null);var a=this.$5;a!=null&&a.destroy();this.$5=null;this.$6=null};e.onError=function(a){var b=this.$11;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onExperienceNotSupported=function(a){var b=this.$12;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onExperienceReady=function(a){var b=this.$13;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onReceiverDisconnected=function(a){var b=this.$14;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onReceiverStatusChanged=function(a){var b=this.$15;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionDisconnected=function(a){var b=this.$16;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionMessage=function(a){var b=this.$17;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onSessionStarted=function(a){var b=this.$18;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};e.onStopView=function(a){var b=this.$19;b.push(a);return{remove:function(){c("removeFromArray")(b,a)}}};return a}();g["default"]=a}),98);
__d("CastingControllerHooks",["CastingContext","CastingController","CastingEventReporter","CastingReceiverManager","CurrentUser","ExecutionEnvironment","Promise","guid","qex","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;f=j||d("react");var k=f.useContext,l=f.useEffect,m=f.useState,n=null,o=c("qex")._("1648");function p(){if(n!=null)return n;if(o==null)throw c("unrecoverableViolation")("Use useIsCastAvailable first to check if casting feature is available in this browser.","comet_cast_sender");var a=new(c("CastingReceiverManager"))(o),b=c("guid")(),d=new(c("CastingController"))(a,b);b=new(c("CastingEventReporter"))(b);b.bindToCastingController(d);n={castingController:d,castingEventReporter:b,castingReceiverManager:a};return n}function q(){var a=r();a=a.castingReceiverManager;return a}function r(){if((i||(i=c("ExecutionEnvironment"))).canUseDOM&&c("CurrentUser").isLoggedIn())return p();throw new(h||(h=b("Promise")))(function(){})}function s(){var a=r();a=a.castingController;return a}function a(){var a=q(),b=k(d("CastingContext").SetCastingControllerContext),c=m(!1),e=c[0],f=c[1];c=m(!1);var g=c[0],h=c[1];l(function(){var b=a.onExperienceReady(function(){f(a.hasSupport()||!1)});f(a.hasSupport()||!1);return function(){return b.remove()}},[a]);l(function(){var b=a.onReceiverStatusChanged(function(){h(a.hasFoundReceiver()||!1)});h(a.hasFoundReceiver()||!1);return function(){return b.remove()}},[a]);if(o==null)return!1;if(b==null)return!1;if(!e)return!1;return!g?!1:!0}function e(){var a=s(),b=k(d("CastingContext").SetCastingControllerContext);if(b==null)throw c("unrecoverableViolation")("Casting has to be initialized inside CastingProvider.","comet_cast_sender");l(function(){b(a)},[b,a])}g.useCastingController=s;g.useIsCastAvailable=a;g.useCastingInitializeIfNecessary=e}),98);
__d("CometVideoPictureInPictureManager.react",["CometSetWatchAndScrollVideoContext","CometVideoPictureInPictureManagerContext","CometWatchAndScrollVideoContext","XCometWatchControllerRouteBuilder","clearTimeout","gkx","react","requireDeferred","setTimeout","useCometRouterDispatcher","useMinifiedProductAttribution"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useContext,l=b.useEffect,m=b.useMemo,n=b.useRef,o=b.useState,p=c("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("CometVideoPictureInPictureManager.react"),q=c("gkx")("22889"),r=50;e=["286211568997787","214604021960500","108677131037"];var s=window.document.pictureInPictureEnabled;function a(a){var b=a.children;a=a.isPipEnabled;var e=c("useCometRouterDispatcher")(),f=a;a=o(null);var g=a[0],h=a[1];a=o(!1);var t=a[0],u=a[1];a=o(!1);var v=a[0],w=a[1],x=n(!1);a=j(function(a){x.current=a},[]);var y=m(function(){return{hasNextChainedVideo:v,isPipEnabled:f,setHasNextChainedVideo:w,setSkippedFromPipPlayer:u,skippedFromPipPlayer:t}},[t,u,v,w,f]),z=o(null),A=z[0],B=z[1],C=k(c("CometWatchAndScrollVideoContext")),D=k(c("CometSetWatchAndScrollVideoContext")),E=n(null),F=n(null),G=c("useMinifiedProductAttribution")(),H=j(function(a){a===void 0&&(a=null),p.onReady(function(b){b.log({attribution_id_v2:G,click_point:a,event:"click"})})},[]),I=j(function(){var a=C==null?void 0:C.videoID,b=C==null?void 0:C.videoUrl;if(a!=null&&b!=null){var d=C==null?void 0:C.routeTracePolicy,f=C==null?void 0:C.subOrigin;b=q?b:c("XCometWatchControllerRouteBuilder").buildURL({v:a});e&&(e.go(b,{passthroughProps:{portableVideoID:A,portalingRouteTracePolicy:d,portalingSubOrigin:f}}),D(null))}},[e,C,A,D]),J=j(function(){g!=null&&(E.current=c("setTimeout")(function(){var a=g.getCurrentState(),b=a.lastPauseReason;a=a.paused;x.current||(f&&(a===!1||a===!0&&b==="product_initiated")?(I(),H("control_pip_player_return_to_tab")):window.document.pictureInPictureElement===null&&(D(null),H("control_pip_player_close")))},r))},[g,f,I,D,H]),K=j(function(){g!=null&&(x.current||(window.navigator.mediaSession.setActionHandler("play",null),window.navigator.mediaSession.setActionHandler("pause",null),window.navigator.mediaSession.setActionHandler("pause",function(){g.pause("product_initiated")})),v||window.navigator.mediaSession.setActionHandler("nexttrack",null))},[g,v,H,a]),L=j(function(a){a.requestPictureInPicture();R(!1);a=a.internal_getVideoElement();F.current=a==null?void 0:a.currentSrc},[]),M=j(function(){if(g!=null){var a=g.getIsDesktopPictureInPicture();if(a){g.exitPictureInPicture();return}L(g)}},[L,g]),N=j(function(a){h(a)},[h]),O=j(function(a){a!=null&&B(a)},[B]);z=m(function(){return{openPipPlayer:M,setController:N,setPipPortableVideoID:O}},[M,N,O]);var P=n(!1);a=o(!1);var Q=a[0],R=a[1];l(function(){var a=null;if(s&&g!=null&&window.document.pictureInPictureElement){var b=g.internal_getVideoElement();b=b==null?void 0:b.currentSrc;var c=!1,d=!1;a=g.subscribe(function(){var a=g.getCurrentState(),b=a.playing;a=a.isDesktopPictureInPicture;!c&&b&&P.current&&!x.current&&(P.current=!1,R(!0));d&&!a&&J();!d&&a&&K();c=b;d=a});b!==F.current?!Q?(g.play("user_initiated"),P.current=!0):L(g):f&&(K(),F.current=b)}return function(){a!=null&&a.remove()}},[L,g,M,v,K,J,f,Q]);l(function(){return function(){E.current!=null&&(c("clearTimeout")(E.current),E.current=null)}},[]);return i.jsx(d("CometVideoPictureInPictureManagerContext").CometVideoPictureInPictureManagerContext.Provider,{value:y,children:i.jsx(d("CometVideoPictureInPictureManagerContext").CometVideoPictureInPictureManagerAPIContext.Provider,{value:z,children:b})})}a.displayName=a.name+" [from "+f.id+"]";g.EXCLUDED_PROVIDERS=e;g.CometVideoPictureInPictureManager=a}),98);
__d("useLiveCostreamerTagSubscription_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8325077824286803"}),null);
__d("useLiveCostreamerTagSubscription.graphql",["VideoPlayerRelay_video$normalization.graphql","useLiveCostreamerTagSubscription_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e=[d],f={alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"tagged_page",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:e,storageKey:null}],storageKey:null},g={args:null,documentName:"useLiveCostreamerTagSubscription",fragmentName:"VideoPlayerCostreamingControl_video",fragmentPropName:"video",kind:"ModuleImport"};e={alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[d,{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:e,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],storageKey:null};var h={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useLiveCostreamerTagSubscription",selections:[{alias:null,args:c,concreteType:"LiveVideoTagSubscribeResponsePayload",kind:"LinkedField",name:"live_video_tag_subscribe",plural:!1,selections:[f,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"tagged_video",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[g],storageKey:null},{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometVideoPlayerCostreamingThumbnailRowInner_video"}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},e],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useLiveCostreamerTagSubscription",selections:[{alias:null,args:c,concreteType:"LiveVideoTagSubscribeResponsePayload",kind:"LinkedField",name:"live_video_tag_subscribe",plural:!1,selections:[f,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"tagged_video",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[g,d],storageKey:null},{alias:null,args:null,concreteType:"VideoLiveCostreamingStreamersConnection",kind:"LinkedField",name:"live_costreaming_streamers",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"currently_live_video",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_channel",plural:!1,selections:[h,d],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:i,storageKey:null},d],storageKey:null},{args:null,fragment:b("VideoPlayerRelay_video$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,concreteType:"VideoThumbnail",kind:"LinkedField",name:"preferred_thumbnail",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_preview_payload",storageKey:null},d],storageKey:null}],storageKey:null},d],storageKey:null}],storageKey:null}],storageKey:null},e],storageKey:null}]},params:{id:b("useLiveCostreamerTagSubscription_facebookRelayOperation"),metadata:{subscriptionName:"live_video_tag_subscribe"},name:"useLiveCostreamerTagSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("useLiveCostreamerTagSubscription.react",["CometRelay","react","useLiveCostreamerTagSubscription.graphql","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo;function a(a,e,f){var g=h!==void 0?h:h=b("useLiveCostreamerTagSubscription.graphql"),i=j(function(){return{onNext:f,subscription:g,updater:function(a){var b;a=a.getRootField("live_video_tag_subscribe");b=a==null?void 0:(b=a.getLinkedRecord("tagged_page"))==null?void 0:b.getLinkedRecord("currently_live_video");a=a==null?void 0:a.getLinkedRecord("tagged_video");b==null&&a!=null&&a.setValue(null,"if_viewer_can_see_costreaming_tools")},variables:{input:{client_subscription_id:c("uuidv4")(),tagged_page_id:a,tagged_video_id:e}}}},[f,a,g,e]);d("CometRelay").useSubscription(i)}g["default"]=a}),98);
__d("LiveCostreamerTagSubscription.react",["useLiveCostreamerTagSubscription.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.onNext,d=a.pageID;a=a.videoID;c("useLiveCostreamerTagSubscription.react")(d,a,b);return null}g["default"]=a}),98);
__d("LiveVideoLatencyMenuContextProvider_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LiveVideoLatencyMenuContextProvider_video",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_latency_menu",plural:!1,selections:[{args:null,documentName:"LiveVideoLatencyMenuContextProvider_video_if_viewer_can_use_latency_menu",fragmentName:"VideoPlayerSettingsMenuLatencyPane_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},action:"NONE",path:"if_viewer_can_use_latency_menu"},{kind:"RequiredField",field:{alias:"if_viewer_can_use_latency_menu_toggle",args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_latency_menu",plural:!1,selections:[{args:null,documentName:"LiveVideoLatencyMenuContextProvider_video_if_viewer_can_use_latency_menu_toggle",fragmentName:"VideoPlayerSettingsMenuLatencyPaneToggle_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},action:"NONE",path:"if_viewer_can_use_latency_menu_toggle"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("LiveVideoLatencyMenu.react",["fbt","CometRelay","LiveVideoLatencyMenuContextProvider_video.graphql","VideoPlayerHooks","react","recoverableViolation","useSelectedLatencySetting"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react")),m=j.useMemo,n=h._(/*BTDS*/"__JHASH__bTzlM2_yLZR__JHASH__"),o=[q("low"),q("normal")],p=l.createContext({liveVideoLatencyMenuPaneMatchPointer:null,liveVideoLatencyMenuPaneToggleMatchPointer:null});function q(a){switch(a){case"low":return{description:h._(/*BTDS*/"__JHASH__Wdbuy3igQMj__JHASH__"),title:h._(/*BTDS*/"__JHASH__irPLSyzsox6__JHASH__"),value:a};case"normal":return{description:h._(/*BTDS*/"__JHASH__dcU5TOtw40F__JHASH__"),title:h._(/*BTDS*/"__JHASH__PL-fSmiQjO2__JHASH__"),value:a};case"ultra-low":return{description:h._(/*BTDS*/"__JHASH__99h8y4YbicW__JHASH__"),title:h._(/*BTDS*/"__JHASH__U6zABNuSUIw__JHASH__"),value:a};default:a;c("recoverableViolation")("Setting "+a+" is not valid","gaming_video");return{description:h._(/*BTDS*/"__JHASH__TWLERIjePxH__JHASH__"),title:h._(/*BTDS*/"__JHASH__TWLERIjePxH__JHASH__"),value:a}}}function a(a,b){var e=(k||(k=d("VideoPlayerHooks"))).useController(),f=k.useLatencyLevel();a=c("useSelectedLatencySetting")(a,b);a[0];var g=a[1];b=q(f);a=b.title;b=function(a){f!==a&&(g(a),e.setLatencyLevel(a))};return{selectedLatencySetting:f,selectedLatencySettingTitle:a,setSelectedLatencySetting:b}}var r=i!==void 0?i:i=b("LiveVideoLatencyMenuContextProvider_video.graphql");function e(a){var b=a.children;a=a.video;var c=d("CometRelay").useFragment(r,a);a=m(function(){return c==null?{liveVideoLatencyMenuPaneMatchPointer:null,liveVideoLatencyMenuPaneToggleMatchPointer:null}:{liveVideoLatencyMenuPaneMatchPointer:c.if_viewer_can_use_latency_menu,liveVideoLatencyMenuPaneToggleMatchPointer:c.if_viewer_can_use_latency_menu_toggle}},[c]);return l.jsx(p.Provider,{value:a,children:b})}e.displayName=e.name+" [from "+f.id+"]";g.LATENCY_MENU_TITLE=n;g.LATENCY_SETTING_OPTIONS=o;g.LiveVideoLatencyMenuContext=p;g.getLiveVideoLatencySettingToInfoMapping=q;g.useLatencySettingState=a;g.LiveVideoLatencyMenuContextProvider=e}),226);
__d("VideoPlayerAudioTrackUtils",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";var i=function(a,b){if(b==null)return void 0;a=String(a).substring(0,2);try{return new Intl.DisplayNames([a],{type:"language"}).of(b)}catch(a){return void 0}};a=function(a,b){if(a==null)return h._(/*BTDS*/"__JHASH__hdHWHqmjZsu__JHASH__");b=i(b,a.lang);b=(b=b)!=null?b:h._(/*BTDS*/"__JHASH__hdHWHqmjZsu__JHASH__");var c=null;a.role==="dub"?c=h._(/*BTDS*/"__JHASH__o78TwtXYLzL__JHASH__"):(a==null?void 0:a.role)==="description"&&(c=h._(/*BTDS*/"__JHASH__RD4iOZMCCPX__JHASH__"));return c!=null?b.toString()+" - "+c.toString():b};g.getAudioTrackLabelLocalized=a}),226);
__d("VideoPlayerCaptionsControl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerCaptionsControl_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{args:null,kind:"FragmentSpread",name:"useVideoPlayerAvailableCaptionsLocalesFromRelay_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerCaptionsMenu.react",["fbt","$InternalEnum","CometKeys","VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react","VideoPlayerCaptionsMenuCaptionsDisplayPane.react","VideoPlayerCaptionsMenuMainPane.react","VideoPlayerHooks","react","useLayerKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));e=i;var l=e.useCallback,m=e.useEffect,n=e.useMemo,o=e.useRef,p=e.useState,q=b("$InternalEnum")({CAPTIONS_BG_COLOR:"captionsBackgroundColor",CAPTIONS_BG_OPACITY:"captionsBackgroundOpacity",CAPTIONS_DISPLAY_MAIN:"captionsDisplayMain",CAPTIONS_TEXT_COLOR:"captionsTextColor",CAPTIONS_TEXT_SIZE:"captionsTextSize",CAPTIONS_MAIN:"captionsMain"});function a(a){var b=a.availableCaptionsLocales,e=a.captionsListExpanded,f=a.children;f=f===void 0?null:f;var g=a.onClose,i=a.onPressLog,r=a.selectedCaptionsLocale,s=a.setCaptionsListExpanded;a=a.setSelectedCaptionsLocale;var t=(j||(j=d("VideoPlayerHooks"))).useCaptionDisplayStyle(),u=p(q.CAPTIONS_MAIN),v=u[0];u=u[1];var w=o(null),x=o(null),y=l(function(a){w.current&&x.current&&a.target instanceof HTMLElement&&document.contains(a.target)&&!w.current.contains(a.target)&&x.current.contains(a.target)&&g()},[g]);m(function(){document.addEventListener("click",y);return function(){document.removeEventListener("click",y)}},[y]);var z=n(function(){return[{command:{key:c("CometKeys").ESCAPE},description:h._(/*BTDS*/"__JHASH__IJWa3i0ku9h__JHASH__"),handler:function(){g()}}]},[g]);c("useLayerKeyCommands")(z);z=k.jsx(d("VideoPlayerCaptionsMenuMainPane.react").VideoPlayerCaptionsMenuMainPane,{availableCaptionsLocales:b,captionsListExpanded:e,onPressLog:i,selectedCaptionsLocale:r,setCaptionsListExpanded:s,setPane:u,setSelectedCaptionsLocale:a,children:f});switch(v){case q.CAPTIONS_MAIN:break;case q.CAPTIONS_DISPLAY_MAIN:z=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").VideoPlayerCaptionsMenuCaptionsDisplayMainPane,{currentCaptionsDisplay:t,onPressLog:i,setPane:u});break;case q.CAPTIONS_BG_COLOR:z=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsBackgroundColor",currentCaptionsDisplay:t,onPressLog:i,setPane:u});break;case q.CAPTIONS_BG_OPACITY:z=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsBackgroundOpacity",currentCaptionsDisplay:t,onPressLog:i,setPane:u});break;case q.CAPTIONS_TEXT_SIZE:z=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsTextSize",currentCaptionsDisplay:t,setPane:u});break;case q.CAPTIONS_TEXT_COLOR:z=k.jsx(d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react").VideoPlayerCaptionsMenuCaptionsDisplayPane,{captionsDisplayOption:"captionsTextColor",currentCaptionsDisplay:t,onPressLog:i,setPane:u});break}return k.jsxs(k.Fragment,{children:[k.jsx("div",{ref:w,children:z}),k.jsx("div",babelHelpers["extends"]({className:"x5yr21d x17qophe xixxii4 x13vifvy xh8yej3 x8knxv4"},{"data-testid":void 0,ref:x}))]})}a.displayName=a.name+" [from "+f.id+"]";g.VideoPlayerCaptionsMenuPaneType=q;g.VideoPlayerCaptionsMenu=a}),226);
__d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerCaptionsMenu.react","focusScopeQueries","react","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useCallback,m={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingEnd:"x4uap5",paddingBottom:"xwib8y2",paddingStart:"xkhd6sd",textAlign:"x1yc453h",width:"xafpxmx",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}},n={captionsBackgroundColor:{Black:"BLACK",Blue:"BLUE",Cyan:"CYAN",Green:"GREEN",Magenta:"MAGENTA",Red:"RED",White:"WHITE",Yellow:"YELLOW"},captionsBackgroundOpacity:{"0%":"TRANSPARENT","25%":"LIGHT","45%":"DEFAULT","75%":"DARK","100%":"OPAQUE"},captionsTextColor:{Black:"BLACK",Blue:"BLUE",Cyan:"CYAN",Green:"GREEN",Magenta:"MAGENTA",Red:"RED",White:"WHITE",Yellow:"YELLOW"},captionsTextSize:{"(50%)":"SMALLEST","(75%)":"SMALL","(100%)":"DEFAULT","(125%)":"MEDIUM","(150%)":"BIG","(175%)":"BIGGER","(200%)":"BIGGEST"}},o={"Background Color":{ftbLabel:h._(/*BTDS*/"__JHASH___JkqGHU6s6W__JHASH__"),name:"captionsBackgroundColor"},"Background Opacity":{ftbLabel:h._(/*BTDS*/"__JHASH__4Nh73Z-aeW___JHASH__"),name:"captionsBackgroundOpacity"},"Text Color":{ftbLabel:h._(/*BTDS*/"__JHASH__M3skPlj7iF___JHASH__"),name:"captionsTextColor"},"Text Size":{ftbLabel:h._(/*BTDS*/"__JHASH__U5jCK0KgfGO__JHASH__"),name:"captionsTextSize"}},p={Black:h._(/*BTDS*/"__JHASH__A4ukiml3pYS__JHASH__"),Blue:h._(/*BTDS*/"__JHASH__IpnzJ1LIfYB__JHASH__"),Cyan:h._(/*BTDS*/"__JHASH__o9RFd4r9BR3__JHASH__"),Green:h._(/*BTDS*/"__JHASH__oOxxTNBullx__JHASH__"),Magenta:h._(/*BTDS*/"__JHASH__Ld9joX9Wzr7__JHASH__"),Red:h._(/*BTDS*/"__JHASH__4r3EzkN_IgK__JHASH__"),White:h._(/*BTDS*/"__JHASH__i_Mq3bSjDEc__JHASH__"),Yellow:h._(/*BTDS*/"__JHASH__M1JGv_1IGWD__JHASH__")};function q(a){var b=null,c=null;switch(a){case"(50%)":b=h._(/*BTDS*/"__JHASH__jOdOc9Kt75y__JHASH__");c="X-";break;case"(75%)":b=h._(/*BTDS*/"__JHASH__jOdOc9Kt75y__JHASH__");break;case"(125%)":b=h._(/*BTDS*/"__JHASH__W4ixrK_j61o__JHASH__");break;case"(150%)":b=h._(/*BTDS*/"__JHASH__W4ixrK_j61o__JHASH__");c="X-";break;case"(175%)":b=h._(/*BTDS*/"__JHASH__W4ixrK_j61o__JHASH__");c="XX-";break;case"(200%)":b=h._(/*BTDS*/"__JHASH__W4ixrK_j61o__JHASH__");c="XXX-";break;case"(100%)":b=h._(/*BTDS*/"__JHASH__a7N3n7jAB1i__JHASH__")}return k.jsxs("span",{children:[c!=null&&c,b,a]})}q.displayName=q.name+" [from "+f.id+"]";var r={captionsBackgroundColor:d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_BG_COLOR,captionsBackgroundOpacity:d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_BG_OPACITY,captionsTextColor:d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_TEXT_COLOR,captionsTextSize:d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_TEXT_SIZE};function s(a){var b=a.onPressLog,d=a.option,e=a.optionVal,f=a.setPane;c("vulture")("15Ia2j5IFIY");var g=o[d].name;a=l(function(){f(r[g]),b&&b("captions_display_main_menu",d)},[g,f,d,b]);var h=null;switch(g){case"captionsTextColor":case"captionsBackgroundColor":h=p[e];break;default:h=e;break}var j=d.replace(" ","");j="video-player-captions-menu-captions-display-main-"+j;return k.jsxs(c("CometPressable.react"),{onPress:a,xstyle:m.menuOptionRow,children:[k.jsxs("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu x1nxh6w3 x1s688f x1uncgzr"},{children:[o[d].ftbLabel,k.jsx("div",babelHelpers["extends"]({className:"x1nxh6w3 xo1l8bm"},{"data-testid":void 0,children:g==="captionsTextSize"?q(e):h}))]})),k.jsx("div",babelHelpers["extends"]({className:"x1rg5ohu"},{children:k.jsx("div",babelHelpers["extends"]({className:"x1lliihq"},{children:k.jsx("div",{style:{display:"table-cell"},children:k.jsx(c("CometImage.react"),{src:i("480588")})})}))}))]})}s.displayName=s.name+" [from "+f.id+"]";function a(a){var b=a.currentCaptionsDisplay,e=a.onPressLog,f=a.setPane;c("vulture")("Zgb2rUTJKX");a=l(function(){f(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_MAIN)},[f]);return k.jsxs(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:[k.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},{children:k.jsxs(c("CometPressable.react"),{onPress:a,xstyle:m.pressableOption,children:[k.jsx("span",babelHelpers["extends"]({className:"x6s0dn4 x3nfvp2"},{children:k.jsx(c("CometImage.react"),{src:i("480580")})})),k.jsx("span",babelHelpers["extends"]({className:"x1nxh6w3 x1s688f x16n37ib"},{children:h._(/*BTDS*/"__JHASH__JdYTKKzsT-t__JHASH__")}))]})})),k.jsx("div",babelHelpers["extends"]({className:"x1anpbxc"},{"data-testid":void 0,children:Object.keys(o).map(function(a){var c=o[a].name,d=n[c];d=Object.fromEntries(Object.entries(d).map(function(a){var b=a[0];a=a[1];return[a,b]}));d=b!=null?d[b[c]]:"";return k.jsx(s,{onPressLog:e,option:a,optionVal:d,setPane:f},a)})}))]})}a.displayName=a.name+" [from "+f.id+"]";g.captionsDisplayOptionsMap=n;g.colorsFBTMap=p;g.getFontSizeDivWithFBTLabel=q;g.VideoPlayerCaptionsMenuCaptionsDisplayMainPane=a}),226);
__d("VideoPlayerCaptionsSettingMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6709986205720272"}),null);
__d("VideoPlayerCaptionsSettingMutation.graphql",["VideoPlayerCaptionsSettingMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VideoPlayerCaptionsSettingResponsePayload",kind:"LinkedField",name:"video_player_captions_setting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VideoPlayerCaptionsSettingMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VideoPlayerCaptionsSettingMutation",selections:c},params:{id:b("VideoPlayerCaptionsSettingMutation_facebookRelayOperation"),metadata:{},name:"VideoPlayerCaptionsSettingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VideoPlayerCaptionsSettingMutation",["CometRelay","VideoPlayerCaptionsSettingMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("VideoPlayerCaptionsSettingMutation.graphql");function a(a,b,c){return d("CometRelay").commitMutation(a,{mutation:i,onCompleted:c&&c.onCompleted,onError:c&&c.onError,optimisticResponse:{video_captions_setting:{success:!0}},variables:{input:{captions_background_color:b.captions_background_color,captions_background_opacity:b.captions_background_opacity,captions_text_color:b.captions_text_color,captions_text_size:b.captions_text_size,client_mutation_id:"www_captions_settings"}}})}g.commit=a}),98);
__d("VideoPlayerCaptionsMenuCaptionsDisplayPane.react",["fbt","ix","CometImage.react","CometPressable.react","CometRelay","FDSIcon.react","FocusRegion.react","VideoPlayerCaptionsMenu.react","VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react","VideoPlayerCaptionsSettingMutation","VideoPlayerHooks","fbicon","focusScopeQueries","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||(j=d("react")),m=j.useCallback,n={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingEnd:"x4uap5",paddingBottom:"xwib8y2",paddingStart:"xkhd6sd",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0}},o={captionsBackgroundColor:h._(/*BTDS*/"__JHASH___JkqGHU6s6W__JHASH__"),captionsBackgroundOpacity:h._(/*BTDS*/"__JHASH__4Nh73Z-aeW___JHASH__"),captionsTextColor:h._(/*BTDS*/"__JHASH__M3skPlj7iF___JHASH__"),captionsTextSize:h._(/*BTDS*/"__JHASH__U5jCK0KgfGO__JHASH__")},p=function(a){return{captions_background_color:a.captionsBackgroundColor,captions_background_opacity:a.captionsBackgroundOpacity,captions_text_color:a.captionsTextColor,captions_text_size:a.captionsTextSize}};function q(a){var b=a.captionsDisplayOption,e=a.currentCaptionsDisplay,f=a.onPressLog,g=a.option,h=a.selected,j=a.setPane,o=(k||(k=d("VideoPlayerHooks"))).useController();a=h;var q=d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").captionsDisplayOptionsMap[b];h=null;switch(b){case"captionsTextColor":case"captionsBackgroundColor":h=d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").colorsFBTMap[g];break;default:h=g}var r="video-player-captions-menu-captions-display-pane-"+b+"-"+g;r=m(function(){a=!0;if(e!=null){e[b]=q[g];o.setCaptionsDisplayStyle(e);var c=p(e);d("VideoPlayerCaptionsSettingMutation").commit(s,c)}j(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN);f&&f(b)},[e,q,b,o,g]);var s=d("CometRelay").useRelayEnvironment();return l.jsxs(c("CometPressable.react"),{onPress:r,testid:void 0,xstyle:n.menuOptionRow,children:[l.jsx("div",babelHelpers["extends"]({className:"x1rg5ohu x1849jeq"},{children:a&&l.jsx("div",{"data-testid":void 0,children:l.jsx(c("FDSIcon.react"),{color:"white",icon:d("fbicon")._(i("477813"),16)})})})),b==="captionsTextSize"?d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").getFontSizeDivWithFBTLabel(g):l.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu"},{children:h}))]})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=a.captionsDisplayOption,e=a.currentCaptionsDisplay,f=a.onPressLog,g=a.setPane;a=o[b];var h=d("VideoPlayerCaptionsMenuCaptionsDisplayMainPane.react").captionsDisplayOptionsMap[b],j=e!=null?e[b]:null,k=m(function(){g(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN)},[g]),p="video-player-captions-menu-captions-display-pane-"+b;return l.jsxs(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:[l.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1nxh6w3 x1s688f x1lku1pv"},{children:l.jsxs(c("CometPressable.react"),{onPress:k,testid:void 0,xstyle:n.pressableOption,children:[l.jsx("span",babelHelpers["extends"]({className:"x6s0dn4 x3nfvp2 x1849jeq"},{children:l.jsx(c("CometImage.react"),{src:i("480580")})})),a]})})),l.jsx("div",babelHelpers["extends"]({className:"x1nxh6w3 xo1l8bm x1anpbxc"},{"data-testid":void 0,children:Object.keys(h).map(function(a){var c=j===h[a];return l.jsx(q,{captionsDisplayOption:b,currentCaptionsDisplay:e,onPressLog:f,option:a,selected:c,setPane:g},a)})}))]})}a.displayName=a.name+" [from "+f.id+"]";g.VideoPlayerCaptionsMenuCaptionsDisplayPane=a}),226);
__d("VideoPlayerCaptionsMenuMainPane.react",["fbt","ix","CometPressable.react","CometScrollableArea.react","FDSIcon.react","FocusRegion.react","VideoPlayerCaptionsMenuTopBar.react","VideoPlayerHooks","fbicon","focusScopeQueries","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||(j=d("react")),m=j.useEffect,n={menuOptionRow:{color:"x14ctfv",display:"x1lliihq",fontSize:"x1nxh6w3",fontWeight:"xo1l8bm",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"x1y1aw1k",paddingEnd:"x4uap5",paddingBottom:"xwib8y2",paddingStart:"xkhd6sd",textAlign:"x1yc453h",":hover_backgroundColor":"xx8nu07",$$css:!0}},o=5;function p(a){var b,e=a.captions,f=a.captionsVisible,g=a.controller,j=a.focused,m=a.onPressLog,o=a.setSelectedCaptionsLocale;a=(k||(k=d("VideoPlayerHooks"))).useIsVideoBroadcast();a=e.localizedCreationMethod!=null||a;b="video-player-captions-menu-language-list-item-"+((b=e.localizedLanguage)!=null?b:"");return l.jsxs(c("CometPressable.react"),{onPress:function(){var a;e.locale!=null&&o(e.locale);f||g.setCaptionsVisible(!0);e.captionsUrl!=null&&g.setCaptionsUrl(e.captionsUrl);m&&m("captions_language_selector",(a=e.localizedLanguage)!=null?a:"")},testid:void 0,xstyle:n.menuOptionRow,children:[l.jsx("div",babelHelpers["extends"]({className:"x1rg5ohu xw4jnvo"},{children:j&&l.jsx("div",{"data-testid":void 0,children:l.jsx(c("FDSIcon.react"),{color:"white",icon:d("fbicon")._(i("477813"),16)})})})),l.jsxs("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu x17adc0v xzjbwwf"},{children:[e.localizedLanguage,(b=e.localizedCountry)!=null?b:null,!a&&h._(/*BTDS*/"__JHASH__61S-FIBVxhC__JHASH__")]}))]})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.availableCaptionsLocales,e=a.captionsListExpanded,f=a.children,g=a.onPressLog,j=a.selectedCaptionsLocale,q=a.setCaptionsListExpanded,r=a.setPane,s=a.setSelectedCaptionsLocale,t=(k||(k=d("VideoPlayerHooks"))).useController(),u=k.useCaptionsVisible();a=b!=null?b.length:0;m(function(){u||s("")},[u,s]);return b==null?null:l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:l.jsxs("div",{"data-testid":void 0,children:[l.jsx(c("VideoPlayerCaptionsMenuTopBar.react"),{availableCaptionsLocales:b,onPressLog:g,setPane:r}),f,l.jsx(c("CometScrollableArea.react"),{hideScrollbar:!0,children:l.jsxs("div",babelHelpers["extends"]({className:"x1anpbxc x15eivr9"},{"data-testid":void 0,children:[l.jsxs(c("CometPressable.react"),{onPress:function(){s(""),t.setCaptionsVisible(!1)},xstyle:n.menuOptionRow,children:[l.jsx("div",babelHelpers["extends"]({className:"x1rg5ohu xw4jnvo"},{children:j===""&&l.jsx(c("FDSIcon.react"),{color:"white",icon:d("fbicon")._(i("477813"),16)})})),l.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu x17adc0v xzjbwwf"},{children:h._(/*BTDS*/"__JHASH__e5FM_cV1hlu__JHASH__")}))]}),b.slice(0,4).map(function(a){var b=a.locale===j;return a.localizedLanguage!=null?l.jsx(p,{captions:a,captionsVisible:u,controller:t,focused:b,onPressLog:g,setSelectedCaptionsLocale:s},a.locale):null}),a>=o&&!e&&l.jsx(c("CometPressable.react"),{onPress:function(){q(!0)},xstyle:n.menuOptionRow,children:l.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu x1iedhe"},{children:h._(/*BTDS*/"__JHASH__OIavC7F1dep__JHASH__")}))}),e&&b.slice(4).map(function(a){var b=a.locale===j;return a.localizedLanguage!=null?l.jsx(p,{captions:a,captionsVisible:u,controller:t,focused:b,setSelectedCaptionsLocale:s},a.locale):null}),e&&l.jsx(c("CometPressable.react"),{onPress:function(){q(!1)},xstyle:n.menuOptionRow,children:l.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1rg5ohu x1iedhe"},{children:h._(/*BTDS*/"__JHASH__ety7kKeVKSL__JHASH__")}))})]}))})]})})}a.displayName=a.name+" [from "+f.id+"]";g.VideoPlayerCaptionsMenuMainPane=a}),226);
__d("VideoPlayerCaptionsMenuTopBar.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerCaptionsMenu.react","VideoPlayerHooks","gkx","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||(j=d("react")),m=j.useCallback,n={pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=a.availableCaptionsLocales,e=a.onPressLog,f=a.setPane;a=m(function(){f(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenuPaneType.CAPTIONS_DISPLAY_MAIN),e&&e("captions_main_menu_top_bar")},[f,e]);var g=(k||(k=d("VideoPlayerHooks"))).useIsLive(),j=k.useIsVideoBroadcast();g=c("gkx")("6993")?j&&!g:j;j=(b==null?void 0:b.some(function(a){return a.localizedCreationMethod!=null}))||g;return l.jsxs("div",{children:[l.jsx("div",babelHelpers["extends"]({className:"x14ctfv x78zum5 x1jzhcrs"},{children:l.jsxs(c("CometPressable.react"),{onPress:a,testid:void 0,xstyle:n.pressableOption,children:[l.jsx("div",babelHelpers["extends"]({className:"x1nxh6w3 x1s688f"},{children:h._(/*BTDS*/"__JHASH__LFEdNCYpX2s__JHASH__")})),l.jsxs("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x3nfvp2 x1bhwmg6 x13a6bvl x8zvzrc"},{children:[l.jsx("span",babelHelpers["extends"]({className:"x3nfvp2"},{children:l.jsx(c("CometImage.react"),{src:i("492300")})})),l.jsx("div",babelHelpers["extends"]({className:"x3nfvp2 xo1l8bm x1mnrxsn"},{children:h._(/*BTDS*/"__JHASH__H44BsQl2goa__JHASH__")}))]}))]})})),j!=null&&j&&l.jsx("div",babelHelpers["extends"]({className:"x1nxh6w3 x1k4tb9n"},{children:h._(/*BTDS*/"__JHASH__uZTU9s4hTUD__JHASH__")}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerCaptionsControl.react",["fbt","ix","CometRelay","IntlCurrentLocale","VideoPlayerCaptionsControl_video.graphql","VideoPlayerCaptionsMenu.react","VideoPlayerControlIcon.react","VideoPlayerDefaultControlsProperties","VideoPlayerHooks","VideoPlayerLoggingSuboriginContext","VideoPlayerUserInteractionCounter","fbicon","react","requireDeferred","stylex","useMinifiedProductAttribution","usePlayerOriginRouteTracePolicy","useVideoPlayerAvailableCaptionsLocalesFromRelay"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=l||(l=d("react"));e=l;var o=e.useCallback,p=e.useContext,q=e.useEffect,r=e.useMemo,s=e.useRef,t=e.useState,u=c("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("VideoPlayerCaptionsControl.react"),v={alignToEnd:{right:"x1g75g36",$$css:!0},"default":{display:"x1rg5ohu",marginTop:"x1k70j0n",marginEnd:"x1w0mnb",marginBottom:"xzueoph",marginStart:"x1mnrxsn",$$css:!0},menu:{backgroundColor:"x1av4zun",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",bottom:"xacj9c0",color:"x14ctfv",marginLeft:"x89ytp0",maxHeight:"x1hdnelj",maxWidth:"xgmxx4u",paddingTop:"xyamay9",paddingEnd:"x1pi30zi",paddingBottom:"x1l90r2v",paddingStart:"x1swvt13",position:"x10l6tqk",right:"xk6ci0l",width:"x1602a87",$$css:!0},menuCompact:{right:"xwjie4w",$$css:!0},positionRelative:{position:"x1n2onr6",whiteSpace:"xuxw1ft",$$css:!0}},w="asr",x=function(a){return a.length<2?null:a.substr(0,2)};function a(a){var e=a.alignMenuToIcon;e=e===void 0?!1:e;var f=a.availableCaptionsLocales,g=a.captionsVisible,l=a.children;l=l===void 0?null:l;var y=a.compactMenu,z=a.icon,A=a.initialCaptionsUrl,B=a.menuOpened,C=a.onMenuOpen,D=a.onUserInteraction,E=a.setMenuOpened;a=a.video;var F=h._(/*BTDS*/"__JHASH__RzG6zhlG9t4__JHASH__");d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_captions_menu",B===d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU,D);D=d("CometRelay").useFragment(j!==void 0?j:j=b("VideoPlayerCaptionsControl_video.graphql"),a);var G=(m||(m=d("VideoPlayerHooks"))).useMuted(),H=m.useController(),I=c("usePlayerOriginRouteTracePolicy")(),J=c("useVideoPlayerAvailableCaptionsLocalesFromRelay")(D),K=r(function(){var a;return((a=(a=f)!=null?a:J)!=null?a:[]).slice().sort(function(a,b){return((a=a.localizedLanguage)!=null?a:"")>((a=b.localizedLanguage)!=null?a:"")?1:-1})},[f,J]),L=(a=A)!=null?a:D==null?void 0:D.captions_url;A=t("");a=A[0];var M=A[1],N=s(null),O=s(null);q(function(){K.forEach(function(a){a.captionsUrl===L&&a.locale!=null&&(N.current==null&&(N.current=a.locale),M(a.locale))})},[K,L]);var P=c("IntlCurrentLocale").code;q(function(){var a;N.current!==w&&x((a=N.current)!=null?a:"")!==x(P)&&O.current===null?(H.setCaptionsVisible(!1),O.current=!1):G&&!g&&O.current===null?(O.current=!0,H.setCaptionsVisible(!0)):!G&&O.current===!0&&(H.setCaptionsVisible(!1),O.current=!1)},[g,H,G,P]);var Q=B===d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU;D=t(!1);A=D[0];B=D[1];var R=p(c("VideoPlayerLoggingSuboriginContext")),S=c("useMinifiedProductAttribution")(),T=o(function(a,b){a===void 0&&(a=null),b===void 0&&(b=null),u.onReady(function(c){c.log({attribution_id_v2:S,click_point:a,event:"click",event_target_info:I,event_target_sub_type:b,player_suborigin:R})})},[S,I,R]);return n.jsxs("div",babelHelpers["extends"]({},(k||(k=c("stylex"))).props(v["default"],e===!0&&v.positionRelative),{"data-testid":void 0,children:[Q&&n.jsx("div",babelHelpers["extends"]({},(k||(k=c("stylex"))).props(v.menu,y===!0&&v.menuCompact,e===!0&&v.alignToEnd),{children:n.jsx(d("VideoPlayerCaptionsMenu.react").VideoPlayerCaptionsMenu,{availableCaptionsLocales:K,captionsListExpanded:A,onClose:function(){E!=null&&E(null)},onPressLog:T,selectedCaptionsLocale:a,setCaptionsListExpanded:B,setSelectedCaptionsLocale:M,children:l})})),n.jsx(c("VideoPlayerControlIcon.react"),{icon:z==null?g?d("fbicon")._(i("662652"),20):d("fbicon")._(i("662655"),20):z,label:F,onPress:function(){E!=null&&E(Q?null:d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_CAPTIONS_MENU),!Q&&C!=null&&C(),T("closed_captions_button")},tooltip:F})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerCastControlIcon.react",["fbt","ix","CastingControllerHooks","CometRelay","CometWatchAndScrollVideoContext","JSResourceForInteraction","VideoPlayerControlIcon.react","VideoPlayerHooks","emptyFunction","fbicon","react","recoverableViolation","useCometLazyDialog"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=j||(j=d("react"));b=j;var m=b.useCallback,n=b.useContext,o=c("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerCastControlIcon.react");function a(a){var b=a.subOrigin;d("CastingControllerHooks").useCastingInitializeIfNecessary();var e=(a=(k||(k=d("VideoPlayerHooks"))).useVideoFbid())!=null?a:"",f=(k||(k=d("VideoPlayerHooks"))).useController(),g=d("CometRelay").useRelayEnvironment(),j=d("CastingControllerHooks").useCastingController();a=n(c("CometWatchAndScrollVideoContext"));var p=c("useCometLazyDialog")(o),q=p[0],r=a==null?void 0:a.videoID,s=m(function(){if(e!=null){var a=f.getPlayheadPosition();j.startPlayVideoNow({environment:g,origin:"video_home",position:a,subOrigin:b,videoID:e})}else c("recoverableViolation")("Could not transition to Cast player because videoID was null","comet_video_player")},[j,g,b,f,e]);p=m(function(){r!=null?q({onClose:c("emptyFunction"),onContinue:s,startingVideoType:"cast"},c("emptyFunction")):s()},[q,s,r]);a=h._(/*BTDS*/"__JHASH__n4AAlvyuR-n__JHASH__");return l.jsx(c("VideoPlayerControlIcon.react"),{color:"white",icon:d("fbicon")._(i("788899"),20),label:a,onPress:p,tooltip:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerCastControl.react",["CastingControllerHooks","VideoPlayerCastControlIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.subOrigin;var b=d("CastingControllerHooks").useIsCastAvailable();return!b?null:i.jsx(c("VideoPlayerCastControlIcon.react"),{subOrigin:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerCastControlShimImpl.modern.react",["deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");a=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerCastControl.react").__setRef("VideoPlayerCastControlShimImpl.modern.react"));g["default"]=a}),98);
__d("VideoPlayerCastControlShim.react",["CometPlaceholder.react","VideoPlayerCastControlShimImpl.modern.react","VideoPlayerControlsGroups.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isVisible;a=babelHelpers.objectWithoutPropertiesLoose(a,["isVisible"]);return i.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:b,noPaddingEnd:!0,noPaddingStart:!0,children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(c("VideoPlayerCastControlShimImpl.modern.react"),babelHelpers["extends"]({},a))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerExpandSidePanelControl.react",["fbt","ix","CometTahoeSidePaneContext","VideoPlayerControlIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useContext;function a(){var a=l(c("CometTahoeSidePaneContext")),b=a.rightRailExpanded,e=a.setRightRailExpanded;a=b?h._(/*BTDS*/"__JHASH__RGl3xYzfsQu__JHASH__"):h._(/*BTDS*/"__JHASH__cFY-7gJEvdn__JHASH__");return k.jsx("div",babelHelpers["extends"]({className:"x1rg5ohu x1k70j0n x1w0mnb xzueoph x1mnrxsn"},{children:k.jsx(c("VideoPlayerControlIcon.react"),{icon:b?d("fbicon")._(i("557039"),20):d("fbicon")._(i("557052"),20),label:a,onPress:function(){e(!b)},tooltip:a})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerLiveVideoControls_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerLiveVideoControls_video",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"is_clipping_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_rewind_enabled",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[a],storageKey:null},{args:null,kind:"FragmentSpread",name:"VideoPlayerWatchAndScrollControl_video"},{args:null,kind:"FragmentSpread",name:"LiveVideoLatencyMenuContextProvider_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerCaptionsControl_video"},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_community_moderation_tools",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video",fragmentName:"VideoPlayerModeratorControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_live_rewind",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_use_live_rewind",fragmentName:"VideoPlayerLiveRewindControlsGroup_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_use_clipping",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_use_clipping",fragmentName:"VideoPlayerClipVideoControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"if_viewer_can_see_costreaming_tools",plural:!1,selections:[{args:null,documentName:"VideoPlayerLiveVideoControls_video_if_viewer_can_see_costreaming_tools",fragmentName:"VideoPlayerCostreamingControl_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("VideoPlayerQuietModeControl.react",["fbt","ix","CometTahoeSidePaneContext","VideoPlayerControlIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useContext;function a(){var a=l(c("CometTahoeSidePaneContext")),b=a.rightRailHidden,e=a.setRightRailHidden;a=b?h._(/*BTDS*/"__JHASH__kXpbNzjk3HM__JHASH__"):h._(/*BTDS*/"__JHASH__eNC0h5sAaC-__JHASH__");return k.jsx("div",babelHelpers["extends"]({className:"x1rg5ohu x1k70j0n x1w0mnb xzueoph x1mnrxsn"},{children:k.jsx(c("VideoPlayerControlIcon.react"),{icon:b?d("fbicon")._(i("942218"),20):d("fbicon")._(i("942221"),20),label:a,onPress:function(){e(!b)},tooltip:a})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerSettingsMenuQualityPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerSettingsMenu.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=a.selectedVideoQuality,e=a.setPane;a=a.targetVideoQuality;return k.jsxs(c("CometPressable.react"),{onPress:function(){e(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.QUALITY)},testid:void 0,xstyle:l.pressableOption,children:[k.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1s688f"},{children:h._(/*BTDS*/"__JHASH__0EdCFWvij7o__JHASH__")})),k.jsxs("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x1i64zmx x450l9j"},{children:[b==="notselected"?k.jsx("span",{"data-testid":void 0,children:"\xa0"}):b==="auto"?k.jsxs(k.Fragment,{children:[k.jsx("span",{"data-testid":void 0,children:h._(/*BTDS*/"__JHASH__hdERtczUAO6__JHASH__")}),a!=null?k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"\xa0"}),k.jsx("span",{"data-testid":void 0,children:a})]}):null]}):k.jsx("span",{"data-testid":void 0,children:b}),k.jsx("span",babelHelpers["extends"]({className:"x3nfvp2 xmgb6t1 x12mruv9"},{children:k.jsx(c("CometImage.react"),{src:i("480587")})}))]}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerSettingsMenu.react",["fbt","$InternalEnum","CometErrorBoundary.react","CometKeys","CometPlaceholder.react","CometRelay","LiveVideoLatencyMenu.react","PlaybackSpeedExperiments","VideoPlayerHooks","VideoPlayerSettingsMenuAudioTrackPane.react","VideoPlayerSettingsMenuMainPane.react","VideoPlayerSettingsMenuPlaybackSpeedPane.react","VideoPlayerSettingsMenuQualityPane.react","react","recoverableViolation","useLayerKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));e=i;var l=e.useCallback,m=e.useContext,n=e.useEffect,o=e.useMemo,p=e.useRef,q=e.useState,r=b("$InternalEnum")({LATENCY:"latency",MAIN:"main",PLAYBACK_SPEED:"playbackSpeed",QUALITY:"quality",AUDIO:"audio"});function a(a){var b=a.children;b=b===void 0?null:b;var e=a.forceShowPlaybackRateControl,f=a.onClose;a=(j||(j=d("VideoPlayerHooks"))).useCaptionsLoaded();var g=j.useCaptionsVisible(),i=j.useSelectedVideoQuality(),s=j.useTargetAudioTrack(),t=j.useAvailableAudioTracks(),u=j.useInbandCaptionsAutogenerated(),v=j.useTargetVideoQuality(),w=q(r.MAIN),x=w[0],y=w[1];w=q(g);g=w[0];w=w[1];var z=j.usePlaybackRate(),A=j.useIsLive(),B=j.useIsLiveRewindActive(),C=m(d("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContext);C=C.liveVideoLatencyMenuPaneMatchPointer;var D=j.useShouldShowPlaybackRateControl();e=e===!0||d("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&D;n(function(){A&&!B&&x===r.PLAYBACK_SPEED&&y(r.MAIN)},[B,y,A,x]);n(function(){t.length<=1&&x===r.AUDIO&&y(r.MAIN)},[t,x]);var E=p(null),F=p(null),G=l(function(a){E.current&&F.current&&a.target instanceof HTMLElement&&document.contains(a.target)&&!E.current.contains(a.target)&&F.current.contains(a.target)&&f()},[f]);n(function(){document.addEventListener("click",G);return function(){document.removeEventListener("click",G)}},[G]);D=o(function(){return[{command:{key:c("CometKeys").ESCAPE},description:h._(/*BTDS*/"__JHASH__hGEFqYmPW2a__JHASH__"),handler:function(){f()}}]},[f]);c("useLayerKeyCommands")(D);D=k.jsx(c("VideoPlayerSettingsMenuMainPane.react"),{availableAudioTracks:t,captionsLoaded:a,captionsVisibleOptimistic:g,inbandCaptionsAutogenerated:u,isLive:A,playbackRate:z,selectedVideoQuality:i,setIsCaptionsVisible:w,setPane:y,shouldEnablePlaybackRateSupport:e,targetAudioTrack:s,targetVideoQuality:v,children:b});switch(x){case r.LATENCY:if(C==null){c("recoverableViolation")("Latency components should not be null","gaming_video");break}D=k.jsx(c("CometErrorBoundary.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(d("CometRelay").MatchContainer,{match:C,props:{setPane:y}})})});break;case r.MAIN:break;case r.PLAYBACK_SPEED:D=k.jsx(c("VideoPlayerSettingsMenuPlaybackSpeedPane.react"),{playbackRate:z,setPane:y});break;case r.QUALITY:D=k.jsx(c("VideoPlayerSettingsMenuQualityPane.react"),{selectedVideoQuality:i,setPane:y});break;case r.AUDIO:D=!A&&t.length>1?k.jsx(c("VideoPlayerSettingsMenuAudioTrackPane.react"),{availableAudioTracks:t,setPane:y,targetAudioTrack:s}):null;break}return k.jsxs(k.Fragment,{children:[k.jsx("div",{ref:E,children:D}),k.jsx("div",babelHelpers["extends"]({className:"xjbqb8w x5yr21d x17qophe xg6iff7 x1g81zrj xixxii4 x13vifvy xh8yej3 x8knxv4"},{"data-testid":void 0,ref:F}))]})}a.displayName=a.name+" [from "+f.id+"]";g.VideoPlayerSettingsMenuPaneType=r;g.VideoPlayerSettingsMenu=a}),226);
__d("VideoPlayerSettingsMenuAudioTrackPane.react",["fbt","ix","CometImage.react","CometPressable.react","CurrentLocale","FocusRegion.react","VideoPlayerAudioTrackUtils","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","stylex","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=k||d("react"),n={menuLabel:{cursor:"x1ypdohk",display:"x1rg5ohu",$$css:!0},menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingEnd:"x4uap5",paddingBottom:"xg8j3zb",paddingStart:"xkhd6sd",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0},selectedOption:{fontWeight:"x1s688f",$$css:!0}};function a(a){var b=a.availableAudioTracks,e=a.setPane,f=a.targetAudioTrack;c("vulture")("93FiDK57iEJ");var g=(l||(l=d("VideoPlayerHooks"))).useController();return m.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:m.jsxs("div",{"data-testid":void 0,children:[m.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},{children:m.jsxs(c("CometPressable.react"),{onPress:function(){return e(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},testid:void 0,xstyle:n.pressableOption,children:[m.jsx("span",babelHelpers["extends"]({className:"x6s0dn4 x3nfvp2 xmgb6t1 x139jcc6"},{children:m.jsx(c("CometImage.react"),{src:i("480579")})})),h._(/*BTDS*/"__JHASH__uSP5cmmYsOX__JHASH__")]})})),m.jsx("div",babelHelpers["extends"]({className:"x17adc0v x1anpbxc xn80e1m"},{"data-testid":void 0,children:b.map(function(a){var b=(f==null?void 0:f.id)===a.id,e=d("VideoPlayerAudioTrackUtils").getAudioTrackLabelLocalized(a,c("CurrentLocale").get());return m.jsx("div",{children:m.jsxs(c("CometPressable.react"),{onPress:function(){g.selectVideoVariant({lang:a.lang,role:a.role})},testid:void 0,xstyle:n.menuOptionRow,children:[m.jsx("div",babelHelpers["extends"]({className:"xiakxrv x1ykpwxx x118zf8b xnwxkdh xfocsrx x1rg5ohu xmgb6t1 xmo9yow x1yrsyyn xsyo7zv x10b6aqq x16hj40l"},{children:b&&m.jsx("div",babelHelpers["extends"]({className:"x14hiurz x8u2fvd x1ht7hnu x1quq95r x5yzy4c x1rg5ohu xqu0tyb x8182xy x1kgmq87 x10l6tqk x51ohtg"},{"data-testid":void 0}))})),m.jsx("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props(n.menuLabel,b&&n.selectedOption),{"data-testid":void 0,children:e}))]})},a.id)})}))]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerSettingsMenuAudioTrackPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","CurrentLocale","VideoPlayerAudioTrackUtils","VideoPlayerSettingsMenu.react","react","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=a.setPane;a=a.targetAudioTrack;c("vulture")("8QTO1P21eYQ");a=d("VideoPlayerAudioTrackUtils").getAudioTrackLabelLocalized(a,c("CurrentLocale").get());return k.jsxs(c("CometPressable.react"),{onPress:function(){b(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.AUDIO)},testid:void 0,xstyle:l.pressableOption,children:[k.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1s688f"},{children:h._(/*BTDS*/"__JHASH__uSP5cmmYsOX__JHASH__")})),k.jsxs("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x1i64zmx x450l9j xn80e1m"},{children:[k.jsx("span",{"data-testid":void 0,children:a}),k.jsx("span",babelHelpers["extends"]({className:"x3nfvp2 xmgb6t1 x12mruv9"},{children:k.jsx(c("CometImage.react"),{src:i("480587")})}))]}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerSettingsMenuMainPane.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","FocusRegion.react","LiveVideoLatencyMenu.react","VideoPlayerSettingsMenuAudioTrackPaneToggle.react","VideoPlayerSettingsMenuPlaybackPaneToggle.react","VideoPlayerSettingsMenuQualityPaneToggle.react","focusScopeQueries","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b=a.availableAudioTracks;a.captionsLoaded;a.captionsVisibleOptimistic;var e=a.children;a.inbandCaptionsAutogenerated;var f=a.isLive,g=a.playbackRate,h=a.selectedVideoQuality;a.setIsCaptionsVisible;var k=a.setPane,l=a.shouldEnablePlaybackRateSupport,m=a.targetAudioTrack;a=a.targetVideoQuality;var n=j(d("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContext);n=n.liveVideoLatencyMenuPaneToggleMatchPointer;f=!f&&b.length>1?c("gkx")("24336"):!1;return i.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:i.jsxs("div",{"data-testid":void 0,children:[i.jsx("div",babelHelpers["extends"]({className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},{children:i.jsx(c("VideoPlayerSettingsMenuQualityPaneToggle.react"),{selectedVideoQuality:h,setPane:k,targetVideoQuality:a})})),f&&i.jsx("div",babelHelpers["extends"]({className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},{children:i.jsx(c("VideoPlayerSettingsMenuAudioTrackPaneToggle.react"),{setPane:k,targetAudioTrack:m})})),i.jsx("div",babelHelpers["extends"]({className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},{children:i.jsx(c("VideoPlayerSettingsMenuPlaybackPaneToggle.react"),{playbackRate:g,setPane:k,shouldEnablePlaybackRateSupport:l})})),n!=null&&i.jsx("div",babelHelpers["extends"]({className:"x14ctfv x78zum5 x1hoihq8 x1lku1pv"},{children:i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(d("CometRelay").MatchContainer,{match:n,props:{setPane:k}})})})})),e]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerSettingsMenuPlaybackPaneToggle.react",["fbt","ix","CometImage.react","CometPressable.react","VideoPlayerSettingsMenu.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={pressableOption:{width:"xh8yej3",$$css:!0}};function a(a){var b=a.playbackRate,e=a.setPane;a=a.shouldEnablePlaybackRateSupport;return!a?null:k.jsxs(c("CometPressable.react"),{onPress:function(){e(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.PLAYBACK_SPEED)},testid:void 0,xstyle:l.pressableOption,children:[k.jsx("div",babelHelpers["extends"]({className:"x1ypdohk x1s688f"},{children:h._(/*BTDS*/"__JHASH__8IenQAQlVCL__JHASH__")})),k.jsxs("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1bhwmg6 x13a6bvl x1i64zmx x450l9j"},{children:[k.jsx("span",{"data-testid":void 0,children:b}),k.jsx("span",babelHelpers["extends"]({className:"x3nfvp2 xmgb6t1 x12mruv9"},{children:k.jsx(c("CometImage.react"),{src:i("480587")})}))]}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerSettingsMenuPlaybackSpeedPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","stylex","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=k||d("react"),n={menuLabel:{cursor:"x1ypdohk",display:"x1rg5ohu",$$css:!0},menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingEnd:"x4uap5",paddingBottom:"xg8j3zb",paddingStart:"xkhd6sd",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0},selectedOption:{fontWeight:"x1s688f",$$css:!0}};function a(a){var b=a.playbackRate,e=a.setPane;c("vulture")("7nYzdiMSz7g");var f=(l||(l=d("VideoPlayerHooks"))).useController();return m.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:m.jsxs("div",{"data-testid":void 0,children:[m.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},{children:m.jsxs(c("CometPressable.react"),{onPress:function(){return e(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},testid:void 0,xstyle:n.pressableOption,children:[" ",m.jsx("span",babelHelpers["extends"]({className:"x3nfvp2 xmgb6t1 x139jcc6"},{children:m.jsx(c("CometImage.react"),{src:i("480579")})})),h._(/*BTDS*/"__JHASH__8IenQAQlVCL__JHASH__")]})})),m.jsx("div",babelHelpers["extends"]({className:"x17adc0v x1anpbxc"},{"data-testid":void 0,children:[.5,.75,1,1.25,1.5,1.75,2].map(function(a){var d=b===a,e=h._(/*BTDS*/"__JHASH__uy1byBD2qL2__JHASH__",[h._param("playback_rate_option",a),h._param("is_playback_rate_option_selected",d?", selected":"")]);return m.jsx("div",{children:m.jsxs(c("CometPressable.react"),{"aria-checked":d,"aria-label":e,onPress:function(){f.setPlaybackRate(a)},testid:void 0,xstyle:n.menuOptionRow,children:[m.jsx("div",babelHelpers["extends"]({className:"x17j41np x1ykpwxx x118zf8b xnwxkdh xfocsrx x1rg5ohu xmgb6t1 xmo9yow x1yrsyyn xsyo7zv x10b6aqq x16hj40l"},{children:d&&m.jsx("div",babelHelpers["extends"]({className:"x14hiurz x8u2fvd x1ht7hnu x1quq95r x5yzy4c x1rg5ohu xqu0tyb x8182xy x1kgmq87 x10l6tqk x51ohtg"},{"data-testid":void 0}))})),m.jsx("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props(n.menuLabel,d&&n.selectedOption),{"data-testid":void 0,children:a}))]})},a)})}))]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerSettingsMenuQualityPane.react",["fbt","ix","CometImage.react","CometPressable.react","FocusRegion.react","VideoPlayerHooks","VideoPlayerSettingsMenu.react","focusScopeQueries","react","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=k||d("react"),n={menuLabel:{cursor:"x1ypdohk",display:"x1rg5ohu",$$css:!0},menuOptionRow:{color:"x14ctfv",display:"x1lliihq",minWidth:"xfvyar9",outline:"x1a2a7pz",paddingTop:"xyqdw3p",paddingEnd:"x4uap5",paddingBottom:"xg8j3zb",paddingStart:"xkhd6sd",textAlign:"x1yc453h",$$css:!0},pressableOption:{width:"xh8yej3",$$css:!0},selectedOption:{fontWeight:"x1s688f",$$css:!0}};function a(a){var b=a.selectedVideoQuality,e=a.setPane;a=(l||(l=d("VideoPlayerHooks"))).useAvailableVideoQualities();var f=l.useIsAbrEnabled(),g=l.useController();return m.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:m.jsxs("div",{"data-testid":void 0,children:[m.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x14ctfv x1ypdohk x78zum5 x1s688f x1lku1pv"},{children:m.jsxs(c("CometPressable.react"),{onPress:function(){return e(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenuPaneType.MAIN)},testid:void 0,xstyle:n.pressableOption,children:[m.jsx("span",babelHelpers["extends"]({className:"x6s0dn4 x3nfvp2 xmgb6t1 x139jcc6"},{children:m.jsx(c("CometImage.react"),{src:i("480579")})})),h._(/*BTDS*/"__JHASH__0EdCFWvij7o__JHASH__")]})})),m.jsxs("div",babelHelpers["extends"]({className:"x17adc0v x1anpbxc"},{"data-testid":void 0,children:[f?m.jsx("div",{children:m.jsxs(c("CometPressable.react"),{onPress:function(){g.selectVideoQuality("auto")},testid:void 0,xstyle:n.menuOptionRow,children:[m.jsx("div",babelHelpers["extends"]({className:"xiakxrv x1ykpwxx x118zf8b xnwxkdh xfocsrx x1rg5ohu xmgb6t1 xmo9yow x1yrsyyn xsyo7zv x10b6aqq x16hj40l"},{children:b==="auto"&&m.jsx("div",babelHelpers["extends"]({className:"x14hiurz x8u2fvd x1ht7hnu x1quq95r x5yzy4c x1rg5ohu xqu0tyb x8182xy x1kgmq87 x10l6tqk x51ohtg"},{"data-testid":void 0}))})),m.jsx("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props(n.menuLabel,b==="auto"&&n.selectedOption),{"data-testid":void 0,children:h._(/*BTDS*/"__JHASH__pan0Y10zXIi__JHASH__")}))]})},"auto"):null,a.map(function(a){var d=b===a;return m.jsx("div",{children:m.jsxs(c("CometPressable.react"),{onPress:function(){g.selectVideoQuality(a)},testid:void 0,xstyle:n.menuOptionRow,children:[m.jsx("div",babelHelpers["extends"]({className:"xiakxrv x1ykpwxx x118zf8b xnwxkdh xfocsrx x1rg5ohu xmgb6t1 xmo9yow x1yrsyyn xsyo7zv x10b6aqq x16hj40l"},{children:d&&m.jsx("div",babelHelpers["extends"]({className:"x14hiurz x8u2fvd x1ht7hnu x1quq95r x5yzy4c x1rg5ohu xqu0tyb x8182xy x1kgmq87 x10l6tqk x51ohtg"},{"data-testid":void 0}))})),m.jsx("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props(n.menuLabel,d&&n.selectedOption),{"data-testid":void 0,children:a}))]})},a)}).reverse()]}))]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerSettingsControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerDefaultControlsProperties","VideoPlayerSettingsMenu.react","VideoPlayerUserInteractionCounter","fbicon","react","stylex","vulture"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=k||(k=d("react")),m=k.useState,n={alignToEnd:{right:"x3m8u43",$$css:!0},"default":{display:"x1rg5ohu",marginTop:"x1k70j0n",marginEnd:"x1w0mnb",marginBottom:"xzueoph",marginStart:"x1mnrxsn",$$css:!0},menu:{backgroundColor:"xjb1437",bottom:"xacj9c0",color:"x14ctfv",marginLeft:"x89ytp0",paddingTop:"x889kno",paddingEnd:"x1ou2tus",paddingBottom:"x1a8lsjc",paddingStart:"x1egjynq",position:"x10l6tqk",right:"x1fwd5yv",$$css:!0},menuCompact:{right:"xwjie4w",$$css:!0},positionRelative:{position:"x1n2onr6",whiteSpace:"xuxw1ft",$$css:!0}};b=l.forwardRef(a);function a(a,b){var e=a.alignMenuToIcon;e=e===void 0?!1:e;var f=a.children;f=f===void 0?null:f;var g=a.compactMenu,k=a.forceShowPlaybackRateControl,o=a.icon,p=a.menuOpened,q=a.onMenuOpen,r=a.onUserInteraction,s=a.setMenuOpened;c("vulture")("8SSNf7VRwum");a=m(!1);var t=a[0],u=a[1];a=h._(/*BTDS*/"__JHASH__uL7pUaxPcnz__JHASH__");var v=s!=null;d("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_settings_menu",v?p===d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU:t,r);var w=v?p===d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU:t;return l.jsxs("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props(n["default"],e===!0&&n.positionRelative),{ref:b,children:[w&&l.jsx("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props(n.menu,g===!0&&n.menuCompact,e===!0&&n.alignToEnd),{children:l.jsx(d("VideoPlayerSettingsMenu.react").VideoPlayerSettingsMenu,{forceShowPlaybackRateControl:k,onClose:function(){v?s!=null&&s(null):u(!1)},children:f})})),l.jsx(c("VideoPlayerControlIcon.react"),{icon:o==null?d("fbicon")._(i("497567"),20):o,label:a,onPress:function(){v?s!=null&&s(w?null:d("VideoPlayerDefaultControlsProperties").VideoMenuType.VIDEO_SETTINGS_MENU):u(!t),!w&&q!=null&&q()},tooltip:a})]}))}a.displayName=a.name+" [from "+f.id+"]";e=b;b.displayName="VideoPlayerSettingsControl";g["default"]=e}),226);
__d("VideoPlayerWatchAndScrollControl_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerWatchAndScrollControl_video",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"playable_duration_in_ms",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"has_professional_features_for_watch",storageKey:null}],type:"VideoOwner",abstractKey:"__isVideoOwner"},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_huddle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Video",abstractKey:null}}();e.exports=a}),null);
__d("useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7727916087224121"}),null);
__d("useVideoPlayerWatchAndScrollControlNUXQuery.graphql",["useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"nux_id",value:9347}],c={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useVideoPlayerWatchAndScrollControlNUXQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[c],storageKey:"nux(nux_id:9347)"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useVideoPlayerWatchAndScrollControlNUXQuery",selections:[{alias:null,args:a,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:"nux(nux_id:9347)"}]},params:{id:b("useVideoPlayerWatchAndScrollControlNUXQuery_facebookRelayOperation"),metadata:{},name:"useVideoPlayerWatchAndScrollControlNUXQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useVideoPlayerWatchAndScrollControlNUX",["fbt","ARIA_LABEL_PLACEHOLDER_FIXME","CometRelay","CometWatchAndScrollTriggerContext","react","recoverableViolation","requireDeferred","useFDSCallout","useVideoPlayerWatchAndScrollControlNUXQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;e=j||d("react");var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useState,o=c("requireDeferred")("CometDismissFBNuxMutation").__setRef("useVideoPlayerWatchAndScrollControlNUX"),p=c("requireDeferred")("CometLogImpressionFBNuxMutation").__setRef("useVideoPlayerWatchAndScrollControlNUX"),q={nux:{maxWidth:"xw5ewwj",$$css:!0}},r=9347,s=i!==void 0?i:i=b("useVideoPlayerWatchAndScrollControlNUXQuery.graphql");function a(a){var b=l(c("CometWatchAndScrollTriggerContext")),e=b.setIsTriggerDisabled;b=n(null);var f=b[0],g=b[1],i=d("CometRelay").useRelayEnvironment(),j=k(function(){e!=null&&e(!0),g(!1),o.onReady(function(a){a.commit(i,r)})},[i,e]);m(function(){if(a&&f===null){var b=d("CometRelay").fetchQuery(i,s,{fetchPolicy:"store-or-network"}).subscribe({next:function(b){b=(b==null?void 0:(b=b.nux)==null?void 0:b.should_show)||!1;g(b);b&&a&&p.onReady(function(a){a.commit(i,r,function(){},function(){c("recoverableViolation")("logimpression fb nux mutation failed for video player watch and scroll control.","watch_www_and_off_platform")})})}});return function(){b.unsubscribe()}}},[i,a,f]);b=c("useFDSCallout")({align:"end","aria-label":c("ARIA_LABEL_PLACEHOLDER_FIXME"),arrowStyle:"inset",content:h._(/*BTDS*/"__JHASH__cTRQbv1sbZ0__JHASH__"),disableAutoFlip:!0,hasCloseButton:!0,onClose:function(){j()},onHide:function(){g(!1)},position:"below",type:"accent",xstyle:q.nux},f===!0&&a||!1);b=b.anchorRef;return{handleDismissNUX:j,nuxRef:b,shouldShowNUX:f}}g["default"]=a}),226);
__d("VideoPlayerWatchAndScrollControl.react",["fbt","ix","CastingStateHooks","CometPictureInPictureExpContext","CometRelay","CometRouteRenderType","CometVideoPictureInPictureManager.react","CometVideoPictureInPictureManagerContext","CometWatchAndScrollControlNUXContext","CometWatchAndScrollTriggerContext","JSResourceForInteraction","VideoPlayerControlIcon.react","VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerWatchAndScrollControl_video.graphql","VideoPlayerWithWatchAndScrollTrigger.react","emptyFunction","fbicon","gkx","react","requireDeferred","useCometLazyDialog","useCometRouterDispatcher","useCometRouterState","useIsVideoHomePlayerOriginFromTracePolicy","useMinifiedProductAttribution","usePlayerOriginRouteTracePolicy","useVideoPlayerWatchAndScrollControlNUX","useWatchAndScrollTrigger"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=k||(k=d("react"));e=k;var n=e.useCallback,o=e.useContext,p=e.useEffect,q=e.useState,r=c("requireDeferred")("VideoHomeTypedLiteLogger").__setRef("VideoPlayerWatchAndScrollControl.react"),s=c("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerWatchAndScrollControl.react"),t=6e4,u=window.document.pictureInPictureEnabled;function a(a){var e,f=a.subOrigin;a=a.video;var g=o(c("CometWatchAndScrollTriggerContext")),k=g.isControlShown,v=g.setIsControlShown;g=d("CometRouteRenderType").useIsPushView();var w=(l||(l=d("VideoPlayerHooks"))).useIsFullscreen(),x=c("useCometRouterDispatcher")(),y=c("useCometRouterState")(),z=(y=y==null?void 0:y.main.route.tabKey)!=null?y:"undefined";y=d("CometRelay").useFragment(j!==void 0?j:j=b("VideoPlayerWatchAndScrollControl_video.graphql"),a);var A=y==null?void 0:y.id;a=(a=y==null?void 0:y.playable_duration_in_ms)!=null?a:0;var B=y==null?void 0:y.is_huddle,C=y==null?void 0:y.url;p(function(){v!=null&&v(!0)},[v]);var D=c("usePlayerOriginRouteTracePolicy")(),E=c("useIsVideoHomePlayerOriginFromTracePolicy")(D);e=(y==null?void 0:(e=y.owner)==null?void 0:e.has_professional_features_for_watch)===!0&&a>=t&&k&&!E;var F=l.usePlaying(),G=l.useController();a=G.getPlayheadPosition();var H=a>=10;k=q(!1);E=k[0];var I=k[1];a=q(!1);var J=a[0],K=a[1];k=q(!1);a=k[0];var L=k[1];k=d("VideoPlayerInstreamAdsStateHooks").useInstreamAdsStateValue();k=k==="STARTING_INDICATOR"||k==="PLAY_NI_VIDEO"||k==="START_AD"||k==="PLAY_LONGER_AD";var M=c("useMinifiedProductAttribution")();p(function(){F&&H&&I(!0)},[H,F]);var N=d("CastingStateHooks").useIsCastingAnyVideo(),O=c("useCometLazyDialog")(s),P=O[0];O=!k&&E&&e;k=c("useVideoPlayerWatchAndScrollControlNUX")(O);var Q=k.handleDismissNUX;E=k.nuxRef;e=k.shouldShowNUX;var R=e===!0&&O;k=o(c("CometWatchAndScrollControlNUXContext"));var S=k.setIsVideoPlayerWatchAndScrollControlNUXVisible,T=o(c("CometPictureInPictureExpContext"));p(function(){S&&S(R)},[R,S]);var U=d("useWatchAndScrollTrigger").useWatchAndScrollTrigger(f,d("VideoPlayerWithWatchAndScrollTrigger.react").WatchAndScrollTriggerType.WNS_CONTROL,A,C),V=l.useIsPremiumMusicVideo(),W=y==null?void 0:(e=y.owner)==null?void 0:e.id;O=n(function(){var a=d("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp(),b=d("CometVideoPictureInPictureManagerContext").isInPictureInPictureExpControlGroup();T.setPictureInPictureExpConfig({isInPictureInPictureExp:a,isInPictureInPictureExpControlGroup:b,isSkipAndChainingDisabled:!1});u&&a&&K(!0);a=(a||b)&&(V||d("CometVideoPictureInPictureManager.react").EXCLUDED_PROVIDERS.includes(W));a&&L(!0)},[V,W,T]);var X=D==="comet.videos.tahoe",Y=n(function(){N&&A!=null?P({onClose:c("emptyFunction"),onContinue:U,startingVideoType:"wns"},c("emptyFunction")):U()},[N,U,P,A]);k=n(function(){Y(),J?(r.onReady(function(a){a.log({attribution_id_v2:M,click_point:"control_picture_in_picture",event:"click",event_target_info:D,player_suborigin:f})}),G.requestPictureInPicture()):r.onReady(function(a){a.log({attribution_id_v2:M,click_point:"control_watch_and_scroll",event:"click",event_target_info:z})}),R===!0&&Q(),x&&x.popPushView&&x.popPushView()},[Y,J,R,x,G,M,D,f,z,Q]);var Z=f==="live_producer";C=n(function(){Y(),J?(r.onReady(function(a){a.log({attribution_id_v2:M,click_point:"control_picture_in_picture",event:"click",event_target_info:D,player_suborigin:f})}),G.requestPictureInPicture()):r.onReady(function(a){a.log({attribution_id_v2:M,click_point:"control_watch_and_scroll",event:"click",event_target_info:z})}),R===!0&&Q(),w&&G.requestSetIsFullscreen(!1),x!=null&&(Z||X)&&x.go("/",{})},[Y,J,R,w,x,Z,X,G,M,D,f,z,Q]);y=g?k:C;c("gkx")("20836")?e=h._(/*BTDS*/"__JHASH__B-CiurI5Nqm__JHASH__"):B===!0?e=h._(/*BTDS*/"__JHASH__1NTpM1RL-cA__JHASH__"):e=h._(/*BTDS*/"__JHASH__cTRQbv1sbZ0__JHASH__");J&&(e=h._(/*BTDS*/"__JHASH__AQMjhAwOZ46__JHASH__"));return a?null:m.jsx("div",{onMouseEnter:O,ref:E,children:m.jsx(c("VideoPlayerControlIcon.react"),{color:"white",icon:d("fbicon")._(i("150489"),20),label:e,onPress:y,tooltip:R?null:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("VideoPlayerLiveVideoControls.react",["CometPlaceholder.react","CometRelay","CometTahoeCustomVideoAreaContext","CometTahoeSidePaneContext","CometTrackingNodeProvider.react","LiveCostreamerTagSubscription.react","LiveVideoLatencyMenu.react","VideoPlayerCaptionsControl.react","VideoPlayerCastControlShim.react","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerExpandSidePanelControl.react","VideoPlayerHooks","VideoPlayerLiveVideoControls_video.graphql","VideoPlayerPlaybackControl.react","VideoPlayerQuietModeControl.react","VideoPlayerSettingsControl.react","VideoPlayerVolumeControl.react","VideoPlayerWatchAndScrollControl.react","gkx","react","useVideoPlayerBigPlayButtonOverlay"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;var l=e.useContext,m=e.useState,n=h!==void 0?h:h=b("VideoPlayerLiveVideoControls_video.graphql");function o(a){var b,e,f=d("CometRelay").useFragment(n,a.video),g=(j||(j=d("VideoPlayerHooks"))).useEnded(),h=j.useIsFullscreen(),i=l(d("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext),o=l(c("CometTahoeSidePaneContext"));o=o.rightRailHidden;var p=c("useVideoPlayerBigPlayButtonOverlay")();p=p.bigPlayButtonIsVisible;var q=j.useCaptionsLoaded(),r=j.useCaptionsVisible(),s=m(null),t=s[0];s=s[1];var u=l(d("CometTahoeCustomVideoAreaContext").CometTahoeCustomVideoAreaContext);u=u.customVideoAreaHidden;if(g)return null;g=a.disablePlaybackControls;var v=a.expandControl,w=a.isControlsVisible,x=a.isExpandControlVisible;x=x===void 0?!1:x;var y=a.isVolumeControlVisible,z=a.isWatchAndScrollControlVisible;z=z===void 0?!1:z;var A=a.onUserInteraction,B=a.shouldRenderCaptionsControl;B=B===void 0?!0:B;var C=a.shouldRenderCostreamControl;C=C===void 0?!1:C;var D=a.shouldRenderModeratorControl;D=D===void 0?!1:D;var E=a.subOrigin,F=f==null?void 0:f.id;b=f==null?void 0:(b=f.owner)==null?void 0:b.id;var G=f==null?void 0:f.if_viewer_can_see_costreaming_tools,H=G!=null,I=f==null?void 0:f.if_viewer_can_use_clipping,J=(f==null?void 0:f.is_clipping_enabled)===!0,K=f==null?void 0:f.if_viewer_can_see_community_moderation_tools,L=K!=null,M=f==null?void 0:f.if_viewer_can_use_live_rewind;e=((e=f==null?void 0:f.live_rewind_enabled)!=null?e:!1)&&a.shouldHideRewindControls!==!0;x=x||w||g===!0&&!p;z=z||w||g===!0&&!p;p=k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:x,noPaddingEnd:!0,noPaddingStart:!0,children:v});x=a.shouldRenderWatchAndScrollControl===!0&&E!=null&&f!=null?k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:z,children:k.jsx(c("VideoPlayerWatchAndScrollControl.react"),{subOrigin:E,video:f})}):null;v=E==="watch_scroll";z=c("gkx")("24335")?B===!0:!v;return k.jsxs(c("VideoPlayerControlsContainerOverlay.react"),{isBackgroundVisible:w,isVisible:u,children:[e?k.jsx(d("CometRelay").MatchContainer,{match:M,props:{isControlsVisible:w&&!g,onUserInteraction:A,video:M}}):k.jsxs(k.Fragment,{children:[Boolean(a.shouldRenderPauseControl)?k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:w&&!g,children:k.jsx(c("VideoPlayerPlaybackControl.react"),{})}):null,k.jsx(d("VideoPlayerControlsGroups.react").Expanded,{children:k.jsx(k.Fragment,{})})]}),k.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:w,children:[b!=null&&F!=null&&k.jsx(c("LiveCostreamerTagSubscription.react"),{pageID:b,videoID:F}),H&&C&&F!=null&&!h&&k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(d("CometRelay").MatchContainer,{match:G,props:{video:G}})}),a.shouldRenderQuietModeControl===!0&&!h&&k.jsx(c("VideoPlayerQuietModeControl.react"),{}),a.shouldRenderExpandSidePanelControl===!0&&!h&&!o&&k.jsx(c("VideoPlayerExpandSidePanelControl.react"),{}),J&&F!=null&&k.jsx(d("CometRelay").MatchContainer,{match:I,props:{video:I,videoID:F}}),L&&D?k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(d("CometRelay").MatchContainer,{match:K,props:{video:K,videoID:F}})}):null,g===!0?null:k.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:257,children:k.jsx(d("LiveVideoLatencyMenu.react").LiveVideoLatencyMenuContextProvider,{video:f,children:k.jsx(c("VideoPlayerSettingsControl.react"),{alignMenuToIcon:(i==null?void 0:i.getBottomRowAddOn())!=null,menuOpened:t,onUserInteraction:A,setMenuOpened:s})})}),q&&z?k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:w,children:k.jsx(c("VideoPlayerCaptionsControl.react"),{alignMenuToIcon:(i==null?void 0:i.getBottomRowAddOn())!=null,captionsVisible:r,menuOpened:t,onUserInteraction:A,setMenuOpened:s,video:f})}):null,a.shouldRenderCastControl===!0&&E!=null&&f!=null?k.jsx(c("VideoPlayerCastControlShim.react"),{isVisible:w&&!g,subOrigin:E}):null]}),p,x,k.jsx(d("VideoPlayerControlsGroups.react").Contracted,{isVisible:y,noPaddingStart:!0,children:k.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:114,children:k.jsx(c("VideoPlayerVolumeControl.react"),{onUserInteraction:A})})})]})}o.displayName=o.name+" [from "+f.id+"]";function a(a){return k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(o,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerScrubberRenderer_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberRenderer_video",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_player_scrubber_base_content_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"VideoPlayerScrubberRenderer_video",fragmentName:"VideoPlayerScrubberBaseContentSegmented_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBVideoPlayerScrubberBaseContentSegmentedRenderer",abstractKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerScrubberRenderer.react",["CometRelay","VideoPlayerScrubberBaseContentDefault.react","VideoPlayerScrubberRenderer_video.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=a.scrubberProps;a=a.video;a=d("CometRelay").useFragment(h!==void 0?h:h=b("VideoPlayerScrubberRenderer_video.graphql"),a);return(a==null?void 0:a.video_player_scrubber_base_content_renderer)==null?j.jsx(c("VideoPlayerScrubberBaseContentDefault.react"),babelHelpers["extends"]({},e)):j.jsx(d("CometRelay").MatchContainer,{match:a==null?void 0:a.video_player_scrubber_base_content_renderer,props:babelHelpers["extends"]({},e)})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VideoPlayerScrubberWithPreview_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerScrubberWithPreview_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberPreview_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerScrubberRenderer_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("VideoPlayerScrubberWithPreview.react",["CometRelay","VideoPlayerScrubber.react","VideoPlayerScrubberPreview.react","VideoPlayerScrubberRenderer.react","VideoPlayerScrubberWithPreview_video.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=a.onUserInteraction;a=a.video;var f=d("CometRelay").useFragment(h!==void 0?h:h=b("VideoPlayerScrubberWithPreview_video.graphql"),a);return j.jsx(c("VideoPlayerScrubber.react"),{onUserInteraction:e,renderScrubber:function(a){return j.jsx(c("VideoPlayerScrubberRenderer.react"),{scrubberProps:a,video:f})},renderTooltip:function(a){return j.jsx(c("VideoPlayerScrubberPreview.react"),{timestampSec:a,video:f})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("E2EEBackupCommon",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ALREADY_REGISTERED","BACKUP_KEY_PAIR_SERIALIZATION_ERROR","CLIENT_PARAMS_ERROR","NETWORK_PROVIDER_ERROR","NOT_REGISTERED","VESTA_CLIENT_ERROR","VESTA_SERVER_ERROR","ISLAND_PUB_RSA_KEY_INVALID","ISLAND_PUB_ED25519_KEY_INVALID","MISSING_PIN_INPUT","GENERAL_ERROR","INVALID_PASSWORD"]);c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,c==null?void 0:c.message)||this;d.name="BackupError";d.errorType=b;d.detailedError=c;d.message=b+((c==null?void 0:c.message)!=null?": "+(c==null?void 0:c.message):"");return d}return b}(babelHelpers.wrapNativeSuper(Error));f.BackupErrorType=a;f.BackupError=c}),66);
__d("VestaClientBootstrap",["FBLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Array(32).fill(void 0);i.push(void 0,null,!0,!1);function j(a,b){return a[b]}var k=i.length;function l(a){if(a<36)return;i[a]=k;k=a}function m(a){var b=j(i,a);l(a);return b}function n(a){k===i.length&&i.push(i.length+1);var b=k;k=j(i,b);i[b]=a;return b}function o(a){return a}var p=new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});p.decode();var q=null;function r(){var a=o(h.memory);(q===null||q.buffer!==a.buffer)&&(q=new Uint8Array(a.buffer));return q}function s(a,b){return p.decode(r().subarray(a,a+b))}function t(a,b){try{return a.apply(void 0,b)}catch(b){a=o(h.__wbindgen_exn_store);a(n(b))}}function u(a,b){return r().subarray(a/1,a/1+b)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(typeof WebAssembly.instantiateStreaming==="function")return WebAssembly.instantiateStreaming(a,b);a=(yield a.arrayBuffer());return WebAssembly.instantiate(a,b)});return w.apply(this,arguments)}function x(a){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var d=arguments,e={wbg:{__wbg_buffer_de1150f91b23aa89:function(a){return n(j(i,a).buffer)},__wbg_call_4573f605ca4b5f10:function(){return t(function(a,b){a=j(i,a).call(j(i,b));return n(a)},d)},__wbg_crypto_98fc271021c7d2ad:function(a){return n(j(i,a).crypto)},__wbg_getRandomValues_98117e9a7e993920:function(){return t(function(a,b){j(i,a).getRandomValues(j(i,b))},arguments)},__wbg_global_8c35aeee4ac77f2b:function(){return t(function(){var b=a.global;return n(b)},d)},__wbg_globalThis_56d9c9f814daeeee:function(){return t(function(){return n(window)},d)},__wbg_length_e09c0b925ab8de5d:function(a){return j(i,a).length},__wbg_modulerequire_3440a4bcf44437db:function(){return t(function(a,b){a=f.require(s(a,b));return n(a)},d)},__wbg_msCrypto_a2cdb043d2bfe57f:function(a){return n(j(i,a).msCrypto)},__wbg_new_97cf52648830a70d:function(a){return n(new Uint8Array(j(i,a)))},__wbg_newnoargs_fc5356289219b93b:function(a,b){a=new Function(s(a,b));return n(a)},__wbg_newwithlength_e833b89f9db02732:function(a){return n(new Uint8Array(a>>>0))},__wbg_node_4b517d861cbcb3bc:function(a){return n(j(i,a).node)},__wbg_process_2f24d6544ea7b200:function(a){return n(j(i,a).process)},__wbg_randomFillSync_64cc7d048f228ca8:function(){return t(function(a,b,c){j(i,a).randomFillSync(u(b,c))},d)},__wbg_self_ba1ddafe9ea7a3a2:function(){return t(function(){var a=self.self;return n(a)},d)},__wbg_set_a0172b213e2469e9:function(a,b,c){return j(i,a).set(j(i,b),c>>>0)},__wbg_subarray_9482ae5cd5cd99d3:function(a,b,c){return n(j(i,a).subarray(b>>>0,c>>>0))},__wbg_versions_6164651e75405d4a:function(a){return n(j(i,a).versions)},__wbg_window_be3cc430364fd32c:function(){return t(function(){var a=window.window;return n(a)},d)},__wbindgen_is_object:function(a){return typeof j(i,a)==="object"&&j(i,a)!==null},__wbindgen_is_string:function(a){return typeof j(i,a)==="string"},__wbindgen_is_undefined:function(a){return j(i,a)===void 0},__wbindgen_memory:function(){return n(h.memory)},__wbindgen_object_clone_ref:function(a){return n(j(i,a))},__wbindgen_object_drop_ref:m,__wbindgen_throw:function(a,b){throw c("FBLogger")("wasm_vesta_client").mustfixThrow(s(a,b))}}},g=(yield window.fetch(b)),k=(yield v(yield g,e)),l=k.instance;h=l.exports;x.__wbindgen_wasm_module=f;return l});return y.apply(this,arguments)}g["default"]=x}),98);
__d("VestaClient",["$InternalEnum","Promise","VestaClientBootstrap","asyncToGeneratorRuntime","bx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("mapVestaClientError").__setRef("VestaClient"),j=4096,k,l,m=function(a){return new(h||(h=b("Promise")))(function(b){i.onReady(function(c){b(c(a))})})};function n(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("VestaClientBootstrap")(c("bx").getURL(c("bx")("604"))));k=a.exports;l=p(k.memory)});return o.apply(this,arguments)}function p(a){return a}function a(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){(k===void 0||l===void 0)&&(yield n());var c=0,d=new Uint8Array(l.buffer,c,a.byteLength);d.set(a);c+=d.byteLength;a=new Uint8Array(l.buffer,c,b.byteLength);a.set(b);c+=a.byteLength;b=new Uint8Array(l.buffer,c,j);var e=p(k.vesta_client_validate_hsm_key);e=e(d.byteOffset,d.byteLength,a.byteOffset,a.byteLength,b.byteOffset,b.byteLength);if(e!==0)throw yield m(e);d=new DataView(l.buffer,c,j);a=z(d);return a[0][0]!==0});return q.apply(this,arguments)}function d(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){(k===void 0||l===void 0)&&(yield n());var b=0,c=new Uint8Array(l.buffer,b,a.byteLength);c.set(a);b+=c.byteLength;a=new Uint8Array(l.buffer,b,j);var d=p(k.vesta_client_begin_register);d=d(c.byteOffset,c.byteLength,a.byteOffset,a.byteLength);if(d!==0)throw yield m(d);c=new DataView(l.buffer,b,j);a=z(c);return{clientState:new Uint8Array(a[1]),r1Message:new Uint8Array(a[0])}});return r.apply(this,arguments)}var s=b("$InternalEnum").Mirrored(["WaBackupKeyData","Raw"]);function e(a,b,c,d,e,f,g,h,i,j){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e,f,g,h,i,o){i===void 0&&(i=0);o===void 0&&(o=s.WaBackupKeyData);(k===void 0||l===void 0)&&(yield n());var q=0,r=new Uint8Array(l.buffer,q,a.byteLength);r.set(a);q+=a.byteLength;a=new Uint8Array(l.buffer,q,b.byteLength);a.set(b);q+=b.byteLength;b=new Uint8Array(l.buffer,q,c.byteLength);b.set(c);q+=c.byteLength;c=new Uint8Array(l.buffer,q,d.byteLength);c.set(d);q+=d.byteLength;d=new Uint8Array(l.buffer,q,e.byteLength);d.set(e);q+=e.byteLength;e=new Uint8Array(l.buffer,q,f.byteLength);e.set(f);q+=f.byteLength;f=new Uint8Array(l.buffer,q,g.byteLength);f.set(g);q+=g.byteLength;g=new Uint8Array(l.buffer,q,h.byteLength);g.set(h);q+=h.byteLength;h=new Uint8Array(l.buffer,q,j);if(o===s.Raw){o=p(k.vesta_client_finish_register);o=o(r.byteOffset,r.byteLength,a.byteOffset,a.byteLength,b.byteOffset,b.byteLength,c.byteOffset,c.byteLength,d.byteOffset,d.byteLength,e.byteOffset,e.byteLength,f.byteOffset,f.byteLength,g.byteOffset,g.byteLength,i,h.byteOffset,h.byteLength)}else{var t=p(k.vesta_client_finish_register_proto);o=t(r.byteOffset,r.byteLength,a.byteOffset,a.byteLength,b.byteOffset,b.byteLength,c.byteOffset,c.byteLength,d.byteOffset,d.byteLength,e.byteOffset,e.byteLength,f.byteOffset,f.byteLength,g.byteOffset,g.byteLength,i,h.byteOffset,h.byteLength)}if(o!==0)throw yield m(o);t=new DataView(l.buffer,q,j);r=z(t);return{registerIdentifier:new Uint8Array(r[1]),registerPayload:new Uint8Array(r[0])}});return t.apply(this,arguments)}function f(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){(k===void 0||l===void 0)&&(yield n());var b=0,c=new Uint8Array(l.buffer,b,a.byteLength);c.set(a);b+=c.byteLength;a=new Uint8Array(l.buffer,b,j);var d=p(k.vesta_client_begin_login);d=d(c.byteOffset,c.byteLength,a.byteOffset,a.byteLength);if(d!==0)throw yield m(d);c=new DataView(l.buffer,b,j);a=z(c);return{clientState:new Uint8Array(a[1]),l1Message:new Uint8Array(a[0])}});return u.apply(this,arguments)}function v(a,b,c,d){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){(k===void 0||l===void 0)&&(yield n());var e=0,f=new Uint8Array(l.buffer,e,a.byteLength);f.set(a);e+=a.byteLength;a=new Uint8Array(l.buffer,e,b.byteLength);a.set(b);e+=b.byteLength;b=new Uint8Array(l.buffer,e,c.byteLength);b.set(c);e+=c.byteLength;c=new Uint8Array(l.buffer,e,d.byteLength);c.set(d);e+=d.byteLength;d=new Uint8Array(l.buffer,e,j);var g=p(k.vesta_client_finish_login);g=g(f.byteOffset,f.byteLength,a.byteOffset,a.byteLength,b.byteOffset,b.byteLength,c.byteOffset,c.byteLength,d.byteOffset,d.byteLength);if(g!==0)throw yield m(g);f=new DataView(l.buffer,e,j);a=z(f);return{exportKey:new Uint8Array(a[2]),l3Message:new Uint8Array(a[0]),sessionKey:new Uint8Array(a[1])}});return w.apply(this,arguments)}function x(a,b,c,d){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){d===void 0&&(d=s.WaBackupKeyData);(k===void 0||l===void 0)&&(yield n());var e=0,f=new Uint8Array(l.buffer,e,a.byteLength);f.set(a);e+=a.byteLength;a=new Uint8Array(l.buffer,e,b.byteLength);a.set(b);e+=b.byteLength;b=new Uint8Array(l.buffer,e,c.byteLength);b.set(c);e+=c.byteLength;c=new Uint8Array(l.buffer,e,j);if(d===s.Raw){d=p(k.vesta_client_unpack_login_payload);d=d(f.byteOffset,f.byteLength,a.byteOffset,a.byteLength,b.byteOffset,b.byteLength,c.byteOffset,c.byteLength)}else{var g=p(k.vesta_client_unpack_login_payload_proto);d=g(f.byteOffset,f.byteLength,a.byteOffset,a.byteLength,b.byteOffset,b.byteLength,c.byteOffset,c.byteLength)}if(d!==0)throw yield m(d);g=new DataView(l.buffer,e,j);f=z(g);return{userSecret:new Uint8Array(f[0])}});return y.apply(this,arguments)}function z(a){var b=[],c=0,d=a.getUint8(c++);for(var e=0;e<d;e++){var f=a.getUint32(c);c+=4;b[e]=[];for(var g=0;g<f;g++)b[e].push(a.getUint8(c++))}return b}g.validateHsmKey=a;g.beginRegister=d;g.SerializationMode=s;g.finishRegister=e;g.beginLogin=f;g.finishLogin=v;g.unpackLoginPayload=x}),98);
__d("VestaClientError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("E2EEBackupSecretRestoreModule",["E2EEBackupCommon","Promise","QuickPerformanceLogger","VestaClient","VestaClientError","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(235874858,"168");function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){(i||(i=c("QuickPerformanceLogger"))).markerStart(j);i.markerAnnotate(j,{string:{product_use_case:e.productUseCase}});try{var g=(yield a.initLogin({clientId:e.clientId,productUseCase:e.productUseCase},f)),k=g.islandRsaPub,l=g.islandRsaPubSig,m=g.islandEd25519Pub,n=g.islandEd25519PubSig;g=g.isRegistered;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,"init_login_network_call");if(!g){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"NOT_REGISTERED"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.NOT_REGISTERED)}g=(yield (h||(h=b("Promise"))).all([d("VestaClient").validateHsmKey(k,l),d("VestaClient").validateHsmKey(m,n)]));k=g[0];l=g[1];if(!k){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"ISLAND_PUB_RSA_KEY_INVALID"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_RSA_KEY_INVALID)}if(!l){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"ISLAND_PUB_ED25519_KEY_INVALID"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_ED25519_KEY_INVALID)}i.markerPoint(j,"verify_island_rsa_key");i.markerPoint(j,"verify_island_ed25519_key");n=e.vestaAccountPin;if(n==null)throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.MISSING_PIN_INPUT);else{g=new TextEncoder();k=(yield d("VestaClient").beginLogin(g.encode(n)));l=k.clientState;g=k.l1Message;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,"begin_login_vesta_client");n=(yield a.beginLogin({clientId:e.clientId,productUseCase:e.productUseCase,opaqueL1:g},f));k=n.opaqueL2;g=n.opaqueL2Sig;i.markerPoint(j,"begin_login_network_call");n=(yield d("VestaClient").finishLogin(k,g,m,l));k=n.exportKey;g=n.l3Message;m=n.sessionKey;i.markerPoint(j,"finish_login_vesta_client");l=(yield a.finishLogin({clientId:e.clientId,productUseCase:e.productUseCase,opaqueL3:g},f));n=l.loginSuccess;a=l.loginPayload;i.markerPoint(j,"finish_login_network_call");if(!n){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"VESTA_SERVER_ERROR"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR)}if(a!=null){e=(yield d("VestaClient").unpackLoginPayload(a,m,k));g=e.userSecret;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,"unpack_login_payload");i.markerEnd(j,2);return g}i.markerAnnotate(j,{string:{failure_reason:"VESTA_SERVER_ERROR"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR)}}catch(a){if(a instanceof d("E2EEBackupCommon").BackupError)throw a;else if(a instanceof c("VestaClientError")){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"VestaClientException: "+a.name}});i.markerEnd(j,3);if(a.name==="InvalidUserPassword")throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD,a);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_CLIENT_ERROR,a)}else{(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:a.message}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.NETWORK_PROVIDER_ERROR,a)}}});return k.apply(this,arguments)}g.restoreBackupSecret=a}),98);
__d("E2EEBackupUtil",["tweetnacl-util"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("tweetnacl-util").encodeBase64(a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function b(a){var b=a.replace(/-/g,"+").replace(/_/g,"/");a=a.length%4;if(a>0){if(a===1)throw new Error("Invalid length, couldn't decode input string");b=b.padEnd(b.length+(4-a),"=")}return c("tweetnacl-util").decodeBase64(b)}g.encodeBase64Url=a;g.decodeBase64Url=b}),98);
__d("GaloisField32",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=c("FBLogger")("labyrinth_web"),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,5,7,1,3,13,15,9,11,21,23,17,19,29,31,25,27,0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,21,22,19,16,25,26,31,28,13,14,11,8,1,2,7,4,0,4,8,12,16,20,24,28,5,1,13,9,21,17,29,25,10,14,2,6,26,30,18,22,15,11,7,3,31,27,23,19,0,5,10,15,20,17,30,27,13,8,7,2,25,28,19,22,26,31,16,21,14,11,4,1,23,18,29,24,3,6,9,12,0,6,12,10,24,30,20,18,21,19,25,31,13,11,1,7,15,9,3,5,23,17,27,29,26,28,22,16,2,4,14,8,0,7,14,9,28,27,18,21,29,26,19,20,1,6,15,8,31,24,17,22,3,4,13,10,2,5,12,11,30,25,16,23,0,8,16,24,5,13,21,29,10,2,26,18,15,7,31,23,20,28,4,12,17,25,1,9,30,22,14,6,27,19,11,3,0,9,18,27,1,8,19,26,2,11,16,25,3,10,17,24,4,13,22,31,5,12,23,30,6,15,20,29,7,14,21,28,0,10,20,30,13,7,25,19,26,16,14,4,23,29,3,9,17,27,5,15,28,22,8,2,11,1,31,21,6,12,18,24,0,11,22,29,9,2,31,20,18,25,4,15,27,16,13,6,1,10,23,28,8,3,30,21,19,24,5,14,26,17,12,7,0,12,24,20,21,25,13,1,15,3,23,27,26,22,2,14,30,18,6,10,11,7,19,31,17,29,9,5,4,8,28,16,0,13,26,23,17,28,11,6,7,10,29,16,22,27,12,1,14,3,20,25,31,18,5,8,9,4,19,30,24,21,2,15,0,14,28,18,29,19,1,15,31,17,3,13,2,12,30,16,27,21,7,9,6,8,26,20,4,10,24,22,25,23,5,11,0,15,30,17,25,22,7,8,23,24,9,6,14,1,16,31,11,4,21,26,18,29,12,3,28,19,2,13,5,10,27,20,0,16,5,21,10,26,15,31,20,4,17,1,30,14,27,11,13,29,8,24,7,23,2,18,25,9,28,12,19,3,22,6,0,17,7,22,14,31,9,24,28,13,27,10,18,3,21,4,29,12,26,11,19,2,20,5,1,16,6,23,15,30,8,25,0,18,1,19,2,16,3,17,4,22,5,23,6,20,7,21,8,26,9,27,10,24,11,25,12,30,13,31,14,28,15,29,0,19,3,16,6,21,5,22,12,31,15,28,10,25,9,26,24,11,27,8,30,13,29,14,20,7,23,4,18,1,17,2,0,20,13,25,26,14,23,3,17,5,28,8,11,31,6,18,7,19,10,30,29,9,16,4,22,2,27,15,12,24,1,21,0,21,15,26,30,11,17,4,25,12,22,3,7,18,8,29,23,2,24,13,9,28,6,19,14,27,1,20,16,5,31,10,0,22,9,31,18,4,27,13,1,23,8,30,19,5,26,12,2,20,11,29,16,6,25,15,3,21,10,28,17,7,24,14,0,23,11,28,22,1,29,10,9,30,2,21,31,8,20,3,18,5,25,14,4,19,15,24,27,12,16,7,13,26,6,17,0,24,21,13,15,23,26,2,30,6,11,19,17,9,4,28,25,1,12,20,22,14,3,27,7,31,18,10,8,16,29,5,0,25,23,14,11,18,28,5,22,15,1,24,29,4,10,19,9,16,30,7,2,27,21,12,31,6,8,17,20,13,3,26,0,26,17,11,7,29,22,12,14,20,31,5,9,19,24,2,28,6,13,23,27,1,10,16,18,8,3,25,21,15,4,30,0,27,19,8,3,24,16,11,6,29,21,14,5,30,22,13,12,23,31,4,15,20,28,7,10,17,25,2,9,18,26,1,0,28,29,1,31,3,2,30,27,7,6,26,4,24,25,5,19,15,14,18,12,16,17,13,8,20,21,9,23,11,10,22,0,29,31,2,27,6,4,25,19,14,12,17,8,21,23,10,3,30,28,1,24,5,7,26,16,13,15,18,11,22,20,9,0,30,25,7,23,9,14,16,11,21,18,12,28,2,5,27,22,8,15,17,1,31,24,6,29,3,4,26,10,20,19,13,0,31,27,4,19,12,8,23,3,28,24,7,16,15,11,20,6,25,29,2,21,10,14,17,5,26,30,1,22,9,13,18],j=[0,1,18,28,9,23,14,12,22,4,25,16,7,15,6,13,11,24,2,29,30,26,8,5,17,10,21,31,3,19,20,27],k="ACDEFHJKLMNPQRSTUVWXYZ0123456789",l=function(){var a={};for(var b=0;b<k.length;b++)a[k[b]]=b;return a}();function m(a,b){return i[a*32+b]}function a(a){var b=[];for(var c=0;c<a.length;c++){if(!(a[c]in l)){h.mustfix("gf32: tried to convert invalid string to GF32 matrix: %s",a);return null}b[c]=l[a[c]]}return b}function b(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b.push(k[e])}return b.join("")}function n(a){return a===0||a===1||a===2||a===3||a===4||a===5||a===6||a===7||a===8||a===9||a===10||a===11||a===12||a===13||a===14||a===15||a===16||a===17||a===18||a===19||a===20||a===21||a===22||a===23||a===24||a===25||a===26||a===27||a===28||a===29||a===30||a===31?a:null}function d(a){var b=[];for(var c=0;c<a.length;c++){var d=n(a[c]);if(d==null)throw h.mustfixThrow("gf32: tried to convert bad value to GF32 element: %s",a[c]);b.push(d)}return b}function o(a,b){var c=a^b,d=n(c);if(d==null)throw h.mustfixThrow("gf32: xor of gf32 elements returned a non-element (should be impossible): %s ^ %s = %s",a,b,c);return d}function p(a,b,c,d,e){for(var f=0;f<b;f++)a[c*b+f]=o(a[c*b+f],m(a[d*b+f],e))}function q(a,b,c,d){for(var e=0;e<b;e++){var f=a[c*b+e];a[c*b+e]=a[d*b+e];a[d*b+e]=f}}function r(a,b,c,d){for(var e=0;e<b;e++)a[c*b+e]=m(a[c*b+e],d)}function s(a,b){if(b===0)throw h.mustfixThrow("gf32: tried to divide by 0");return m(a,j[b])}function t(a){var b=Array(a*a).fill(0);for(var c=0;c<a;c++)b[c*a+c]=1;return b}function e(a,b){a=a.slice();var c=t(b);for(var d=0;d<b;d++){var e=d;if(a[d*b+e]===0){var f=!1;for(var g=d+1;g<b;g++)if(a[g*b+e]!==0){q(a,b,d,g);q(c,b,d,g);f=!0;break}if(!f)return null}for(g=d+1;g<b;g++){f=s(a[g*b+e],a[d*b+e]);p(a,b,g,d,f);p(c,b,g,d,f)}}for(f=b-1;f>=0;f--){e=f;for(g=f-1;g>=0;g--){d=s(a[g*b+e],a[f*b+e]);p(a,b,g,f,d);p(c,b,g,f,d)}}for(d=0;d<b;d++){e=a[d*b+d];if(e===0)return null;r(c,b,d,j[e])}return c}f=0;g.zero=f;g.matrixToSymbols=b;g.symbolsToMatrix=a;g.invert=e;g.xor=o;g.multiply=m;g.asGf32MatExn=d}),98);
__d("GF32RecoveryCodes",["FBLogger","GaloisField32"],(function(a,b,c,d,e,f,g){"use strict";var h=c("FBLogger")("labyrinth_web"),i=34,j=4,k=3,l=i+j,m=d("GaloisField32").asGf32MatExn([18,24,16,12,8,20,2,19,4,22,21,5,28,5,14,21,7,16,15,10,3,9,28,22,11,30,19,6,7,7,9,18,16,2,9,12,18,14,7,6,5,16,9,24,16,28,19,2,14,8,2,4,1,21,26,21,10,27,16,25,18,14,20,17,11,22,21,22,16,20,2,5,0,9,6,7,23,23,23,11,6,5,3,31,29,30,17,28,0,30,28,7,13,5,11,22,12,16,25,3,20,22,26,22,14,29,5,14,5,19,12,19,18,8,25,7,30,7,8,12,0,26,15,10,17,21,2,29,14,4,31,7,29,6,29,1,14,16,17,15,4,16,7,4,7,4,8,26,10,23,24,26]);function n(a,b,c){c===void 0&&(c=1);var d=[];for(a=a;a<b;a+=c)d.push(a);return d}var o={};function p(a,b){function c(a,b,d,e){if(b<=0)return[[]];if(e-d<=b)return[n(d,e)];var f=a|b<<8|d<<16|e<<24,g=o[f];if(g!=null)return g;var h=[];c(a-1,b-1,d+1,e).forEach(function(a){a=a.slice();a.splice(0,0,d);h.push(a)});c(a-1,b,d+1,e).forEach(function(a){h.push(a.slice())});o[f]=h;return h}return c(a,b,0,a)}function q(a,b){var c=a.length,d=Array(c*c).fill(0),e=0;for(var f=0;f<j;f++){if(f===b)continue;for(var g=0;g<c;g++){var h=a[g];d[e*c+g]=m[f*l+h]}e++}return d}function r(a,b){for(var c=0;c<j;c++){var e=q(a,c);e=d("GaloisField32").invert(e,b);if(e!=null)return{excludeRow:c,submatInv:e}}return null}function a(a){var b=Array(j).fill(0);for(var c=0;c<j;c++)for(var e=0;e<i;e++)b[c]=d("GaloisField32").xor(b[c],d("GaloisField32").multiply(m[c*l+e],a[e]));e=Array(j*j);for(a=0;a<j;a++)for(c=0;c<j;c++)e[a*j+c]=m[a*l+i+c];c=d("GaloisField32").invert(e,j);if(c==null)throw h.mustfixThrow("gf32: failed to invert error code submatrix (should be impossible): %s",JSON.stringify(e));a=Array(j).fill(0);for(e=0;e<j;e++)for(var f=0;f<j;f++)a[e]=d("GaloisField32").xor(a[e],d("GaloisField32").multiply(c[e*j+f],b[f]));return a}function b(a){var b=new Set(),c=d("GaloisField32").symbolsToMatrix(a);if(c==null){h.warn("gf32: recovery code %s could not be converted to GF32 matrix",a);return[a]}a=Array(j).fill(0);for(var e=0;e<j;e++)for(var f=0;f<l;f++)a[e]=d("GaloisField32").xor(a[e],d("GaloisField32").multiply(m[e*l+f],c[f]));f=p(l,k);for(var e=f,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;var n=a.slice();for(var o=0;o<j;o++)for(var q=i,s=Array.isArray(q),t=0,q=s?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=q.length)break;u=q[t++]}else{t=q.next();if(t.done)break;u=t.value}u=u;n[o]=d("GaloisField32").xor(n[o],d("GaloisField32").multiply(m[o*l+u],c[u]))}u=r(i,k);if(u==null){h.warn("gf32: no submat inverse found for error locs %s",JSON.stringify(i));continue}t=u.excludeRow;s=u.submatInv;q=Array(k).fill(0);o=n.slice();o.splice(t,1);for(u=0;u<k;u++)for(var v=0;v<k;v++)q[u]=d("GaloisField32").xor(q[u],d("GaloisField32").multiply(s[u*k+v],o[v]));v=d("GaloisField32").zero;for(u=0;u<k;u++)v=d("GaloisField32").xor(v,d("GaloisField32").multiply(m[t*l+i[u]],q[u]));if(v===n[t]){s=c.slice();for(o=0;o<i.length;o++)s[i[o]]=q[o];b.add(d("GaloisField32").matrixToSymbols(s))}}return Array.from(b)}g.getEccForCode=a;g.getCandidateCodes=b}),98);
__d("LSHandleWrongRecoveryCode",["LSAppendDataTraceAddon","LSFlushDataTrace.nop","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure] Beginning execution."),c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1415]),c.i64.cast([0,2]),a[1],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[7]=a[0],a})},function(a){return d[7]?d[8]=!0:d[8]=!1,d[8]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[9],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.db.table(178).put({pk:c.i64.cast([0,1]),recoveryCodeStatus:c.i64.cast([0,3])})},function(e){return a[2]?c.resolve(0):a[1]!==void 0?c.sequence([function(e){return d[8]=["[EncryptedBackups][LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure] ","",a[1]].join(""),function(a){c.logger(a).mustfix(a)}(d[8]),d[7]=c.createArray(),void 0!==void 0?d[9]=(d[7].push(void 0),d[7]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure",a[1],d[7],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,85]),c.i64.cast([0,2]),d[8],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]?d[12]=!0:d[12]=!1,d[12]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[13],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return void 0!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[11],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(a){return void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[11],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return void 0!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[7]=a[0],a})},function(a){return d[7]?d[8]=!0:d[8]=!1,d[8]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[9],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[1]=c.i64.of_float(Date.now()),d[2]=c.i64.random(),d[4]="Finishing execution. Execution time: ",d[5]=c.i64.to_string(c.i64.sub(d[1],d[0])),d[6]=" ms",d[3]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure] ",d[3],d[4],d[3],d[5],d[3],d[6]].join("")),c.i64.eq(c.i64.mod_(d[2],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[7]=",",d[8]=c.createArray(),void 0!==void 0?d[9]=(d[8].push(void 0),d[8]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure",[d[4],d[7],d[5],d[7],d[6]].join(""),d[8],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure";a.__tables__=["secure_encrypted_backups_recovery_code_status"];e.exports=a}),null);
__d("checkLSRecoveryCodeMatch",["LSBinaryToHex.nop","LSShape","LSVec","Promise","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f,g,i){i=c("LSVec").toArray(i).map(function(a){return d("LSShape").toRecord(a)});var j=c("LSBinaryToHex.nop")(a,e,c("nullthrows")(f)),k=function(d,i){return d.then(function(d){if(d[0]!=null)return(h||(h=b("Promise"))).resolve(d);d=c("LSBinaryToHex.nop")(a,e,i.virtual_device_id);return(h||(h=b("Promise"))).all([j,d]).then(function(a){var c=a[0],d=a[1];a=c.length===d.length&&c.every(function(a,b){return a===d[b]});if(a)return(h||(h=b("Promise"))).resolve([f,g]);else return(h||(h=b("Promise"))).resolve([void 0,void 0])})})};return i.reduce(k,(h||(h=b("Promise"))).resolve([void 0,void 0]))}g["default"]=a}),98);
__d("deriveLSKey",["I64","LSCreateDerivedKeys.nop","LSCryptoUtils","LSVec"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f,g){g=g==="1"?(h||(h=d("I64"))).of_string("8"):(h||(h=d("I64"))).of_string("16");g=c("LSVec").ofArray([g,(h||(h=d("I64"))).of_string("32")]);return c("LSCreateDerivedKeys.nop")(a,b,d("LSCryptoUtils").strToBuf(f),void 0,d("LSCryptoUtils").strToBuf(e),g).then(function(a){a=a[0];if(a==null)return[void 0,void 0];a=c("LSVec").toArray(a);return a.length===2?[a[0],a[1]]:[void 0,void 0]})}g["default"]=a}),98);
__d("parseLSRecoveryCode",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=a.substring(0,1);if(a.length!==40||c!=="1"&&c!=="2")return;var d=c==="1"?35:34,e=a.substring(1,2);a=a.substring(2,d+2);d="BackupRecoveryCode_v"+c+"_"+e+"_"+b;return[a,d,c]}f["default"]=a}),66);
__d("LSParseRecoveryCode_v2.nop",["CryptoLogger","GF32RecoveryCodes","Promise","checkLSRecoveryCodeMatch","deriveLSKey","parseLSRecoveryCode"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,e,f,g,i){var j=d("CryptoLogger").CryptoLogger("parse_recovery_code_v2");f=c("parseLSRecoveryCode")(f,g);if(f!=null)return c("deriveLSKey")(a,e,f[0],f[1],f[2]);else{i&&j.mustfix("could not parse recovery code with uid");return(h||(h=b("Promise"))).resolve([void 0,void 0])}}var j=new Map([["B","8"],["G","C"],["I","1"],["O","0"]]),k=new RegExp("["+Array.from(j.keys()).join("")+"]","g");function l(a){return a.replace(k,function(a){return j.get(a)||a})}a=function(a,e,f,g,j){if(f.length!==40)return(h||(h=b("Promise"))).resolve([void 0,void 0]);var k=f.substring(0,2),m=l(f.substring(2,40));f=d("GF32RecoveryCodes").getCandidateCodes(m);var n=function(d,f){return d.then(function(d){if(d[0]!=null)return(h||(h=b("Promise"))).resolve(d);else return i(a,e,k+f,g,!1).then(function(d){var f=d[0];if(f==null)return(h||(h=b("Promise"))).resolve([void 0,void 0]);else return c("checkLSRecoveryCodeMatch")(a,e,f,d[1],j)}).then(function(a){if(a[0]==null)return[void 0,void 0];else return a})})};return f.reduce(n,(h||(h=b("Promise"))).resolve([void 0,void 0])).then(function(c){return c[0]==null?i(a,e,k+m,g,!0):(h||(h=b("Promise"))).resolve(c)})};g["default"]=a}),98);
__d("LSAddDevice",["LSArrayGetObjectAt","LSBase64Encode.nop","LSGetViewerFBID","LSHandleWrongRecoveryCode","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop","LSParseRecoveryCode_v2.nop","gkx","justknobx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure] Beginning execution."),(c("gkx")("23657")||c("gkx")("26375"))&&c("justknobx")._("946")?d.sequence([function(a){return e[8]=d.createArray(),d.forEach(d.db.table(179).fetch(),function(a){var b=a.item;return d.sequence([function(a){return e[15]=b.taskId,d.db.table(2).fetch([[[e[15]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?e[13]=!1:(a.item,e[13]=!0)})},function(a){return e[13]?0:e[16]=(e[8].push(e[15]),e[8])}])})},function(a){return e[9]=d.i64.of_int32(e[8].length),d.i64.gt(e[9],d.i64.cast([0,0]))?d.loopAsync(e[9],function(a){return e[13]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[8],e[13]).then(function(a){return a=a,e[14]=a[0],e[15]=a[1],a})},function(a){return d.forEach(d.db.table(179).fetch([[[e[14]]]]),function(a){return a["delete"]()})}])}):d.resolve()},function(a){return d.db.table(179).fetch().next().then(function(a,b){b=a.done;a=a.value;return b?e[10]=!1:(a.item,e[10]=!0)})},function(c){return e[10]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure] add device task already pending"),e[13]=d.createArray(),void 0!==void 0?e[14]=(e[13].push(void 0),e[13]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsAddDeviceStoredProcedure","add device task already pending",e[13],d.i64.cast([0,3]))},function(a){return e[12]=d.i64.cast([0,1])}]):d.sequence([function(b){return e[13]=d.createArray(),d.forEach(d.filter(d.db.table(184).fetch(),function(b){return d.i64.eq(b.backupId,a[0])}),function(a){a=a.item;return e[19]=new d.Map(),e[19].set("virtual_device_id",a.virtualDeviceId),e[20]=(e[13].push(e[19]),e[13])})},function(a){return d.db.table(172).fetch().next().then(function(a,b){var c=a.done;a=a.value;return c?e[14]=void 0:(b=a.item,e[20]=b.encryptionManagementDelegatorId,d.i64.neq(e[20],void 0)?(d.i64.neq(e[20],d.i64.cast([0,0]))?e[21]=d.i64.to_string(e[20]):e[21]=void 0,e[19]=e[21]):e[19]=void 0,e[14]=e[19])})},function(a){return d.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,e[16]=a[0],a})},function(c){return d.nativeOperation(b("LSParseRecoveryCode_v2.nop"),a[1],e[14]==null?d.i64.to_string(e[16]):e[14],e[13]).then(function(a){return a=a,e[17]=a[0],e[18]=a[1],a})},function(c){return d.blobs.neq(e[17],void 0)?d.blobs.neq(e[18],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[17]).then(function(a){return a=a,e[19]=a[0],a})},function(a){return d.db.table(178).put({pk:d.i64.cast([0,1]),recoveryCodeStatus:d.i64.cast([0,1])})},function(c){return e[24]=d.i64.cast([0,1e3]),e[20]=e[24],e[21]=new d.Map(),e[21].set("backup_id",a[0]),e[21].set("virtual_device_id",e[19]==null?"":e[19]),e[21].set("trace_id",a[4]),e[22]=d.toJSON(e[21]),d.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",d.i64.cast([0,50007]),e[22],d.i64.cast([0,0]),d.i64.cast([0,93]),d.i64.cast([0,0]),void 0,e[20]).then(function(a){return a=a,e[23]=a[0],a})},function(b){return d.db.table(185).add({pk:d.i64.cast([0,1]),backupId:a[0],deviceRegistrationId:a[2],taskId:e[23]})},function(a){return d.db.table(179).add({taskId:e[23],virtualDeviceId:e[17],blobDecryptionKey:e[18]})}]):d.storedProcedure(b("LSHandleWrongRecoveryCode"),void 0,"[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure] Invalid recovery code. blob_decryption_key is null",!0):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure] Invalid recovery code. virtual_device_id is null"),e[19]=d.createArray(),void 0!==void 0?e[20]=(e[19].push(void 0),e[19]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsAddDeviceStoredProcedure","Invalid recovery code. virtual_device_id is null",e[19],d.i64.cast([0,3]))},function(a){return d.storedProcedure(b("LSHandleWrongRecoveryCode"),void 0,"[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure] Invalid recovery code. virtual_device_id is null",!0)}])},function(a){return e[12]=d.i64.cast([0,0])}])},function(a){return e[1]=e[12]}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure] addDeviceFlow is not enabled"),e[1]=d.i64.cast([0,1])))},function(a){return e[2]=d.i64.of_float(Date.now()),e[3]=d.i64.random(),e[5]="Finishing execution. Execution time: ",e[6]=d.i64.to_string(d.i64.sub(e[2],e[0])),e[7]=" ms",e[4]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure] ",e[4],e[5],e[4],e[6],e[4],e[7]].join("")),d.i64.eq(d.i64.mod_(e[3],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[8]=",",e[9]=d.createArray(),void 0!==void 0?e[10]=(e[9].push(void 0),e[9]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsAddDeviceStoredProcedure",[e[5],e[8],e[6],e[8],e[7]].join(""),e[9],d.i64.cast([0,4]))):d.resolve()},function(a){return f[0]=e[1]}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsAddDeviceStoredProcedure";a.__tables__=["secure_recovery_code_data","pending_tasks","encrypted_backups_virtual_devices","encrypted_backups","secure_encrypted_backups_recovery_code_status","device_metadata"];d=a;g["default"]=d}),98);
__d("LSAddDeviceStoredProcedure",["LSAddDevice","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAddDevice"),e.backupId,e.recoveryCode,e.deviceRegistrationId,e.backupTenancy,e.traceId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSEncryptedBackupsOpStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:0,FAILURE:1,UNKNOWN:2});f["default"]=a}),66);
__d("LSEncryptedBackupsRecoveryCodeStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({OPTIMISTIC:1,VALID:2,INVALID:3,SYSTEM_ERROR:4});f["default"]=a}),66);
__d("MAWEncryptedBackupsClearRecoveryCode",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_recovery_code_data)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_recovery_code_status))]).then(function(c){var d=c[0],e=c[1];if(d!=null||e!=null)return a.runInTransaction(function(a){return(h||(h=b("Promise"))).all([(d==null?void 0:d.taskId)!=null?a.secure_recovery_code_data["delete"](d.taskId):(h||(h=b("Promise"))).resolve(),(e==null?void 0:e.pk)!=null?a.secure_encrypted_backups_recovery_code_status["delete"](e.pk):(h||(h=b("Promise"))).resolve()])},"readwrite",void 0,void 0,f.id+":27")})}g.encryptedBackupsClearRecoveryCode=a}),98);
__d("MWChatEBPinCodeVerifyIndicator.react",["fbt","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.isMessenger;return j.jsxs(c("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXSpinner.react"),{color:a?"disabled":"blue",size:12})}),j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXText.react"),{color:"secondary",testid:void 0,type:"meta3",children:h._(/*BTDS*/"__JHASH__sqvt0agiqDI__JHASH__")})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatEncrypedBackupsNumericCodeValidation",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){var b=/^[0-9]*$/;return b.test(a)};a=function(a,b){return a.length>b?!1:g(a)};b=function(a,b){return a.length!==b?!1:g(a)};f.numericCodeIsValid=a;f.numericCodeIsCompleted=b}),66);
__d("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8596365770431785"}),null);
__d("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters",["MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsForgotPINDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWChatEncryptedBackupsForgotPINDialog.entrypoint",["JSResourceForInteraction","MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPINDialog.react").__setRef("MWChatEncryptedBackupsForgotPINDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatEncryptedBackupsNumericCodeErrorWrapper.react",["MWXColumn.react","MWXColumnItem.react","MWXText.react","react","stylex","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={inputWrapperErrorOnly:{paddingBottom:"x18d9i69",$$css:!0},outterWrapper:{minHeight:"x10sr9ya",$$css:!0},outterWrapperSmall:{minHeight:"x1h7t28c",$$css:!0}};function a(a){var b=a.children,d=a.error;a=a.inputSize;a=a===void 0?"large":a;c("vulture")("a47lluqdvwQ");var e=a==="large"?k.outterWrapper:k.outterWrapperSmall;return j.jsx(c("MWXColumn.react"),{xstyle:e,children:j.jsxs(c("MWXColumnItem.react"),{align:"center",paddingHorizontal:a==="large"?20:0,paddingTop:0,children:[j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(d!=null&&[k.inputWrapperErrorOnly]),{children:b})),d!=null?j.jsx("div",babelHelpers["extends"]({className:"x1o1nzlu x1y1aw1k x2b8uid"},{children:j.jsx(c("MWXText.react"),{color:"negative",testid:void 0,type:"body4",children:d})})):null]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsNumericCodeInputInner.react",["BaseTextInput.react","FocusRegion.react","MWChatEncrypedBackupsNumericCodeValidation","focusScopeQueries","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useEffect,l=b.useRef,m=b.useState,n=c("gkx")("24058"),o={input:{height:"x5yr21d",start:"x17qophe",left:null,right:null,opacity:"xg01cxk",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},testOpacity:{opacity:"x1ptxcow",$$css:!0}};function a(a){var b=a.extraProps.setFocus;a=a.props;var e=a["aria-label"],f=a.disabled,g=f===void 0?!1:f;a.enableMasking;var h=a.focusRegionId;f=a.inputMode;var p=a.onChange,q=a.onCompletionChange,r=a.size,s=a.testid;a=a.value;var t=m(a.length===r),u=t[0],v=t[1],w=l(null),x=l(g);t="mw-numeric-code-input-prevent-composer-focus-steal";var y=j(function(a){var b=d("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsCompleted(a,r);p(a);q!=null&&b!==u&&(v(b),q(b))},[u,p,q,r]);k(function(){var a=function(a){a.preventDefault()},b=w.current;b==null?void 0:b.addEventListener("selectstart",a);return function(){b==null?void 0:b.removeEventListener("selectstart",a)}},[]);k(function(){g&&b(!1)},[g,b]);k(function(){x.current!==g&&(x.current=g,g||d("FocusRegion.react").focusRegionById(h,d("focusScopeQueries").tabbableScopeQuery))},[g,h]);return i.jsx(c("BaseTextInput.react"),{"aria-label":e,autoComplete:"one-time-code",disabled:g,id:s!=null?s+"-"+t:t,inputMode:f,maxLength:r,onBlur:function(){b(!1)},onFocus:function(){b(!0)},onKeyDown:function(a){var b=a.keyCode;(b===37||b===38||b===39||b===40)&&(a.preventDefault(),a.stopPropagation())},onValueChange:function(a){a=a.toString();d("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsValid(a,r)&&y(a)},ref:w,testid:void 0,value:a,xstyle:[o.input,n&&o.testOpacity]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsNumericCodeInputRenderer.react",["CometRow.react","CometRowItem.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useState,m={focusRing:{boxShadow:"x18bame2",outline:"xvetz19 x1a2a7pz",$$css:!0},input:{alignItems:"x6s0dn4",borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",boxSizing:"x9f619",display:"x78zum5",height:"xng8ra",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1o817pb",$$css:!0},inputBox:{marginTop:"x1k70j0n",marginEnd:"x1w0mnb",marginBottom:"xzueoph",marginStart:"x1mnrxsn",$$css:!0},inputColorPrimary:{backgroundColor:"xljulmy",$$css:!0},inputColorSecondary:{backgroundColor:"xwcfey6",$$css:!0},inputSmall:{height:"xaymia4",width:"x1bgwkul",$$css:!0},inputTiny:{height:"x1vqgdyp",width:"x10faclu",$$css:!0}};function a(a){var b=a.color,d=b===void 0?"primary":b;b=a.disabled;var e=b===void 0?!1:b;b=a.enableMasking;var f=b===void 0?!1:b,g=a.hasFocus;b=a.inputSize;var i=b===void 0?"large":b,n=a.size;b=a.testid;b=b===void 0?"numeric-renderer":b;var o=a.value,p=function(a){return(o.length===a||o.length>a&&a===n-1)&&g};b=l(Array(n).fill(""));a=b[0];var q=b[1];k(function(){q(Array(n).fill().map(function(a,b){return o[b]!=null?f?"\u25cf":o[b]:""}))},[f,n,o]);return j.jsx(c("CometRow.react"),{align:"center",paddingHorizontal:0,paddingVertical:0,role:"group",spacing:0,children:a.map(function(a,b){return j.jsx(c("CometRowItem.react"),{xstyle:m.inputBox,children:j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(m.input,i==="small"&&m.inputSmall,i==="tiny"&&m.inputTiny,d==="primary"&&m.inputColorPrimary,d==="secondary"&&m.inputColorSecondary,p(b)&&m.focusRing),{"data-testid":void 0,children:f?j.jsx(c("MWXText.react"),{color:e?"disabled":"primary",type:"headlineEmphasized4",children:e?"\u25cf":a}):j.jsx(c("MWXText.react"),{color:e?"disabled":"primary",type:"headlineEmphasized1",children:a})}))},b)})})}a.displayName=a.name+" [from "+f.id+"]";g.MWChatEncryptedBackupsNumericCodeInputRenderer=a}),98);
__d("MWChatEncryptedBackupsNumericCodeInput.react",["MWChatEncryptedBackupsNumericCodeInputInner.react","MWChatEncryptedBackupsNumericCodeInputRenderer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function a(a){var b=a.enableMasking,e=a.inputSize,f=a.size,g=a.testid;g=a.value;var h=j(!1),k=h[0];h=h[1];return i.jsxs("div",babelHelpers["extends"]({className:"x1n2onr6"},{children:[i.jsx(d("MWChatEncryptedBackupsNumericCodeInputRenderer.react").MWChatEncryptedBackupsNumericCodeInputRenderer,{color:a.color,disabled:a.disabled,enableMasking:b,hasFocus:k,inputSize:e,size:f,testid:void 0,value:g}),i.jsx(c("MWChatEncryptedBackupsNumericCodeInputInner.react"),{extraProps:{setFocus:h},props:a})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsSetIsDialogPersistedContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({setIsDialogPersisted:function(){}});g["default"]=b}),98);
__d("MWChatEncryptedBackupsSettingsDialogQuery.graphql",["MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:!1,kind:"LocalArgument",name:"soapEncryptedBackupEnabled"}],c={alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},d={alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c],storageKey:null}],storageKey:null},action:"THROW",path:"viewer"},{args:[{kind:"Variable",name:"soapEncryptedBackupEnabled",variableName:"soapEncryptedBackupEnabled"}],kind:"FragmentSpread",name:"MWChatEncryptedBackupsSettingsDialogStep_query"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[d,{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c,e],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[f,e,{alias:null,args:null,kind:"ScalarField",name:"last_sync_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_creation_time",storageKey:null},d,{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},e],storageKey:null}],storageKey:null},{condition:"soapEncryptedBackupEnabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[f,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_backup_encryption_management_delegator_id",storageKey:null}],type:"User",abstractKey:null},e],storageKey:null}],storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"logout_whitelist",storageKey:null}]},params:{id:b("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsSettingsDialogQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWEBFlowSourceContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({source:null});g["default"]=b}),98);
__d("MWEBFlowSourceContextProvider.react",["MWEBFlowSourceContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=a.children,d=a.source;a=j(function(){return{source:d}},[d]);return i.jsx(c("MWEBFlowSourceContext").Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBOTCDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWEBOTCDialog.react").__setRef("MWEBOTCDialog.entrypoint")};g["default"]=a}),98);
__d("MWEBPinCodeSize",[],(function(a,b,c,d,e,f){"use strict";a=6;f.EB_PIN_CODE_SIZE=a}),66);
__d("MWEBQPWithPinState.enum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({INITIAL:0,RESTORE_IN_PROGRESS:1});c=a;f["default"]=c}),66);
__d("MWEBRestoreQPWithPin_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEBRestoreQPWithPin_viewer",selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("getMWEBRestoreQPCautionCircleProperties",["ix","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i=c("gkx")("23433");function a(){var a=i?h("414274"):h("1745665");return a}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsAddDevice",["Promise","cr:3676","promiseDone","react","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useRef,l=e.useState,m=c("requireDeferred")("MAWEncryptedBackupsClearRecoveryCode").__setRef("useMWChatEncryptedBackupsAddDevice"),n=c("requireDeferred")("MWEncryptedBackupsFetchBackupIds").__setRef("useMWChatEncryptedBackupsAddDevice"),o=c("requireDeferred")("mwEBAddDevice").__setRef("useMWChatEncryptedBackupsAddDevice");function a(a){var d=a.hsmFleetMigrationResetPIN,e=a.onComplete,f=a.onFailure,g=a.onInvalidRecoveryCode,i=a.onStart;a=l(!1);var p=a[0],q=a[1],r=j(function(){q(!1),b("cr:3676")!=null&&void b("cr:3676").call()},[]),s=c("useAsyncReStore")(),t=k("");return[j(function(a,j,k){t.current=k||"",c("promiseDone")((h||(h=b("Promise"))).all([s,m.load(),o.load(),n.load()]),function(b){var h=b[0],k=b[1].encryptedBackupsClearRecoveryCode,l=b[2],m=b[3].encryptedBackupsFetchBackupIds;c("promiseDone")(k(h),function(){return l({onFailure:function(a){r(),f(a)},onInvalidRecoveryCode:function(){r(),g()},onStart:function(){q(!0),i==null?void 0:i()},onSuccess:function(){c("promiseDone")(m(h)),r(),e(),d&&t.current!==""&&d(t.current)},recoveryCode:a,storage:h,traceId:j})})})},[s,d,e,f,r,g,i]),p]}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsNumericCode",["FocusRegion.react","MWChatEncrypedBackupsNumericCodeValidation","asyncToGeneratorRuntime","focusScopeQueries","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useState;function a(a){var e=a.checkPreviouslyInsertedCode,f=a.clearInputOnComplete,g=f===void 0?!1:f;f=a.enableMasking;var h=a.focusRegionId,j=a.inputSize,k=a.onChange,l=a.onComplete;a=i(!1);var m=a[0],n=a[1];a=i(!0);var o=a[0],p=a[1];a=i("");var q=a[0],r=a[1];a=function(a){p(!a)};var s=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsCompleted(a,j)){if(e!=null){var b=e.onCodeMismatch,c=e.previouslyInsertedCode;c=c===a;if(!c){b();return}}p(!0);n(!0);try{yield l(a),g&&r("")}catch(a){r("")}finally{n(!1)}}});return function(b){return a.apply(this,arguments)}}();return[{disabled:m,enableMasking:f,focusRegionId:h,onChange:function(a){var b=function(){d("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsValid(a,j)&&(r(a),k==null?void 0:k(a),c("promiseDone")(s(a)))};b()},onCompletionChange:a,size:j,value:q},{clearNumericInput:function(){return r("")},disabled:o,focusOnInput:function(){d("FocusRegion.react").focusRegionById(h,d("focusScopeQueries").tabbableScopeQuery)},isLoading:m,onPress:function(){c("promiseDone")(s(q))}}]}g.useMWChatEncryptedBackupsNumericCode=a}),98);
__d("useMWEBFlowSourceContext",["FBLogger","MWChatEncryptedBackupsQPLSource.enum","MWEBFlowSourceContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext;function a(){var a=j(c("MWEBFlowSourceContext")),b=a.source;return i(function(){if(b==null){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][web] source is null. Did you wrap your flow with MWEBFlowSourceContextProvider?");return c("MWChatEncryptedBackupsQPLSource.enum").UNKNOWN}return b},[b])}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsPinCodeRestore",["CometRelay","EBSMGating","JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBODSEntityName.enum","MWEBPinCodeSize","MWEBUpsellDismissedEnum.facebook","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","asyncToGeneratorRuntime","promiseDone","react","requireDeferred","useLabyrinthLogging","useMWChatEncryptedBackupsAddDevice","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useContext,l=e.useEffect,m=e.useRef,n=e.useState,o=c("requireDeferred")("MWEBUseLocalStorage").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),p=c("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),q=c("requireDeferred")("mwEBGetPINSecretFromVesta").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),r=c("requireDeferred")("updateUpsellsStateInRelayStore").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),s=c("JSResourceForInteraction")("MWEncryptedBackupsHsmFleetMigrationGated").__setRef("useMWChatEncryptedBackupsPinCodeRestore");function a(a){var e=a.clientID,f=a.focusRegionId,g=a.onSubmitPin,i=a.onSubmitPinFailure,t=a.onVestaComplete,u=d("CometRelay").useRelayEnvironment();a=n(!1);var v=a[0],w=a[1];a=n(!1);var x=a[0],y=a[1];a=n(!1);var z=a[0],A=a[1],B=m(!1);a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var C=a.startFlow,D=(h||(h=c("useReStore")))(),E=c("useMWEBFlowSourceContext")();a=n(!1);var F=a[0],G=a[1],H=k(c("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted;a=c("useMWChatEncryptedBackupsAddDevice")({hsmFleetMigrationResetPIN:j(function(a){c("promiseDone")(s.load().then(function(b){b({db:D,environment:u,pinCode:a,startFlow:C})}))},[D,u,C]),onComplete:j(function(){var a;c("QPLUserFlow").addPoint((a=d("MWChatEncryptedBackupsQPLEvents")).restoreDeviceAuthQplEvent,"add_device_success");c("QPLUserFlow").addPoint(a.restoreQplEvent,"restore_auth_finished_and_dismissed");p.onReady(function(a){a=a.upsertEBSharedStateEntry;c("promiseDone")(a({db:D,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))});o.onReady(function(a){var b=a.mwEBCreateLocalStorageEntry;a=a.mwEBDeleteLocalStorageEntry;b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2);a(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)});d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:d("EBSMGating").isBackendSetupSuccessfulForEBSM()}},event:a.restoreQplEvent});d("MWChatEncryptedBackupsLogging").endSuccess({event:a.restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH});t();G(!1)},[D,t]),onFailure:j(function(a){i==null?void 0:i(),B.current=!0,y(!0),G(!1),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a),d("MWChatEncryptedBackupsLogging").endFailure({errorName:a,event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),c("promiseDone")(r.load(),function(a){a({environment:u,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),H==null?void 0:H(!1)},[u,i,H]),onInvalidRecoveryCode:j(function(){i==null?void 0:i(),B.current=!0,y(!0),G(!1),d("MWChatEncryptedBackupsLogging").endFailure({errorName:"pin_code_restore_wrong_recovery_code",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_restore_wrong_recovery_code"),c("promiseDone")(r.load(),function(a){a({environment:u,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),H==null?void 0:H(!1)},[u,i,H])});var I=a[0];a=d("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode({enableMasking:!0,focusRegionId:f,inputSize:d("MWEBPinCodeSize").EB_PIN_CODE_SIZE,onChange:function(){y(!1),A(!1),w(!1)},onComplete:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield q.load());yield b({addDevice:I,clientID:e,environment:u,getSourceFromContext:E,onSubmitPin:g,onSubmitPinFailure:i,onVestaSecretFetch:function(){c("promiseDone")(r.load(),function(a){a({environment:u,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED})}),H==null?void 0:H(!0)},pinCode:a,productUseCase:"MSGR_ENC_BACKUP",setIsInProgress:G,setIsPinCodeIncorrect:w,setIsVestaError:A,startFlow:C})});function f(b){return a.apply(this,arguments)}return f}()});f=a[0];a=a[1];var J=a.clearNumericInput,K=a.disabled;a=a.focusOnInput;l(function(){B.current&&(J(),B.current=!1)},[J]);return{focusOnInput:a,inputProps:f,isDisabled:(a=K)!=null?a:!1,isInProgress:F,isLabyrinthError:x,isPinCodeIncorrect:v,isVestaError:z}}g.useMWChatEncryptedBackupsPinCodeRestore=a}),98);
__d("MWEBRestoreQPWithPin.react",["fbt","CometRelay","EncryptedBackupsSupportedPlatformUtils","FBLogger","FocusRegion.react","JSResourceForInteraction","MWChatEBPinCodeVerifyIndicator.react","MWChatEncryptedBackupsForgotPINDialog.entrypoint","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBFlowSourceContextProvider.react","MWEBOTCDialog.entrypoint","MWEBQPWithPinState.enum","MWEBRestoreQPWithPin_viewer.graphql","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconCross","MWXImage.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","cr:6334","cr:6335","focusScopeQueries","getMWEBRestoreQPCautionCircleProperties","gkx","promiseDone","react","stylex","useAsyncReStore","useLabyrinthLogging","useMWChatEncryptedBackupsPinCodeRestore","useMWChatEncryptedBackupsVestaUserInfo","useMWEBFlowSourceContext","useMWXEntryPointDialog","useMWXLazyDialog","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));e=k;var m=e.useCallback,n=e.useContext,o=e.useEffect,p=e.useMemo,q=e.useRef,r=e.useState,s=c("JSResourceForInteraction")("MWChatEncryptedBackupsPinCodeBlockedDialog.react").__setRef("MWEBRestoreQPWithPin.react"),t="chat-encrypted-backups-jewel-qp-with-pin-input",u={card:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"xe4pinz",marginTop:"x14vqqas",marginEnd:"xktsk01",marginBottom:"xod5an3",marginStart:"x1d52u69",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",$$css:!0},ctaWithError:{marginBottom:"x12nagc",paddingTop:"x1iorvi4",$$css:!0},ctaWithoutError:{marginBottom:"xod5an3",$$css:!0},icon:{paddingTop:"x889kno",$$css:!0},mdsCard:{backgroundColor:"x1jx94hy",$$css:!0}};function v(a){var e=a.clientID,f=a.doesUserHaveOtcEligibleDevices,g=a.fragmentKey,k=a.isInbox,v=a.setClosed,w=a.setDismissed,x=d("CometRelay").useFragment(i!==void 0?i:i=b("MWEBRestoreQPWithPin_viewer.graphql"),g),y=d("CometRelay").useRelayEnvironment(),z=m(function(a){return d("CometRelay").commitLocalUpdate(y,function(b){b=b.getRoot().getLinkedRecord("viewer");if(b==null){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][jewel_softblock_state] A viewer record does not exist when propagating EB restore qp with pin state");return}b.setValue(a,"qp_with_pin_state")})},[y]);g=x==null?void 0:(a=x.messenger_default_encrypted_backup)==null?void 0:a.vesta_user_info;var A=c("useMWChatEncryptedBackupsVestaUserInfo")({vestaGetUserInfoResponse$key:g}),B=A.attemptsRemaining===0||A.loginTimeoutRemainingSecs!=null;a=r(!1);var C=a[0],D=a[1],E=q(!1);g=c("useMWXLazyDialog")(s);var F=g[0];o(function(){B&&C===!0&&E.current!==!0&&(E.current=!0,F({attemptsRemaining:A.attemptsRemaining,loginTimeoutRemainingSecs:A.loginTimeoutRemainingSecs,onDismiss:function(){}}))},[B,F,C,A.attemptsRemaining,A.loginTimeoutRemainingSecs]);a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var G=a.startFlow,H=c("useAsyncReStore")(),I=c("useMWEBFlowSourceContext")(),J=p(function(){return I()},[I]),K=m(function(a){c("promiseDone")(H.then(function(b){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:b,onFetch:function(b){var e=b.ebsmWiped,g=b.firstUpsellTime,h=b.hasEbKeysLocally,i=b.hasEBSM,j=b.hasPDB,k=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;G({additionalAnnotations:{eb_session_identifier:g,ebsm_wiped:e,has_eb_keys_locally:h,has_ebsm:i,has_pdb:j,has_user_restored_before:k,has_user_restored_before_temp:b,is_otc_eligible:f.toString(),is_pin_set:"true",restore_upsell_first_impression_time:g},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:J});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a)}})}))},[H,G,f,J]);g=m(function(){var a=k?"RESTORE_QP_WITH_PIN_INBOX_DISMISSED":"RESTORE_QP_WITH_PIN_JEWEL_DISMISSED";K(a);d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_qp_with_pin",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent});v();w()},[k,v,w,K]);a=n(c("MWJewelPopoverDialogContext.react"));var L=a.setIsOpenForDialog,M=b("cr:6334")==null?void 0:b("cr:6334")(),N=b("cr:6335")==null?void 0:b("cr:6335")();a=m(function(){v();if(M!=null)M(J);else if(N!=null){var a;N({hasSeenNotice:(a=x==null?void 0:(a=x.encrypted_backup)==null?void 0:a.has_seen_eb_auto_restore_notice)!=null?a:!1,source:J})}L(!0);z(c("MWEBQPWithPinState.enum").INITIAL)},[v,M,N,z,J,L,x==null?void 0:(a=x.encrypted_backup)==null?void 0:a.has_seen_eb_auto_restore_notice]);e=d("useMWChatEncryptedBackupsPinCodeRestore").useMWChatEncryptedBackupsPinCodeRestore({clientID:e,focusRegionId:t,onSubmitPin:function(){D(!0),z(c("MWEBQPWithPinState.enum").RESTORE_IN_PROGRESS)},onSubmitPinFailure:function(){z(c("MWEBQPWithPinState.enum").INITIAL)},onVestaComplete:a});a=e.inputProps;var O=e.isInProgress,P=e.isLabyrinthError,Q=e.isPinCodeIncorrect;e=e.isVestaError;O=(x==null?void 0:x.qp_with_pin_state)===c("MWEBQPWithPinState.enum").RESTORE_IN_PROGRESS||O;var R=c("useVisibilityObserver")({onVisible:function(){d("FocusRegion.react").focusRegionById(t,d("focusScopeQueries").tabbableScopeQuery);var a=k?"RESTORE_QP_WITH_PIN_INBOX_IMPRESSION":"RESTORE_QP_WITH_PIN_JEWEL_IMPRESSION";K(a)}}),S=c("useMWXEntryPointDialog")(c("MWChatEncryptedBackupsForgotPINDialog.entrypoint"),{}),T=S[0];S=c("useMWXEntryPointDialog")(c("MWEBOTCDialog.entrypoint"),{});var U=S[0],V=m(function(){U({source:k?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP},function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_CLOSE_DIALOG_CLICK")})},[k,U]),W=m(function(){T({onDismiss:function(){}})},[T]);S=Q?h._(/*BTDS*/"__JHASH__TG8l6XqQAul__JHASH__"):P||e?h._(/*BTDS*/"__JHASH__oI6Lha5PMTv__JHASH__"):void 0;if(B===!0){v();return null}Q=c("gkx")("23219");return l.jsx("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props([u.card,Q&&u.mdsCard]),{children:l.jsxs(c("MWXColumn.react"),{ref:R,testid:void 0,children:[l.jsx(c("MWXColumnItem.react"),{children:l.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:12,children:[l.jsx(c("MWXRowItem.react"),{xstyle:u.icon,children:l.jsx(c("MWXImage.react"),{src:c("getMWEBRestoreQPCautionCircleProperties")()})}),l.jsx(c("MWXRowItem.react"),{expanding:!0,children:l.jsxs(c("MWXColumn.react"),{paddingTop:8,spacing:12,children:[l.jsx(c("MWXColumnItem.react"),{children:l.jsx(c("MWXText.react"),{align:"start",numberOfLines:2,type:"headlineEmphasized4",children:h._(/*BTDS*/"__JHASH__q7gZd-Mj8BZ__JHASH__")})}),l.jsx(c("MWXColumnItem.react"),{children:l.jsx(c("MWXText.react"),{align:"start",color:Q?"secondary":"primary",numberOfLines:2,type:"body4",children:h._(/*BTDS*/"__JHASH__07SnZApOaT1__JHASH__")})})]})}),l.jsx(c("MWXRowItem.react"),{children:l.jsx(c("MWXCircleButton.react"),{color:"primary",icon:c("MWXIconCross"),label:h._(/*BTDS*/"__JHASH__4xGkXp7jS2s__JHASH__"),onPress:g,size:Q?24:32,testid:void 0})})]})}),l.jsx(c("MWXColumnItem.react"),{paddingTop:16,children:l.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:S,inputSize:"small",children:l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:t,children:l.jsx(c("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers["extends"]({},a,{color:Q?"primary":"secondary",disabled:O,inputSize:"small",testid:void 0}))})})}),O&&l.jsx(c("MWXColumnItem.react"),{align:"center",children:l.jsx("div",babelHelpers["extends"]({className:"xfitlp5 x9otpla"},{children:l.jsx(c("MWChatEBPinCodeVerifyIndicator.react"),{isMessenger:Q})}))}),!O&&l.jsx(c("MWXColumnItem.react"),{align:"center",children:l.jsx("div",babelHelpers["extends"]({},(j||(j=c("stylex"))).props(S==null&&u.ctaWithoutError,S!=null&&u.ctaWithError),{children:l.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:f===!0?l.jsx(c("MWXLink.react"),{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),L(!0),V()},children:h._(/*BTDS*/"__JHASH__FFwEA7rGUbF__JHASH__")}):l.jsx(c("MWXLink.react"),{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_FORGOT_PIN_CLICK"),L(!0),W()},children:h._(/*BTDS*/"__JHASH__UY_FDJp7Rzt__JHASH__")})})}))})]})}))}v.displayName=v.name+" [from "+f.id+"]";function a(a){var b=a.clientID,e=a.currentSupportedPlatform,f=a.doesUserHaveOtcEligibleDevices,g=a.fragmentKey,h=a.setClosed;a=a.setDismissed;e=e!==d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM;var i=e?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP_WITH_PIN:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP_WITH_PIN;return l.jsx(c("MWEBFlowSourceContextProvider.react"),{source:i,children:l.jsx(v,{clientID:b,doesUserHaveOtcEligibleDevices:f,fragmentKey:g,isInbox:e,setClosed:h,setDismissed:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWEncryptedBackupsThreadListPersistentBanner.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXLink.react","MWXText.react","QPLUserFlow","promiseDone","qex","react","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useRef,n=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEncryptedBackupsThreadListPersistentBanner.react");function a(a){var b=a.onDismissUpsell;a=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{});var e=a[0];a=d("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform();var f=a!==d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM;a=l(c("MWJewelPopoverDialogContext.react"));var g=a.setIsOpenForDialog,j=(i||(i=c("useReStore")))();a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var o=a.startFlow,p=m(!1),q=f?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_PERSISTENT_BANNER:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_PERSISTENT_BANNER,r=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:j,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,j=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;o({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:j,has_user_restored_before_temp:b,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:q});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);p.current===!1&&(p.current=!0,c("promiseDone")(n.load(),function(a){return a(g)}))}})};a=c("useVisibilityObserver")({onVisible:function(){r(f?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION"),c("qex")._("988")&&d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:j,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL})}});return k.jsx("div",babelHelpers["extends"]({className:"xlhe6ec x1lq5wgf xgqcy7u x30kzoy x9jhf4c x1xmf6yo x1e56ztr x1d52u69 xktsk01 x6ikm8r x10wlt62 xyamay9 x1l90r2v x1swvt13 x1pi30zi x1qh3cfz"},{ref:a,children:k.jsx(c("MWXText.react"),{color:"primary",type:"body4",children:k.jsxs(k.Fragment,{children:[h._(/*BTDS*/"__JHASH__OuaeMHC1hyC__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){g(!0),r(f?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED"),e({onDismissUpsell:b,source:q})},target:"_blank",testid:void 0,children:h._(/*BTDS*/"__JHASH__KfRv84gajDv__JHASH__")})})]})})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWEBThreadListPersistentBannerWrapper.react",["MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsThreadListPersistentBanner.react","MWEncryptedBackupsThreadListQPWrapper.react","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var b=a.setHasDismissedBanner;a=a.trigger;var e=(h||(h=c("useReStore")))();return j.jsx(d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:a,children:j.jsx(c("MWEncryptedBackupsThreadListPersistentBanner.react"),{onDismissUpsell:function(){b(!0),d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:e,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsRecoveryCodeStatus",["FBLogger","I64","LSEncryptedBackupsRecoveryCodeStatus"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.onFailure,e=a.onInvalidRecoveryCode,f=a.onSuccess;a=a.recoveryCodeStatusData;if((a==null?void 0:a.length)!==1)return;a=a[0].recoveryCodeStatus;switch((h||(h=d("I64"))).to_int32(a)){case c("LSEncryptedBackupsRecoveryCodeStatus").OPTIMISTIC:return c("LSEncryptedBackupsRecoveryCodeStatus").OPTIMISTIC;case c("LSEncryptedBackupsRecoveryCodeStatus").INVALID:e==null?void 0:e();return c("LSEncryptedBackupsRecoveryCodeStatus").INVALID;case c("LSEncryptedBackupsRecoveryCodeStatus").VALID:f==null?void 0:f();return c("LSEncryptedBackupsRecoveryCodeStatus").VALID;case c("LSEncryptedBackupsRecoveryCodeStatus").SYSTEM_ERROR:b==null?void 0:b();return c("LSEncryptedBackupsRecoveryCodeStatus").SYSTEM_ERROR;default:b==null?void 0:b(),c("FBLogger")("labyrinth_web").mustfix("Invalid Recovery Code Status type")}}g.encryptedBackupsGetRecoveryCodeStatus=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_viewer"}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__MWEBRestoreQPWithPin_qpWithPinEnabledrelayprovider"}],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_viewer",selections:[{condition:"__relay_internal__pv__MWEBRestoreQPWithPin_qpWithPinEnabledrelayprovider",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"MWEBRestoreQPWithPin_viewer"}]}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("MWEncryptedBackupsVerifyDeviceNux.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXQPCard.react","QPLUserFlow","getMWEBRestoreQPCautionCircleProperties","gkx","promiseDone","react","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useRef,n=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEncryptedBackupsVerifyDeviceNux.react");function a(a){var b=a.children,e=a.currentSupportedPlatform,f=a.setClosed,g=a.setDismissed;a=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState();var j=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{}),o=j[0],p=(i||(i=c("useReStore")))(),q=e!==d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,r=q?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP;j=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var s=j.startFlow,t=m(!1);e=l(c("MWJewelPopoverDialogContext.react"));var u=e.setIsOpenForDialog;j=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();e=j.virtualDeviceInfo;var v=e.vestaClientID!=null;j=e.offlineDevicesCount>0;var w=e.doesUserHaveOtcEligibleDevices;e=!v&&w;var x=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:p,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,j=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;s({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:j,has_user_restored_before_temp:b,is_otc_eligible:w.toString(),is_pin_set:v.toString(),restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:r});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);t.current===!1&&(t.current=!0,c("promiseDone")(n.load(),function(a){return a(g)}))}})},y=c("useVisibilityObserver")({onVisible:function(){var a=q?"VERIFY_DEVICE_INBOX_QP_THREAD_LIST_IMPRESSION":"VERIFY_DEVICE_QP_THREAD_LIST_IMPRESSION";x(a)}}),z=function(){var a=q?"USER_CLICKED_INBOX_THREAD_LIST_VERIFY_DEVICE":"USER_CLICKED_FB_THREAD_LIST_VERIFY_DEVICE";x(a);u(!0);f()},A=function(){var a=q?"USER_CLOSED_INBOX_THREAD_LIST_VERIFY_DEVICE_NUX":"USER_CLOSED_FB_THREAD_LIST_VERIFY_DEVICE_NUX";x(a);d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_nux",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent});B()},B=function(){g(),f()};if(!v&&!j&&!w)return b;j=h._(/*BTDS*/"__JHASH__QhOFgxp42ZR__JHASH__");b=c("gkx")("3228");return k.jsx(c("MWXQPCard.react"),{addOnPrimary:{label:b&&a&&w?h._(/*BTDS*/"__JHASH__0s9MoJF_J95__JHASH__"):v?h._(/*BTDS*/"__JHASH__7lrVIuZIr_a__JHASH__"):e?h._(/*BTDS*/"__JHASH__0s9MoJF_J95__JHASH__"):h._(/*BTDS*/"__JHASH__c-xwKDcXpSY__JHASH__"),onPress:function(){z(),o({onDismissUpsell:B,source:r})},testid:"mw-encrypted-backups-in-thread-verify-device-nux-verify-now-button"},body:b&&a&&w?h._(/*BTDS*/"__JHASH__c_s23abhnt6__JHASH__"):v?h._(/*BTDS*/"__JHASH__VcY2jgkRWO-__JHASH__"):e?h._(/*BTDS*/"__JHASH__c_s23abhnt6__JHASH__"):h._(/*BTDS*/"__JHASH__oJuWWcw2MCh__JHASH__"),headline:j,icon:{props:{src:c("getMWEBRestoreQPCautionCircleProperties")()},type:"image"},onClose:A,ref:y})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper.react",["CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBEntrypointsKillswitch.enum","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsThreadListPersistentBanner.react","MWEncryptedBackupsThreadListQPWrapper.react","MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql","MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql","MWEncryptedBackupsVerifyDeviceNux.react","cr:2344","gkx","react","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBBackupState","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");function m(a){var e=a.backupState,f=a.children,g=a.currentSupportedPlatform,i=a.fragmentKey,k=a.setHasDismissedQp,m=a.setHasDismissedQpWithPin;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql"),i);var n=(j||(j=c("useReStore")))();i=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();i=i.virtualDeviceInfo;var o=g===d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,p=c("gkx")("3228"),q=i.doesUserHaveOtcEligibleDevices,r=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState();e=c("useHasRestoreInterstitialSoftblockBeenDismissed")({backupState:e,isCooldownOrLockOutState:r});if(!q&&r&&p&&e)return null;else if(p&&r&&e)return l.jsx(c("MWEncryptedBackupsVerifyDeviceNux.react"),{children:f,currentSupportedPlatform:g,setClosed:function(){k(!0)},setDismissed:function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:n,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})}});else if(o&&i.vestaClientID!=null&&b("cr:2344"))return l.jsx(b("cr:2344"),{clientID:i.vestaClientID,currentSupportedPlatform:g,doesUserHaveOtcEligibleDevices:i.doesUserHaveOtcEligibleDevices,fragmentKey:a,setClosed:function(){m(!0)},setDismissed:function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:n,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL})}});else return l.jsx(c("MWEncryptedBackupsVerifyDeviceNux.react"),{children:f,currentSupportedPlatform:g,setClosed:function(){k(!0)},setDismissed:function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:n,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})}})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var e=a.children,f=a.currentSupportedPlatform,g=a.fragmentKey,h=a.hasDismissedQps,k=a.setHasDismissedBanner,n=a.setHasDismissedQp,o=a.setHasDismissedQpWithPin;a=a.trigger;g=d("CometRelay").useFragment(i!==void 0?i:i=b("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql"),g);var p=(j||(j=c("useReStore")))(),q=c("useMWEBBackupState")({entrypoint:c("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST});return h?l.jsx(d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:a,children:l.jsx(c("MWEncryptedBackupsThreadListPersistentBanner.react"),{onDismissUpsell:function(){k(!0),d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:p,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL})}})}):l.jsx(d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:a,children:l.jsx(m,{backupState:q,children:e,currentSupportedPlatform:f,fragmentKey:g==null?void 0:g.viewer,setHasDismissedQp:n,setHasDismissedQpWithPin:o})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4901700173259892"}),null);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql",["VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"begin_login_request",variableName:"input"}],concreteType:"VestaBeginLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_begin_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2_sig",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:c},params:{id:b("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderBeginLoginMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5072170542843500"}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql",["VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"finish_login_request",variableName:"input"}],concreteType:"VestaFinishLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_finish_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_login_payload",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:c},params:{id:b("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderFinishLoginMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7267509326655323"}),null);
__d("VestaServerGraphQLLoginProviderInitQuery.graphql",["VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],c=[{alias:null,args:[{kind:"Variable",name:"vesta_init_request",variableName:"request"}],concreteType:"VestaInitIqResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_login_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderInitQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderInitQuery",selections:c},params:{id:b("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderInitQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLLoginProvider",["E2EEBackupUtil","Promise","RelayHooks","RelayModern","VestaServerGraphQLLoginProviderBeginLoginMutation.graphql","VestaServerGraphQLLoginProviderFinishLoginMutation.graphql","VestaServerGraphQLLoginProviderInitQuery.graphql","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=c.environment;c=(yield d("RelayHooks").fetchQuery(c,h!==void 0?h:h=b("VestaServerGraphQLLoginProviderInitQuery.graphql"),{request:{fbid:a.clientId,product_use_case:a.productUseCase,vesta_client_api_version:6}}).toPromise());a=c==null?void 0:c.fbid_based_auth_layer_vesta_login_init;c=a==null?void 0:a.base64url_encoded_island_rsa_pub;var e=a==null?void 0:a.base64url_encoded_island_rsa_pub_signature,f=a==null?void 0:a.base64url_encoded_opaque_pub,g=a==null?void 0:a.base64url_encoded_opaque_pub_signature,i=a==null?void 0:a.base64url_encoded_island_ed25519_pub,j=a==null?void 0:a.base64url_encoded_island_ed25519_pub_signature,k=a==null?void 0:a.is_registered;a=a==null?void 0:a.attempts_remaining;if(c!=null&&e!=null&&f!=null&&g!=null&&i!=null&&j!=null&&k!=null){var l;return{islandRsaPub:(l=d("E2EEBackupUtil")).decodeBase64Url(c),islandRsaPubSig:l.decodeBase64Url(e),opaquePub:l.decodeBase64Url(f),opaquePubSig:l.decodeBase64Url(g),islandEd25519Pub:l.decodeBase64Url(i),islandEd25519PubSig:l.decodeBase64Url(j),isRegistered:k,loginAttemptsRemaining:a}}throw new Error("GraphQL Response is Null")});return l.apply(this,arguments)}function c(a,c){var e=c.environment,f=i!==void 0?i:i=b("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql"),g={input:{fbid:a.clientId,product_use_case:a.productUseCase,base64url_encoded_opaque_l1:d("E2EEBackupUtil").encodeBase64Url(a.opaqueL1)}};return new(k||(k=b("Promise")))(function(a,b){d("RelayModern").commitMutation(e,{mutation:f,variables:g,onCompleted:function(c){c=c.fbid_based_auth_layer_vesta_begin_login;var e=c==null?void 0:c.base64url_encoded_opaque_l2;c=c==null?void 0:c.base64url_encoded_opaque_l2_sig;if(e!=null&&c!=null){a({opaqueL2:d("E2EEBackupUtil").decodeBase64Url(e),opaqueL2Sig:d("E2EEBackupUtil").decodeBase64Url(c)});return}b(new Error("GraphQL Response is Null"))},onError:function(a){b(a)}})})}function e(a,c){var e=c.environment,f=c.updater;return new(k||(k=b("Promise")))(function(c,g){d("RelayModern").commitMutation(e,{mutation:j!==void 0?j:j=b("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql"),variables:{input:{fbid:a.clientId,product_use_case:a.productUseCase,base64url_encoded_opaque_l3:d("E2EEBackupUtil").encodeBase64Url(a.opaqueL3)}},onCompleted:function(a){a=a.fbid_based_auth_layer_vesta_finish_login;var b=a==null?void 0:a.base64url_encoded_login_payload,e=a==null?void 0:a.login_success;a=a==null?void 0:a.attempts_remaining;if(e!=null){c({loginSuccess:e,loginPayload:b==null?b:d("E2EEBackupUtil").decodeBase64Url(b),attemptsRemaining:a});return}g(new Error("GraphQL Response is Null"))},onError:function(a){g(a)},updater:f})})}g.initLogin=a;g.beginLogin=c;g.finishLogin=e}),98);
__d("mapVestaClientError",["VestaClientError"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case 1:return new h();case 2:return new i();case 3:return new j();case 4:return new k();case 5:return new l();case 6:return new m();case 7:return new n();case 8:return new o();case 9:return new p();case 10:return new q();case 11:return new r();case 12:return new s();default:return new t()}}var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Buffer supplied to WASM for response is too small");a=b.call(this,a)||this;a.name="InsufficientResultBuffer";return a}return a}(b=c("VestaClientError")),i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Incorrect user password supplied during login");a=b.call(this,a)||this;a.name="InvalidUserPassword";return a}return a}(b),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Invalid input from server");a=b.call(this,a)||this;a.name="MalformedServerResponse";return a}return a}(b),k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Invalid input from client");a=b.call(this,a)||this;a.name="MalformedClientInput";return a}return a}(b),l=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error during encryption operation");a=b.call(this,a)||this;a.name="EncryptionFailure";return a}return a}(b),m=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error during decryption operation");a=b.call(this,a)||this;a.name="DecryptionFailure";return a}return a}(b),n=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error during serialization operation.");a=b.call(this,a)||this;a.name="SerializationFailure";return a}return a}(b),o=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error deserializing inputs, likely due to malformed input");a=b.call(this,a)||this;a.name="DeserializationFailure";return a}return a}(b),p=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Passed RSA public key is in an invalid format.");a=b.call(this,a)||this;a.name="RsaInvalidKey";return a}return a}(b),q=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Unable to verify RSA signature");a=b.call(this,a)||this;a.name="RsaVerificationFailure";return a}return a}(b),r=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Passed Ed25519 public key is in an invalid format.");a=b.call(this,a)||this;a.name="Ed25519InvalidKey";return a}return a}(b),s=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Unable to verify Ed25519 signature");a=b.call(this,a)||this;a.name="Ed25519VerificationFailure";return a}return a}(b),t=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Unknown error code received from WASM binary");a=b.call(this,a)||this;a.name="UnknownErrorCode";return a}return a}(b);g["default"]=a}),98);
__d("mwEBAddDevice",["FBLogger","I64","LSAddDeviceStoredProcedure","LSDataTraceCheckPoint","LSEncryptedBackupsBackupTenancy","LSEncryptedBackupsOpStatus","LSFactory","LSIntEnum","MAWBridgeFireAndForget","MAWTraceUtils","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsDeviceRegistrationId","MWEncryptedBackupsInitializeRestoreDeferred","MWEncryptedBackupsRecoveryCodeStatus","Promise","QPLUserFlow","ReQL","isInstamadilloEB","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=10;function l(a){var e=a.count,f=a.storage;return new(j||(j=b("Promise")))(function(a,b){if(e===k)return a();c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.encrypted_backups)),function(b){b=b==null?void 0:b.backupId;if(b!=null)return a(b);c("setTimeout")(function(){a(l({count:e+1,storage:f}))},1e3)},function(a){return b(a)})})}function a(a){var e=a.onFailure,g=a.onInvalidRecoveryCode,k=a.onStart,m=a.onSuccess,n=a.recoveryCode,o=a.storage,p=a.traceId,q=function(){},r=!1;a=new(j||(j=b("Promise")))(function(a,b){c("setTimeout")(function(){if(r)return;var a="Add device failed by timeout 90 sec";c("FBLogger")("labyrinth_web").warn(a);q();e("add_device_timeout");b(a)},9e4)});var s=new j(function(a,r){k(),q=o.tables.secure_encrypted_backups_recovery_code_status.subscribe(function(b,f){if(f.operation==="delete")return;b=[f.value];c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_check_rc_status");d("MWEncryptedBackupsRecoveryCodeStatus").encryptedBackupsGetRecoveryCodeStatus({onFailure:function(){var a="LSEncryptedBackupsRecoveryCodeStatus system error";d("MAWTraceUtils").recordFailureAndFlushForTraceId(p,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],a);q();e("add_device_failed_to_get_rc_status");r(a)},onInvalidRecoveryCode:function(){var a="Invalid recovery code";d("MAWTraceUtils").recordFailureAndFlushForTraceId(p,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],a);q();g();r(a)},onSuccess:function(){d("MAWTraceUtils").recordSuccessAndFlushForTraceId(p,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE),[]),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_init_restore"),q(),!c("isInstamadilloEB")()?(d("MAWBridgeFireAndForget").fireAndForget("backend","checkForDecryptionFailuresToPointRestore"),d("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:o,onFailure:e,onSuccess:m})):(c("QPLUserFlow").endSuccess(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent),m()),a()},recoveryCodeStatusData:b})}),c("promiseDone")(l({count:0,storage:o}),function(a){if(a!=null){var g=d("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId();if(g==="")return(j||(j=b("Promise"))).reject("deviceRegistrationId is not defined");c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_sproc_begin");c("promiseDone")(o.runInTransaction(function(b){return c("LSAddDeviceStoredProcedure")(c("LSFactory")(b),{backupId:a,backupTenancy:(i||(i=d("I64"))).of_int32(c("LSEncryptedBackupsBackupTenancy").PRODUCTION),deviceRegistrationId:g,recoveryCode:n})},"readwrite",void 0,void 0,f.id+":191"),function(a){a=a[0];if(!(i||(i=d("I64"))).equal(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsOpStatus").SUCCESS))){d("MAWTraceUtils").recordFailureAndFlushForTraceId(p,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],"Add Device Failure");q();e("add_device_error_add_device_sproc_failure");return r("Add device sproc failed")}c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_sproc_success")})}else{d("MAWTraceUtils").recordFailureAndFlushForTraceId(p,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],"Add Device Failure");q();e("add_device_error_backup_id_not_defined");return r("backupId is not defined")}},function(a){var b="Add device failed. Could not find backup.";c("FBLogger")("labyrinth_web").catching(a).mustfix(b);d("MAWTraceUtils").recordFailureAndFlushForTraceId(p,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],"Add Device Failure");q();e("add_device_error_could_not_read_backup_table");return r(b)})});return j.race([s,a]).then(function(){r=!0})}g["default"]=a}),98);
__d("vestaBackupSecretRestore",["Promise","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("E2EEBackupSecretRestoreModule").__setRef("vestaBackupSecretRestore"),j=c("requireDeferred")("VestaServerGraphQLLoginProvider").__setRef("vestaBackupSecretRestore");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.input;a=a.environment;var d=(yield (h||(h=b("Promise"))).all([j.load(),i.load()])),e=d[0],f=e.beginLogin,g=e.finishLogin;e=e.initLogin;d=d[1].restoreBackupSecret;return d({beginLogin:f,finishLogin:g,initLogin:e},c,{environment:a})});return k.apply(this,arguments)}g["default"]=a}),98);
__d("mwEBGetPINSecretFromVesta",["CometRelay","E2EEBackupCommon","FBLogger","LSDataTraceCheckPoint","LSDataTraceType","LSIntEnum","MAWTraceUtils","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSettingsDialogQuery.graphql","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","QPLUserFlow","asyncToGeneratorRuntime","promiseDone","vestaBackupSecretRestore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.addDevice,e=a.clientID,f=a.environment,g=a.getSourceFromContext,i=a.onSubmitPin,j=a.onSubmitPinFailure,k=a.onVestaSecretFetch,l=a.pinCode,m=a.productUseCase,n=a.setIsInProgress,o=a.setIsPinCodeIncorrect,p=a.setIsVestaError;a=a.startFlow;var q=d("MAWTraceUtils").startNewTrace((h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_LOGIN),d("MAWTraceUtils").CONTEXT_VESTA_LOGIN);n(!0);i==null?void 0:i();i=g();c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"pin_code",source:i}});g=new TextDecoder();var r;a({additionalAnnotations:{device_type:"HSM"},event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH,source:i});try{c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"vesta_login_begin"),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SUBMIT"),d("MAWTraceUtils").recordCheckpointForTrace(q,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").SAP_VESTA_CALLING_VESTA_LOGIN),[],!1),r=g.decode(yield c("vestaBackupSecretRestore")({environment:f,input:{clientId:e,productUseCase:m,vestaAccountPin:l}})),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"vesta_login_success"),d("MAWTraceUtils").recordCheckpointForTrace(q,h.ofNumber(c("LSDataTraceCheckPoint").SAP_VESTA_LOGIN_COMPLETION),[],!1)}catch(b){j==null?void 0:j();c("promiseDone")(d("CometRelay").fetchQuery(f,c("MWChatEncryptedBackupsSettingsDialogQuery.graphql"),{}).toPromise());if(b.errorType===d("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD)n(!1),o(!0),d("MWChatEncryptedBackupsLogging").endFailure({errorName:"incorrect_pin_code",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityKey:c("MWEBODSEntityKey.enum").INCORRECT_PIN_CODE,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"incorrect_pin_code"),d("MAWTraceUtils").recordFailureAndFlushForTraceId(q,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],"Incorrect pin code");else{d("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{errorMessage:b.message,errorType:b.errorType}},errorName:"vesta_login_failure",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH});c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_error");n(!1);p(!0);a="Error when restoring using PIN: "+b;c("FBLogger")("labyrinth_web").mustfix(a);d("MAWTraceUtils").recordFailureAndFlushForTraceId(q,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],b.toString())}throw b}r!=null&&(d("MAWTraceUtils").recordCheckpointForTrace(q,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PLUGIN_CALLING_ADD_DEVICE),[],!1),k==null?void 0:k(),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_begin"),b(r,q,l))});return i.apply(this,arguments)}g["default"]=a}),98);
__d("updateUpsellsStateInRelayStore",["CometRelay","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.environment,e=a.updateValue;d("CometRelay").commitLocalUpdate(b,function(a){a=a.getRoot().getLinkedRecord("viewer");if(a==null){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][upsells] A viewer record does not exist when updating upsell state.");return}a.setValue(e,"is_eb_restore_upsells_dismissed")})}g["default"]=a}),98);
__d("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7918563381593344"}),null);
__d("useMWEBSetHasSeenNoticeMutation.graphql",["useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SetHasSeenEbAutoRestoreNoticeResponsePayload",kind:"LinkedField",name:"set_has_seen_eb_auto_restore_notice",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBSetHasSeenNoticeMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBSetHasSeenNoticeMutation",selections:a},params:{id:b("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"),metadata:{},name:"useMWEBSetHasSeenNoticeMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("useMWEBSetHasSeenNotice",["CometRelay","react","useMWEBSetHasSeenNoticeMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=d("CometRelay").useMutation(h!==void 0?h:h=b("useMWEBSetHasSeenNoticeMutation.graphql")),c=a[0];a[1];return j(function(){c({variables:{}})},[c])}g["default"]=a}),98);
__d("useMWEBAutoRestoreNoticeDialog",["JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","ReQL","ReQLSuspense","react","useLabyrinthLogging","useMWEBSetHasSeenNotice","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback,k=c("JSResourceForInteraction")("MWEBAutoRestoreNoticeDialog.react").__setRef("useMWEBAutoRestoreNoticeDialog");function a(){var a=d("useLabyrinthLogging").useLabyrinthLoggingFlow(),b=a.startFlow;a=c("useMWXLazyDialog")(k);var e=a[0],g=(h||(h=c("useReStore")))(),i=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.tables.auto_restore_opt_out)},[g],f.id+":45"),l=c("useMWEBSetHasSeenNotice")();return j(function(a){var f=a.hasSeenNotice;a=a.source;var g=i.filter(function(a){return a.optOutKey===c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE}).length>0;b({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,source:a});if(g){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_OUT");d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent});return}c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_IN");d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT);if(f){d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent});return}l();e({})},[i,l,e,b])}g["default"]=a}),98);